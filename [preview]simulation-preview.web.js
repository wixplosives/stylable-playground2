(self.webpackChunk_wixc3_stylable_playground_feature=self.webpackChunk_wixc3_stylable_playground_feature||[]).push([[2721],{78435:e=>{var r="undefined"!=typeof Element,t="function"==typeof Map,o="function"==typeof Set,n="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;function i(e,s){if(e===s)return!0;if(e&&s&&"object"==typeof e&&"object"==typeof s){if(e.constructor!==s.constructor)return!1;var a,c,l,d;if(Array.isArray(e)){if((a=e.length)!=s.length)return!1;for(c=a;0!=c--;)if(!i(e[c],s[c]))return!1;return!0}if(t&&e instanceof Map&&s instanceof Map){if(e.size!==s.size)return!1;for(d=e.entries();!(c=d.next()).done;)if(!s.has(c.value[0]))return!1;for(d=e.entries();!(c=d.next()).done;)if(!i(c.value[1],s.get(c.value[0])))return!1;return!0}if(o&&e instanceof Set&&s instanceof Set){if(e.size!==s.size)return!1;for(d=e.entries();!(c=d.next()).done;)if(!s.has(c.value[0]))return!1;return!0}if(n&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(s)){if((a=e.length)!=s.length)return!1;for(c=a;0!=c--;)if(e[c]!==s[c])return!1;return!0}if(e.constructor===RegExp)return e.source===s.source&&e.flags===s.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===s.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===s.toString();if((a=(l=Object.keys(e)).length)!==Object.keys(s).length)return!1;for(c=a;0!=c--;)if(!Object.prototype.hasOwnProperty.call(s,l[c]))return!1;if(r&&e instanceof Element)return!1;for(c=a;0!=c--;)if(("_owner"!==l[c]&&"__v"!==l[c]&&"__o"!==l[c]||!e.$$typeof)&&!i(e[l[c]],s[l[c]]))return!1;return!0}return e!=e&&s!=s}e.exports=function(e,r){try{return i(e,r)}catch(e){if((e.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw e}}},20329:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.universalCtrl=r.ACTIONS=r.MOUSE=r.KEYBOARD=void 0;const o=t(91570);r.KEYBOARD={UNIDENTIFIED:"Unidentified",ESCAPE:"Escape",MINUS:"Minus",DASH:"Minus",EQUALS:"Equal",BACK_SPACE:"Backspace",TAB:"Tab",ENTER:"Enter",RETURN:"Enter",SHIFT:"Shift",CONTROL:"Control",ALT:"Alt",PAUSE:"Pause",CAPS_LOCK:"CapsLock",SPACE:"Space",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",END:"End",HOME:"Home",LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown",PRINTSCREEN:"PrintScreen",INSERT:"Insert",DELETE:"Delete",0:"Digit0",1:"Digit1",2:"Digit2",3:"Digit3",4:"Digit4",5:"Digit5",6:"Digit6",7:"Digit7",8:"Digit8",9:"Digit9",A:"KeyA",B:"KeyB",C:"KeyC",D:"KeyD",E:"KeyE",F:"KeyF",G:"KeyG",H:"KeyH",I:"KeyI",J:"KeyJ",K:"KeyK",L:"KeyL",M:"KeyM",N:"KeyN",O:"KeyO",P:"KeyP",Q:"KeyQ",R:"KeyR",S:"KeyS",T:"KeyT",U:"KeyU",V:"KeyV",W:"KeyW",X:"KeyX",Y:"KeyY",Z:"KeyZ",META:"Meta",OS_LEFT:"OSLeft",CONTEXT_MENU:"ContextMenu",NUMPAD0:"Numpad0",NUMPAD1:"Numpad1",NUMPAD2:"Numpad2",NUMPAD3:"Numpad3",NUMPAD4:"Numpad4",NUMPAD5:"Numpad5",NUMPAD6:"Numpad6",NUMPAD7:"Numpad7",NUMPAD8:"Numpad8",NUMPAD9:"Numpad9",NUMPAD_MULTIPLY:"NumpadMultiply",NUMPAD_ADD:"NumpadAdd",NUMPAD_SUBTRACT:"NumpadSubtract",NUMPAD_DECIMAL:"NumpadDecimal",NUMPAD_DIVIDE:"NumpadDivide",NUMPAD_ENTER:"NumpadEnter",F1:"F1",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",F10:"F10",F11:"F11",F12:"F12",F13:"F13",F14:"F14",F15:"F15",F16:"F16",F17:"F17",F18:"F18",F19:"F19",F20:"F20",F21:"F21",F22:"F22",F23:"F23",F24:"F24",NUM_LOCK:"NumLock",SCROLL_LOCK:"ScrollLock",SEMICOLON:"Semicolon",COMMA:"Comma",PERIOD:"Period",SLASH:"Slash",BACK_QUOTE:"Backquote",OPEN_BRACKET:"BracketLeft",BACK_SLASH:"Backslash",CLOSE_BRACKET:"BracketRight",QUOTE:"Quote",UNIVERSAL_CONTROL:o.isMac?"Meta":"Control"},r.MOUSE={WHEEL_VERTICAL:"wheelVertical",WHEEL_HORIZONTAL:"wheelHorizontal"},r.ACTIONS={DELETE:"delete"},r.universalCtrl=o.isMac?r.KEYBOARD.META:r.KEYBOARD.CONTROL},90925:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});const o=t(5163);o.__exportStar(t(20329),r),o.__exportStar(t(81588),r),o.__exportStar(t(31287),r)},81588:(e,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ScopesService=void 0,r.ScopesService=class{constructor(){this.isolatedScope=!1}removeScope(e){this.scope===e&&(this.scope=void 0,this.isolatedScope=!1)}setScope(e,r={isIsolated:!1}){const{isIsolated:t}=r;this.scope=e,this.isolatedScope=null!=t&&t}getScope(){return this.scope}getIsolatedScope(){return this.isolatedScope}}},31287:(e,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},62202:(e,r,t)=>{e.exports=t(90925)},23575:(e,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SIMULATION_CANVAS_CLASS_NAME=r.ENVIRONMENT_PROPERTIES_KEYS=void 0,r.ENVIRONMENT_PROPERTIES_KEYS=["windowHeight","windowWidth","windowBackgroundColor","canvasHeight","canvasWidth","canvasBackgroundColor","canvasMargin","canvasPadding"],r.SIMULATION_CANVAS_CLASS_NAME="simulationCanvas"},32228:(e,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CompilationError=r.FormatError=void 0;class t extends Error{constructor(){super(...arguments),this.name="FormatError"}}r.FormatError=t;class o extends Error{constructor(){super(...arguments),this.name="CompilationError"}}r.CompilationError=o},37024:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.dependencyManipulator=void 0;const o=t(60814);r.dependencyManipulator={reducer:(e,r)=>({value:r.value,invertingChanges:[(0,o.fullChange)(e)]}),squasher:e=>[e[e.length-1]]}},47951:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});const o=t(5163);o.__exportStar(t(37024),r),o.__exportStar(t(65084),r),o.__exportStar(t(23575),r),o.__exportStar(t(32228),r)},65084:(e,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.compiledFileId=void 0,r.compiledFileId=(e,r=!1)=>({filePath:e,outputLang:"javascript",excludeEditingTransformers:r})},86656:(e,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.addReactToWindow=void 0,r.addReactToWindow=async function(e,r,t){const{resolvedRequest:o}=await e.resolveFromFile(r,"react");if("string"!=typeof o)throw new Error(`cannot resolve "react" for ${r}`);const{resolvedRequest:n}=await e.resolveFromFile(r,"react-dom");if("string"!=typeof n)throw new Error(`cannot resolve "react-dom" for ${r}`);window.React=t(o),window.ReactDOM=t(n)}},21759:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getBoardFromModule=void 0;const o=t(91570);r.getBoardFromModule=e=>{if(!(0,o.isRecord)(e))throw new Error("Couldn't get exports of the board file.");const r=e.default;if(!(0,o.isRecord)(r))throw new Error("File doesn't contain a board.");if(!r.name)throw new Error("Board name is missing.");if("function"!=typeof r.Board)throw new Error("Board render function is missing.");return r}},60829:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});const o=t(5163);o.__exportStar(t(86656),r),o.__exportStar(t(21759),r),o.__exportStar(t(64897),r),o.__exportStar(t(98139),r),o.__exportStar(t(23),r)},98139:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.loadGlobalSetup=r.getOrCreateStage=r.resolveGlobalSetupPath=r.createModuleSystem=r.registerToFileChanges=void 0;const o=t(73654),n=t(96435),i=t(93849),s=t(47951);r.registerToFileChanges=function(e,r,t){e.unsubscribeAll(!1);const o=e=>{for(const t of[...e.changed])t.getId().filePath&&(0,n.invalidateModule)(t.getId().filePath,r.requireCache);if(t){const e=t();e instanceof Promise&&e.catch(i.reportError)}};return e.subscribe(o),()=>e.unsubscribe(o)},r.createModuleSystem=function({injectedLibraries:e,loadModuleHook:r,readFileSync:t,resolveFrom:i,globals:s={}}){const a=(0,n.createBaseCjsModuleSystem)({dirname:o.win32.dirname,readFileSync:t,resolveFrom:i,globals:s,loadModuleHook:r});for(const[r,t]of e)a.requireCache.set(r,{filename:r,id:r,exports:t,children:[]});return a},r.resolveGlobalSetupPath=async function({globalSetupConfig:e,projectConfig:r,projectPath:t,resolver:n}){await r.ready;const i=r.isValid()?r.get(e):null;if(i){const e=o.win32.isAbsolute(t)&&!o.posix.isAbsolute(t)?o.win32.join(t,"package.json"):o.posix.join(t,"package.json"),{resolvedRequest:r}=await n.resolveFromFile(e,i);if(!r)throw new s.CompilationError(`global setup file doesn't exist at ${i}`);return r}return null},r.getOrCreateStage=function(e,r){const t=r.getStage();if(!t){const t=e.setupStage();return r.setStage(t),t}return t},r.loadGlobalSetup=function(e,r,t,o,n){if(e){const i=r.getResult(t,(0,s.compiledFileId)(e,n));(null==i?void 0:i.isValid())&&o(e)}}},23:(e,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},64897:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.WindowController=void 0;const o=t(23575);r.WindowController=class{constructor(){this.environmentProperties={},this.canvasIsEmptyListeners=new Set,this.generateStylesheet(),this.createBaseElement()}setStage(e){this.stage=e,this.stage.canvas.classList.add(o.SIMULATION_CANVAS_CLASS_NAME),this.observeCanvasIsEmpty()}getStage(){return this.stage}getStageDimensions(){return this.stage?{window:document.body.getBoundingClientRect().toJSON(),canvas:this.stage.canvas.getBoundingClientRect().toJSON()}:{}}isCanvasEmpty(){var e;return!(null===(e=this.stage)||void 0===e?void 0:e.canvas)||""===this.stage.canvas.innerHTML}setWindowInlineStyleRule(e,r){document.body.style.setProperty(e,r)}updateEnvironmentProperties(e,r=[]){var t,o;const n={};for(const t of r)n[t]=e[t];this.environmentProperties={...this.environmentProperties,...e,...n},null===(t=this.stage)||void 0===t||t.updateCanvas(this.environmentProperties),null===(o=this.stage)||void 0===o||o.updateWindow(this.environmentProperties)}createBaseElement(){const e=document.head.querySelector("base");if(!e||"_blank"!==e.target){const e=document.createElement("base");e.target="_blank",document.head.appendChild(e)}}generateStylesheet(){const e=`<style>\n            html {\n                height: 100%;\n            }\n\n            body {\n                height: 100%;\n                margin: 0;\n                box-sizing: border-box;\n                scrollbar-width: none;\n                -ms-overflow-style: none;\n                overflow: auto;\n                display: flex;\n            }\n\n            body::-webkit-scrollbar {\n                display: none;\n            }\n\n            .${o.SIMULATION_CANVAS_CLASS_NAME} {\n                position: relative;\n            }\n            </style>`;document.head.insertAdjacentHTML("beforeend",e)}addCanvasIsEmptyListener(e){this.canvasIsEmptyListeners.add(e)}removeCanvasIsEmptyListener(e){this.canvasIsEmptyListeners.delete(e)}observeCanvasIsEmpty(){var e;if(null===(e=this.stage)||void 0===e?void 0:e.canvas){let e=this.isCanvasEmpty();const r=new MutationObserver((()=>{var r;if(null===(r=this.stage)||void 0===r?void 0:r.canvas){const r=this.isCanvasEmpty();r!==e&&(e=r,this.canvasIsEmptyListeners.forEach((e=>e(r))))}}));r.observe(this.stage.canvas,{childList:!0})}}}},12535:(e,r,t)=>{e.exports=t(60829)},26427:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;const o=t(5163);var n=t(16894);Object.defineProperty(r,"default",{enumerable:!0,get:function(){return o.__importDefault(n).default}}),o.__exportStar(t(16894),r)},93673:(e,r,t)=>{e.exports=t(26427)},98066:(e,r,t)=>{e.exports=t(3092)},59320:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.simulationElementRects=r.simulationPreviewDataManager=r.EXCLUDE_EDITING_TRANSFOTMERS_QUERY_FLAG=r.previewEnv=void 0;const o=t(5163),n=t(93849),i=o.__importStar(t(32510)),s=t(5689),a=o.__importStar(t(93104)),c=o.__importDefault(t(25447)),l=o.__importDefault(t(93208)),d=o.__importDefault(t(1529)),u=o.__importStar(t(2206)),p=o.__importDefault(t(93673)),E=o.__importDefault(t(44479));r.previewEnv=new n.Environment("preview","iframe","multi",[a.codeExecutionRenderer]),r.EXCLUDE_EDITING_TRANSFOTMERS_QUERY_FLAG="excludeEditingTransformers";const m=n.Service.withType().defineEntity(r.previewEnv),v=(0,i.defineTwoWayResource)().defineEntity(s.mainEnv);r.simulationPreviewDataManager=(0,i.defineOneWayResource)().defineEntity(u.processingEnv),r.simulationElementRects=(0,i.defineOneWayResource)().defineEntity(r.previewEnv),r.default=new n.Feature({id:"simulationPreview",dependencies:[a.default.asEntity,n.COM.asEntity,l.default.asEntity,u.default.asEntity,c.default.asEntity,i.default.asEntity,p.default.asEntity,d.default.asEntity,E.default.asEntity],api:{simulationWindowController:m.allowRemoteAccess((0,n.declareComEmitter)("addCanvasIsEmptyListener","removeCanvasIsEmptyListener")),localSimulationWindowController:m,previewController:n.Service.withType().defineEntity(r.previewEnv).allowRemoteAccess((0,n.declareComEmitter)("subscribe","unsubscribe")),previewRenderers:n.MapSlot.withType().defineEntity(r.previewEnv),demoErrorManager:p.default.api.demoErrorManager.defineConsumer(r.previewEnv),consoleResourceManager:v,consoleResourceManagerPreview:v.defineConsumer(r.previewEnv),previewConfiguration:u.default.api.pluggableProjectConfig.entry({environmentVariables:{}},"previewConfiguration"),globalPreviewData:n.Slot.withType().defineEntity(u.processingEnv),simulationElementRects:r.simulationElementRects,simulationPreviewDataManager:r.simulationPreviewDataManager}})},23926:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});const o=t(5163),n=t(93849),i=o.__importDefault(t(78435)),s=t(60814),a=t(12535),c=t(98066),l=o.__importStar(t(59320)),d=t(80673),u=t(24100),p=t(30259),E=t(2206),m=t(20049),v=t(25173),f=t(98804),g=t(91570),y=t(21636);class h extends Error{constructor(){super(...arguments),this.name="FormatError"}}class w extends Error{constructor(){super(...arguments),this.name="CompilationError"}}l.default.setup(l.previewEnv,(({run:e,onDispose:r,consoleResourceManager:t,previewRenderers:o,simulationPreviewDataManager:_,simulationElementRects:S},{codeExecution:{windowController:M,createRenderer:C,resolver:R},simulationCapabilities:{demoErrorManager:P},COM:{communication:b},project:{pluggableProjectConfig:A}})=>{const N=window===window.parent,O=new URLSearchParams(window.parent.location.search.slice(1)).get(l.EXCLUDE_EDITING_TRANSFOTMERS_QUERY_FLAG),T=!!O&&"true"===O,D=A.consume({}),F=P.consume({}),I=t.consume({resourceConstructor:p.ConsoleResource});r((0,v.blockNativeSaveAs)());const L=D.get(E.PROJECT_CONFIG_NAME,l.previewEnv),x=S.provide({handler:{provide:()=>({value:{}})},resourceConstructor:s.JSONResource}),U={},j=x.get(U);r((()=>j.release(U)));const K=_.consume({resourceConstructor:s.JSONResource}).get(b.getEnvironmentId(),l.previewEnv),k=new u.SimulationPreviewController(K,o),B=b.getEnvironmentId();N||r((0,f.captureConsole)(I,B));const W=new m.UncaughtErrorHandler({demoErrorRM:F,consoleRM:I,previewEnvironmentId:B,isMainWindow:N}),H=k.getBoardPath(),V={async renderExport(){let e=!1;W.setBoardPath(H);const t={},o=F.get(H,t),n=N?null:I.get(B,t),l=new ResizeObserver((()=>{const e=M.getStageDimensions(),r=j.getLatest();(0,i.default)(r,e)||j.applyChange((0,s.fullChange)({canvas:e.canvas,window:e.window}))}));l.observe(document.body),r((()=>l.disconnect()));try{const t=await C({entries:["react","react-dom"],excludeEditingTransformers:T,onEntryChange:()=>i(),beforeRender:({canvas:e})=>{null==n||n.clear(),(0,c.clearDemoError)(o,c.DemoErrorType.FormatError),(0,c.clearDemoError)(o,c.DemoErrorType.CompilationError),(0,c.clearDemoError)(o,c.DemoErrorType.RuntimeError),null==n||n.sendMessage(d.CodeExecutionMessageType.previewRenderStart),l.observe(e)},ensureRenderable:e=>{try{return(0,a.getBoardFromModule)(e)}catch(e){throw new h((0,g.toError)(e).message)}},onModuleSystemReady:e=>(0,a.addReactToWindow)(R,H,e.requireModule).catch((e=>{throw new w((0,g.toError)(e).message)}))});r((()=>t.cleanup(H)));const i=async()=>{let r;await Promise.all([o.ready,null==n?void 0:n.ready,t.cleanup(H)]);try{({query:r}=await t.render(H)),e=!0}catch(r){e=!1,r instanceof h?(0,c.setDemoError)(o,c.DemoErrorType.FormatError,r.message):r instanceof w?(0,c.setDemoError)(o,c.DemoErrorType.CompilationError,r.message):(r instanceof Error&&(0,c.setDemoError)(o,c.DemoErrorType.RuntimeError,r.message),null==n||n.sendMessage(d.CodeExecutionMessageType.consoleError,(0,g.toError)(r).message||y.content.unknownRuntimeError))}finally{M.getStage()&&!e&&await t.cleanup(H)}return r},s=await i();s&&(0,a.registerToFileChanges)(s,t.moduleSystem,i),(0,c.clearDemoError)(o,c.DemoErrorType.RuntimeError)}catch(r){if(e=!1,r instanceof h)(0,c.setDemoError)(o,c.DemoErrorType.FormatError,r.message);else{if(!(r instanceof w))throw r instanceof Error&&(0,c.setDemoError)(o,c.DemoErrorType.RuntimeError,r.message),r;(0,c.setDemoError)(o,c.DemoErrorType.CompilationError,r.message)}}}},G="compiled";return o.register(G,V),e((async()=>{const e={},r=F.get(H,e);await Promise.all([L.ready,r.ready]),k.setRenderer(G),k.renderSimulation().catch((e=>{(0,c.setDemoError)(r,c.DemoErrorType.CompilationError,(0,g.stringifyErrorStack)(e)),(0,n.reportError)(e)})).finally((()=>r.release(e)))})),{simulationElementRects:x,localSimulationWindowController:M,simulationWindowController:M,previewController:k,demoErrorManager:F,simulationPreviewData:K,consoleResourceManagerPreview:I}}))},25173:(e,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.blockNativeSaveAs=void 0,r.blockNativeSaveAs=function(){const e=e=>(e=>(e.ctrlKey||e.metaKey)&&"s"===e.key)(e)&&e.preventDefault();return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}},98804:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.captureConsole=void 0;const o=t(91832),n=t(91570),i=e=>{var r;return null!==(r=e.ready)&&void 0!==r?r:Promise.resolve()};function s(e){if("string"==typeof e)return e;if(e instanceof Error)return(0,n.stringifyErrorStack)(e);try{return JSON.stringify(e,null,4)}catch(r){return String(e)}}function a(e){return e.map(s).join(" ")}r.captureConsole=function(e,r){const{log:t,error:s,info:c,warn:l}=console,d={},u=e.get(r,d);return console.log=(...e)=>{i(u).then((()=>{u.sendMessage(o.CodeExecutionMessageType.consoleLog,a(e))})).catch(n.reportError),t(...e)},console.error=(...e)=>{i(u).then((()=>{u.sendMessage(o.CodeExecutionMessageType.consoleError,a(e))})).catch(n.reportError),s(...e)},console.info=(...e)=>{i(u).then((()=>{u.sendMessage(o.CodeExecutionMessageType.consoleInfo,a(e))})).catch(n.reportError),c(...e)},console.warn=(...e)=>{i(u).then((()=>{u.sendMessage(o.CodeExecutionMessageType.consoleWarn,a(e))})).catch(n.reportError),l(...e)},()=>{console.log=t,console.error=s,console.info=c,console.warn=l,u.release(d)}}},21636:(e,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.content=void 0,r.content={unknownRuntimeError:"Something went wrong while rendering your component. Check the console for more information."}},30259:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ConsoleResource=void 0;const o=t(60814);class n extends o.Resource{sendMessage(e,r,t){this.applyChange({kind:"add",path:["messages"],value:{type:e,message:r,additionalInfo:t}})}clear(){this.applyChange({kind:"replace",path:["messages"],value:[]})}}r.ConsoleResource=n},24100:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SimulationPreviewController=void 0;const o=t(93849);r.SimulationPreviewController=class{constructor(e,r){this.previewData=e,this.renderers=r,this.events=new o.EventEmitter;const t=new URLSearchParams(window.location.search).get("boardPath");if(!t)throw new Error("cannot init preview without providing boardPath");this.boardPath=t,e.subscribe((()=>{this.renderSimulation().catch(o.reportError)}))}getBoardPath(){return this.boardPath}setRenderer(e){this.rendererType=e}async renderSimulation(){this.events.emit("event",{type:"beforeRender"}),this.previewData.isReady()||await this.previewData.ready;try{const e=this.renderers.get(this.rendererType);if(!e)throw new Error(`Unable to find renderer ${this.rendererType} for the preview`);await e.renderExport()}finally{this.events.emit("event",{type:"afterRender"})}}subscribe(e){this.events.subscribe("event",e)}unsubscribe(e){this.events.unsubscribe("event",e)}}},20049:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.UncaughtErrorHandler=void 0;const o=t(91570),n=t(98066),i=t(91832),s=t(21636);r.UncaughtErrorHandler=class{constructor(e){this.handleErrorEvent=e=>{const r=(0,o.stringifyErrorStack)(e.error)||s.content.unknownRuntimeError;this.addErrorToSimulation(r).catch(o.noop)},this.handlePromiseRejectionEvent=e=>{const r=(0,o.toError)(e.reason).message||s.content.unknownRuntimeError;this.addErrorToSimulation(r).catch(o.noop),this.addErrorToConsoleResourceIfNeeded(r).catch(o.noop)},this.demoErrorRM=e.demoErrorRM,this.consoleRM=e.consoleRM,this.previewEnvironmentId=e.previewEnvironmentId,this.isMainWindow=e.isMainWindow,window.addEventListener("error",this.handleErrorEvent),window.addEventListener("unhandledrejection",this.handlePromiseRejectionEvent)}setBoardPath(e){this.boardPath=e}async addErrorToSimulation(e){if(this.boardPath){const r=await this.demoErrorRM.getReady(this.boardPath);(0,n.setDemoError)(r,n.DemoErrorType.RuntimeError,e)}}async addErrorToConsoleResourceIfNeeded(e){this.isMainWindow||(await this.consoleRM.getReady(this.previewEnvironmentId)).sendMessage(i.CodeExecutionMessageType.consoleError,e)}}},80673:(e,r)=>{"use strict";var t;Object.defineProperty(r,"__esModule",{value:!0}),r.ENVIRONMENT_PROPERTIES_KEYS=r.CodeExecutionMessageType=r.SIMULATION_CANVAS_CLASS_NAME=void 0,r.SIMULATION_CANVAS_CLASS_NAME="simulationCanvas",(t=r.CodeExecutionMessageType||(r.CodeExecutionMessageType={}))[t.consoleError=0]="consoleError",t[t.consoleWarn=1]="consoleWarn",t[t.consoleLog=2]="consoleLog",t[t.consoleInfo=3]="consoleInfo",t[t.previewRenderStart=4]="previewRenderStart",r.ENVIRONMENT_PROPERTIES_KEYS=["windowHeight","windowWidth","windowBackgroundColor","canvasHeight","canvasWidth","canvasBackgroundColor","canvasMargin","canvasPadding"]},91832:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});const o=t(5163);o.__exportStar(t(31705),r),o.__exportStar(t(80673),r)},31705:(e,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})}}]);
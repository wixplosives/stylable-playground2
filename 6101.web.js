(self.webpackChunk_wixc3_stylable_playground_feature=self.webpackChunk_wixc3_stylable_playground_feature||[]).push([[6101],{56639:(e,t,s)=>{"use strict";s.r(t),s.d(t,{classes:()=>a,cssStates:()=>l,keyframes:()=>i,namespace:()=>r,st:()=>u,stVars:()=>n,style:()=>c,vars:()=>o});const r="o52",a={root:"s199"},i={},n={},o={},l=s.stc.bind(null,r),c=s.sts.bind(null,r),u=c},45919:(e,t,s)=>{"use strict";s.r(t),s.d(t,{classes:()=>a,cssStates:()=>l,keyframes:()=>i,namespace:()=>r,st:()=>u,stVars:()=>n,style:()=>c,vars:()=>o});const r="o42",a={root:"s22",icon:"s184",title:"s185",description:"s186"},i={},n={},o={},l=s.stc.bind(null,r),c=s.sts.bind(null,r),u=c},83659:(e,t,s)=>{"use strict";s.r(t),s.d(t,{classes:()=>a,cssStates:()=>l,keyframes:()=>i,namespace:()=>r,st:()=>u,stVars:()=>n,style:()=>c,vars:()=>o});const r="o7",a={root:"s20",fileTree:"s44",fileTreeItem:"s21",node:"s45"},i={},n={},o={},l=s.stc.bind(null,r),c=s.sts.bind(null,r),u=c},45894:(e,t,s)=>{"use strict";s.r(t),s.d(t,{classes:()=>a,cssStates:()=>l,keyframes:()=>i,namespace:()=>r,st:()=>u,stVars:()=>n,style:()=>c,vars:()=>o});const r="o53",a={root:"s205"},i={},n={},o={},l=s.stc.bind(null,r),c=s.sts.bind(null,r),u=c},82500:(e,t,s)=>{"use strict";s.r(t),s.d(t,{classes:()=>a,cssStates:()=>l,keyframes:()=>i,namespace:()=>r,st:()=>u,stVars:()=>n,style:()=>c,vars:()=>o});const r="o117",a={root:"s200",treeItemNode:"s366",treeItemIcon:"s203",treeIcon:"s202",treeItemContent:"s367",treeItemTitle:"s368",treeItemText:"s369",treeItemInput:"s370",treeItemTextSearchHighlight:"s204",decorationIcons:"s371",expandIcon:"s201"},i={},n={iconSize:"18px"},o={indentValue:"--filetreeitem3709237628-indentValue",indent:"--filetreeitem3709237628-indent",file:"--filetreeitem3709237628-file"},l=s.stc.bind(null,r),c=s.sts.bind(null,r),u=c},77102:(e,t,s)=>{"use strict";s.r(t),s.d(t,{classes:()=>a,cssStates:()=>l,keyframes:()=>i,namespace:()=>r,st:()=>u,stVars:()=>n,style:()=>c,vars:()=>o});const r="o118",a={root:"s372",input:"s373",closeIcon:"s374"},i={},n={},o={},l=s.stc.bind(null,r),c=s.sts.bind(null,r),u=c},43691:(e,t,s)=>{"use strict";s.r(t),s.d(t,{classes:()=>a,cssStates:()=>l,keyframes:()=>i,namespace:()=>r,st:()=>u,stVars:()=>n,style:()=>c,vars:()=>o});const r="o21",a={root:"s92",treeViewWrapper:"s95",treeViewBackground:"s93",treeViewSearchContainer:"s94",fileTreeSearch:"s96"},i={},n={},o={},l=s.stc.bind(null,r),c=s.sts.bind(null,r),u=c},83135:(e,t,s)=>{e.exports=s(77467)},43345:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultFileTreeConfig=void 0;const r=s(5163),a=s(93849),i=r.__importDefault(s(60456)),n=r.__importDefault(s(2206)),o=r.__importDefault(s(93208)),l=s(5689),c=r.__importDefault(s(95561)),u=r.__importDefault(s(1529));t.defaultFileTreeConfig={openedItems:[]},t.default=new a.Feature({id:"projectUI",dependencies:[n.default.asEntity,o.default.asEntity,c.default.asEntity,u.default.asEntity,i.default.asEntity],api:{slotsProcessor:a.Service.withType().defineEntity(l.mainEnv),fileTreeStore:a.Service.withType().defineEntity(l.mainEnv),fileTreeConfig:new a.Config(t.defaultFileTreeConfig),openFilesService:a.Service.withType().defineEntity(l.mainEnv),openFilesConfig:new a.Config({targetAreaGroup:"content",openFiles:[]}),openFileSlot:a.MapSlot.withType().defineEntity(l.mainEnv),contextMenuSlot:a.Slot.withType().defineEntity(l.mainEnv),fileChildrenSlot:a.Slot.withType().defineEntity(l.mainEnv),decorationIconsSlot:a.Slot.withType().defineEntity(l.mainEnv),copyPasteManager:a.Service.withType().defineEntity(l.mainEnv),fileStylingSlot:a.OrderedSlot.withType().defineEntity(l.mainEnv),fileStylingConfig:new a.Config([]),fileIconSlot:a.OrderedSlot.withType().defineEntity(l.mainEnv),fileIconService:a.Service.withType().defineEntity(l.mainEnv),renderFileIconConfig:new a.Config([["extension",["default"]]])}})},46050:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NotFoundFallback=void 0;const r=s(5163).__importStar(s(87363)),a=s(69202),i=s(45919);s(56639);const n=s(9029);t.NotFoundFallback=(0,r.memo)((({title:e,description:t,className:s})=>{const{analytics:{analyticsService:{track:o}}}=(0,n.useMainContext)();return(0,r.useEffect)((()=>{o(e)}),[e,o]),r.default.createElement("div",{className:(0,i.style)(i.classes.root,s)},r.default.createElement(a.PreviewIcon,{className:i.classes.icon}),r.default.createElement("div",{className:i.classes.title},e),t&&r.default.createElement("div",{className:i.classes.description},t))})),t.NotFoundFallback.displayName="NotFoundFallback"},12191:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileExplorer=void 0;const r=s(5163),a=r.__importStar(s(87363)),i=s(73654),n=r.__importDefault(s(72321)),o=s(69202),l=s(83135),c=s(70268),u=s(69144),d=s(83659),h=s(24489);t.FileExplorer=(0,a.memo)((({className:e,onFileRename:t,getProjectName:s,slotsProcessor:r,onNodeMove:p,onSelect:f,copyPasteManager:y,fileTreeStore:m})=>{const g=(0,a.useRef)(null),S=(0,a.useRef)(null),b=(0,o.useAsync)(s,void 0,[s]),v=(0,a.useRef)(""),[I,_]=(0,a.useState)(!1),[P,E]=(0,a.useState)(m.fileSystemTree),[C,T]=(0,a.useState)(m.treeViewState);n.default.mark("file-explorer-render");const w=(0,c.useVisibility)(),F=(0,a.useRef)(),D=(0,a.useCallback)((e=>{F.current=e,w&&(E(e.fileSystemTree),T(e.treeViewState))}),[w]);(0,a.useEffect)((()=>{w&&F.current&&(E(F.current.fileSystemTree),T(F.current.treeViewState))}),[w]),(0,a.useEffect)((()=>(m.subscribe(D),()=>m.unsubscribe(D))),[m,D]);const{filePath:M}=(0,l.useQueryParams)(["filePath"]),N=(0,a.useCallback)((e=>{m.updateTreeViewState(e),T(m.treeViewState)}),[m]),R=(0,a.useCallback)((e=>{const t=new Set([i.sep,...m.treeViewState.toggledItemsIds,...(0,u.getPathsOfFilePath)(e,i.sep)]);N({toggledItemsIds:[...t],selectionStartId:e,currentNavigatableItemId:e,selectedIds:[e],disabledIds:null,typeAheadValue:""})}),[m.treeViewState.toggledItemsIds,N]);(0,a.useEffect)((()=>{"string"==typeof M&&v.current!==M&&(v.current=M,R(v.current))}),[M,R]);const x=(0,a.useCallback)((async(e,t,s=!1)=>{const r=(0,o.isCtrlKeyPressed)(e);switch(!0){case"Enter"===e.key&&!s:f(t);break;case"c"===e.key&&r:y.setCopyPath(t);break;case"v"===e.key&&r:await y.pasteCopied(t)}}),[y,f]),O=(0,a.useCallback)((e=>{_(void 0===e?!I:e)}),[I]),k=(0,a.useCallback)((async e=>{await m.loadDirectory(e)}),[m]);return a.default.createElement("div",{className:(0,d.style)(d.classes.root,e),ref:g},a.default.createElement(h.FileTree,{projectName:b,selectedFilePath:"string"==typeof M?M:"",onFileRename:t,slotsProcessor:r,className:d.classes.fileTree,fileTreeItemClassName:d.classes.fileTreeItem,tree:P,getFileStyle:r.getFileStyle,getDecorationIcons:r.getDecorationIcons,fileIconRenderer:r.fileIconRenderer,handleNodeMove:p,onFileClick:f,onItemKeyDown:x,updateTreeViewState:N,treeViewState:C,showSearch:!1,toggleSearch:O,onLoadDirectory:k,rootElementRef:S}),a.default.createElement(c.ScrollBar,{orientation:c.Orientation.Vertical,scrollViewRef:S}))})),t.FileExplorer.displayName="FileExplorer"},1412:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileTreeItem=void 0;const r=s(5163),a=r.__importStar(s(87363)),i=r.__importDefault(s(75300)),n=s(30896),o=s(81177),l=s(69202),c=s(15707),u=s(70268),d=s(32623),h=s(6045),p=s(82500);s(45894);const f=e=>e.stopPropagation(),y=e=>e.preventDefault(),m=(0,c.dropPanelOpenerCreateContextMenuBehaviours)();t.FileTreeItem=function(e){const{dataItemId:t,dataItem:s,isSelected:r,isCurrent:c,level:g,isExpanded:S,className:b,onFileDrop:v,fileActions:I=[],getFileStyle:_,fileIconRenderer:P,getDecorationIcons:E,onFileRename:C,cancelRename:T,onKeyDown:w,onFileClick:F,isRenaming:D,searchString:M,treeView:N,onLoadDirectory:R,hasChildren:x,relativePath:O}=e,[k,V]=(0,a.useState)(s.label),L=(0,a.useRef)(null),A=(0,a.useRef)(null);(0,a.useEffect)((()=>{V(s.label)}),[s.label]),(0,a.useEffect)((()=>{D&&L.current&&L.current.select()}),[D]),(0,a.useEffect)((()=>{r&&A.current&&(0,i.default)(A.current,{scrollMode:"if-needed",block:"center"})}),[r]);const j=(0,a.useCallback)((({data:{action:e}})=>{e&&e(s.path)}),[s.path]),U=(0,a.useCallback)((e=>{e!==s.label&&e?(V(e),C(s.path,e)):T()}),[s.label,s.path,C,T]),B=(0,a.useCallback)((e=>U(e.target.value)),[U]),$=(0,a.useCallback)((e=>{const{value:t}=e.target;switch(e.key){case"Enter":e.stopPropagation(),U(t);break;case"Escape":T()}}),[U,T]),K=(0,a.useMemo)((()=>{if(D)return a.default.createElement("input",{onBlur:B,ref:L,className:p.classes.treeItemInput,type:"text",defaultValue:k,onClick:f,onKeyDown:$});if(M.length){const e=k.toLowerCase().indexOf(M.toLowerCase());if(-1!==e){const t=k.substr(e,M.length);return a.default.createElement("span",null,k.substr(0,e),a.default.createElement("span",{className:p.classes.treeItemTextSearchHighlight},t),k.substr(e+t.length))}}return a.default.createElement("span",{className:p.classes.treeItemText},k)}),[M,D,k,B,$]),W=(0,a.useMemo)((()=>{switch(s.status){case h.LoadingStatus.loading:return"*";case h.LoadingStatus.unloadable:return"";default:return a.default.createElement(l.ChevronDownWixUiIcon,{className:(0,p.style)(p.classes.expandIcon,{expanded:S})})}}),[s.status,S]),H=(0,a.useCallback)((()=>{N.updateState((e=>{e.toggleExpanded(t)}))}),[N,t]),G=(0,a.useCallback)((e=>{w&&w(e,s.path,(0,d.isDir)(s))}),[w,s]),X=(0,a.useCallback)((()=>{s.status!==h.LoadingStatus.loaded&&(0,d.isDir)(s)&&R(s.path),H()}),[s,R,H]),z=(0,a.useCallback)((()=>{(0,d.isDir)(s)?H():(0,d.isFile)(s)?F?F(s.path):x&&H():s.action&&s.action()}),[s,H,F,x]),Y=(0,a.useCallback)((e=>{(0,d.isFsNode)(s)?e.dataTransfer.setData("text/plain",s.path):e.preventDefault()}),[s]),J=(0,a.useMemo)((()=>{const e=[(0,p.style)(p.classes.treeItemIcon,{hasChildren:x})];return s.status===h.LoadingStatus.loaded&&e.push("loaded"),e.join(" ")}),[x,s.status]),q=(0,a.useMemo)((()=>({[p.vars.indent]:g+1,[p.vars.file]:(0,d.isDir)(s)?0:1})),[g,s]),Q=(0,a.useMemo)((()=>P({...s,expanded:S})),[P,s,S]),Z=(0,a.useMemo)((()=>_(s)),[_,s]),ee=(0,a.useMemo)((()=>E(s).join(",")),[E,s]);return a.default.createElement(n.TreeViewItemRoot,{className:(0,p.style)(p.classes.root,{selected:r,current:c,expanded:S,loaded:s.status===h.LoadingStatus.loaded},b),onKeyDown:G,style:q,draggable:!0,onDragStart:Y,onDragOver:y,onDrop:v,"data-file-path":s.path},a.default.createElement(u.Tooltip,{content:O(s.path)},a.default.createElement(u.ActionMenu,{onItemSelect:j,behaviours:m,positioningOptions:{boundary:(0,o.positioningAreaShrink)("window",{top:10,bottom:10,left:10,right:10}),sourceAnchor:o.PositioningAnchor.TopLeft,targetAnchor:o.PositioningAnchor.BottomRight,flipOnVerticalOverflow:!0},menuItems:I},a.default.createElement("div",{onClick:z,className:p.classes.treeItemNode,ref:A},a.default.createElement("i",{className:J,"aria-expanded":S,onClick:X},W),a.default.createElement("div",{className:p.classes.treeItemContent,style:Z,"data-hook":"item-content"},a.default.createElement("div",{className:p.classes.treeItemTitle},a.default.createElement("span",{className:p.classes.treeIcon},Q),K),a.default.createElement("div",{className:p.classes.decorationIcons},ee))))))}},17247:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileTreeSearch=void 0;const r=s(5163).__importStar(s(87363)),a=s(38819),i=s(77102),n=s(69202);t.FileTreeSearch=function(e){const{treeViewRef:t,treeViewSearchText:s,onChange:o,className:l}=e,c=(0,r.useRef)(null),u=(0,r.useCallback)((()=>{const e=c.current;e&&e.focus()}),[]),d=(0,r.useCallback)((()=>{o(""),u()}),[o,u]),h=(0,r.useCallback)((e=>{o(e.target.value)}),[o]),p=(0,r.useCallback)((()=>t),[t]);return r.default.createElement("div",{className:(0,i.style)(i.classes.root,l)},r.default.createElement(a.ListViewNavigationInputBehaviour,{listViewSelector:p},r.default.createElement("input",{placeholder:"search",ref:c,autoFocus:!0,type:"text",value:s,onChange:h,className:(0,i.style)(i.classes.input,{error:!1})})),r.default.createElement(n.XIcon,{onClick:d,className:i.classes.closeIcon}))}},24489:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileTree=void 0;const r=s(5163).__importStar(s(87363)),a=s(73654),i=s(7268),n=s(81177),o=s(30896),l=s(38819),c=s(69202),u=s(91570),d=s(32623),h=s(17247),p=s(1412),f=s(43691),y=s(70268),m=s(15707),g=s(6045),S=s(9029),b=(0,m.dropPanelOpenerCreateContextMenuBehaviours)();function v(e,t){return!!e.length&&t.dataItem.treeNodeDataItem.label.toLowerCase().includes(e.toLowerCase())}function I(e){e.preventDefault()}function _(e,t){return(0,d.isDir)(e.dataItem)&&(0,d.isFile)(t.dataItem)?-1:(0,d.isFile)(e.dataItem)&&(0,d.isDir)(t.dataItem)||e.dataItem.path>=t.dataItem.path?1:-1}function P(e=new Map){return[...e.values()].map((e=>{const{dataItem:t}=e;return{id:t.path,dataItem:t,isSelectable:!0,typeAheadText:t.label,children:P(e.children)}})).sort(_)}t.FileTree=function(e){const{fileTreeItemClassName:t,projectName:s,tree:d,getFileStyle:m,getDecorationIcons:_,fileIconRenderer:E,onFileClick:C,showSearch:T,className:w,onItemKeyDown:F,onLoadDirectory:D,rootElementRef:M={current:null},selectedFilePath:N,slotsProcessor:R,toggleSearch:x,handleNodeMove:O,treeViewState:k,updateTreeViewState:V,onFileRename:L}=e,[A,j]=(0,r.useState)(""),[U,B]=(0,r.useState)(""),$=(0,r.useMemo)((()=>function(e,t){if(void 0!==t){const s=new Map;return e.dataItem.label=t||"/",s.set(t,e),P(s)}return[]}(d,s)),[d,s]),K=d.dataItem.path,{relative:W,sep:H}=(0,u.isWindowsStyleAbsolutePath)(K)?a.win32:a.posix,G=e=>W(K,e)||H,{analytics:{analyticsService:{track:X}}}=(0,S.useMainContext)(),z=(0,r.useCallback)((e=>{(0,u.isTypeScriptFile)(e)?X("opened file node - ts/tsx"):X("opened file node - not code"),C&&C(e)}),[X,C]),Y=(0,r.useCallback)(((e,t)=>{B(""),t&&L&&L(e,t)}),[L]),J=(0,r.useCallback)((()=>B("")),[]),q=o.TreeViewSlots.renderItem().provide(p.FileTreeItem,{props:e=>({...e,isSelected:N===e.dataItem.path,fileActions:se(e.dataItem),isRenaming:e.dataItem.path===U,className:t,searchString:A,getFileStyle:m,getDecorationIcons:_,onFileRename:Y,fileIconRenderer:E,onFileDrop:te,onFileClick:z,onKeyDown:F,onLoadDirectory:D,cancelRename:J,relativePath:G})}),Q=(0,r.useCallback)((({data:{action:e}})=>{e&&e(d.dataItem.path)}),[d.dataItem.path]),Z=(0,r.useCallback)((e=>{if(!e.length){const e=ie.current;x(!1),e&&e.focus()}j(e)}),[x]),ee=(0,r.useCallback)((e=>{0===A.length?1===e.key.length&&x(!0):"Escape"===e.key&&Z("")}),[A,x,Z]),te=(0,r.useCallback)((async e=>{const t=e.dataTransfer.getData("text"),s=e.target.closest("[data-file-path]");if(t&&s){const e=s.dataset.filePath||"/";await O(t,e)}}),[O]),se=(0,r.useCallback)((e=>{const t={id:"rename",section:g.ContextMenuSections.Main,icon:r.default.createElement(c.RenameSmallIcon,null),label:g.fileActions.rename,action:e=>B(e),test:()=>!0},s={data:{item:"divider",divider:!0},preventMenuDismissing:u.noop},a=[...R.getContextActions(e),t].sort(((e,t)=>{const{section:s=g.ContextMenuSections.Main}=e,{section:r=g.ContextMenuSections.Main}=t;return s-r}));return a.reduce(((e,t,r)=>{e.push({data:{item:t.label,action:t.action,dataId:t.id,icon:t.icon},preventMenuDismissing:u.noop});const i=a[r+1];return i&&i.section!==t.section&&e.push(s),e}),[])}),[R]),re=(0,r.useMemo)((()=>se(d.dataItem)),[d.dataItem,se]),ae=(0,r.useRef)(null),ie=(0,r.useRef)(null),ne=[ie,M];return r.default.createElement("div",{tabIndex:1,ref:(0,i.createRefsUnion)(ne),onKeyDown:ee,className:(0,f.style)(f.classes.root,w)},r.default.createElement("div",{className:f.classes.treeViewWrapper},T?r.default.createElement("div",{className:f.classes.treeViewSearchContainer},r.default.createElement(h.FileTreeSearch,{className:f.classes.fileTreeSearch,treeViewRef:ae,treeViewSearchText:A,onChange:Z})):null,r.default.createElement(o.TreeView,{navigationScopeReducingBySearchStrategy:l.NavigationScopeReducingBySearchStrategy.ReduceOnlyWhenHasMultipleMatches,ref:ae,treeViewState:k,renderItem:q,onChange:V,selectionType:l.ListViewSelectionType.Multiple,typeAheadStrategy:l.DefaultTypeAheadStrategy,searchText:A,searchMatchingFunction:v,toggledTreeViewItemState:o.ToggledTreeViewItemState.Expanded},$)),r.default.createElement(y.ActionMenu,{className:f.classes.treeViewBackground,behaviours:b,menuItems:re,positioningOptions:{boundary:(0,n.positioningAreaShrink)("window",{top:10,bottom:10,left:10,right:10}),sourceAnchor:n.PositioningAnchor.TopLeft,targetAnchor:n.PositioningAnchor.BottomRight,flipOnVerticalOverflow:!0},onItemSelect:Q},r.default.createElement("div",{onDrop:te,onDragOver:I,"data-file-path":""})))}},88706:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(5163);r.__exportStar(s(12191),t),r.__exportStar(s(24489),t),r.__exportStar(s(1412),t),r.__exportStar(s(17247),t),r.__exportStar(s(46050),t)},48264:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useOpenFile=t.useProjectPath=t.useFileContent=void 0;const r=s(87363),a=s(70268),i=s(9029),n=s(27941),o=s(69202),l=s(67079);t.useFileContent=function(e,t){const s=(0,a.useVisibility)();return(0,n.useResourceValue)({resourceManager:e,resourceId:t,enabled:s})},t.useProjectPath=function(){const{project:{projectService:e}}=(0,i.useMainContext)();return(0,o.useAsync)((()=>e.getProjectPath()),void 0,[e])},t.useOpenFile=()=>{const{projectUI:{openFileSlot:e}}=(0,i.useMainContext)();return(0,r.useMemo)((()=>(0,l.createOpenFile)(e)),[e])}},82616:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(5163);r.__exportStar(s(48264),t),r.__exportStar(s(88706),t),r.__exportStar(s(52398),t),r.__exportStar(s(56404),t),r.__exportStar(s(43271),t),r.__exportStar(s(32623),t),r.__exportStar(s(97908),t)},32229:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initDefaultIconPlugin=t.DEFAULT_ICON_NAME=void 0;const r=s(5163).__importStar(s(87363)),a=s(69202),i=s(46313),n=s(32623);t.DEFAULT_ICON_NAME="default",t.initDefaultIconPlugin=()=>({name:t.DEFAULT_ICON_NAME,render:function(e){const t=(0,r.useContext)(i.FileIconContext);if((0,n.isFile)(e)){const s=t(e.path);return r.default.createElement(s,null)}return(0,n.isDir)(e)?r.default.createElement(a.FolderSmallIcon,null):null}})},52398:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(5163);r.__exportStar(s(613),t),r.__exportStar(s(25945),t),r.__exportStar(s(32229),t),r.__exportStar(s(21344),t)},613:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initModifiedIconPlugin=t.MODIFIED_ICON_NAME=void 0;const r=s(21344),a=s(32623);t.MODIFIED_ICON_NAME="modified",t.initModifiedIconPlugin=e=>({name:t.MODIFIED_ICON_NAME,render:t=>(0,a.isFile)(t)&&(0,r.isChanged)(e,t.path)?"M":null})},25945:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initModifiedStylePlugin=t.MODIFIED_STYLER_NAME=void 0;const r=s(21344),a=s(32623);t.MODIFIED_STYLER_NAME="modified",t.initModifiedStylePlugin=e=>({name:t.MODIFIED_STYLER_NAME,getStyle:t=>(0,a.isFile)(t)&&(0,r.isChanged)(e,t.path)?{color:"#E2C08D"}:{}})},21344:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isChanged=void 0,t.isChanged=(e,t)=>!!e.isOpen(t)&&e.get(t).isChanged()},52680:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CopyPasteManager=void 0;const r=s(73654),a=s(91570);t.CopyPasteManager=class{constructor(e){this.projectService=e,this.copySource={path:"",cut:!1}}setCopyPath(e,t){this.copySource={path:e,cut:!!t}}isPasteAvailable(){return""!==this.copySource.path}async pasteCopied(e){if(!this.copySource||!await this.projectService.entityExists(this.copySource.path))return;const t=r.win32.basename(this.copySource.path),s=await this.projectService.isDirectory(e)?e:r.win32.dirname(e),i=(0,a.isWindowsStyleAbsolutePath)(s)?r.win32.join(s,t):r.posix.join(s,t);return this.copySource.cut?this.projectService.moveEntity(this.copySource.path,r.win32.dirname(i)):this.projectService.copy(this.copySource.path,i)}}},46313:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileIconContext=void 0;const r=s(5163).__importDefault(s(87363)),a=s(27968);t.FileIconContext=r.default.createContext((()=>a.DefaultIcon))},56404:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(5163);r.__exportStar(s(52680),t),r.__exportStar(s(95596),t),r.__exportStar(s(51007),t)},95596:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpenFilesService=void 0;const r=s(5163).__importDefault(s(87363)),a=s(73654),i=s(91570);t.OpenFilesService=class{constructor(e,t,s){this.targetAreaGroup=e,this.gui=t,this.FileIconService=s,this.onGuiChange=e=>{const t=e.changeLog;for(const e of t)switch(e.type){case"openPanel":case"closePanel":case"setActiveTab":case"moveToArea":this.onPanelChangeMng.notify(e)}};const{subscribe:r,unsubscribe:a,internals:n}=(0,i.setupSubscribers)();this.onPanelChangeMng=n,this.onPanelChange={subscribe:r,unsubscribe:a},this.gui.subscribe(this.onGuiChange)}destroy(){this.gui.unsubscribe(this.onGuiChange)}openFile({props:e,panelFactoryType:t}){this.openPanel(this.getPanelId(e.filePath,t),e,t)}renameFileTab({oldFileName:e,props:t,panelFactoryType:s}){var i;const n=this.getPanelId(e,s),o=this.getPanelId(t.filePath,s),l=null===(i=this.FileIconService)||void 0===i?void 0:i.getFileIconByFilePath(t.filePath),c={id:o,title:a.win32.basename(t.filePath),icon:l&&r.default.createElement(l,null),panelProps:{filePath:t.filePath}};this.gui.getOpenPanels().find((e=>e.id===n))&&this.gui.replacePanel({oldPanelId:n,newPanelConfig:c})}getPanelId(e,t){const s=this.getExistingIds(e,t);return s.length?s[0]:this.getNewId(e,t,s)}openFileInNewPanel({props:e,panelFactoryType:t}){const s=this.getExistingIds(e.filePath,t),r=this.getNewId(e.filePath,t,s);this.openPanel(r,e,t)}openPanel(e,t,s){var i;const n=null===(i=this.FileIconService)||void 0===i?void 0:i.getFileIconByFilePath(t.filePath);this.gui.openPanel(e,{icon:n&&r.default.createElement(n,null),title:a.win32.basename(t.filePath),panelType:s,panelProps:t},this.targetAreaGroup)}generatePanelId(e,t,s){return`file://${t}@${e}#${s}`}getNewId(e,t,s){let r=0,a=this.generatePanelId(e,t,r);for(;s.includes(a);)r++,a=this.generatePanelId(e,t,r);return a}getExistingIds(e,t){const{openPanels:s}=this.gui.getState();return s.filter((({panelType:s,panelProps:r})=>{const a=r.filePath;return s===t&&a===e})).map((({id:e})=>e))}}},51007:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SlotsProcessor=void 0;const r=s(5163).__importDefault(s(87363)),a=s(69144),i=s(83135),n=s(32623);t.SlotsProcessor=class{constructor(e,t,s,a,i){this.contextSlotEntries=e,this.openFileSlotEntries=t,this.fileStylingSlot=s,this.decorationIconsSlot=a,this.FileIconService=i,this.getFileStyle=e=>{if((0,n.isFsNode)(e))try{return[...this.fileStylingSlot].reduce(((t,s)=>({...t,...s.getStyle(e)})),{})}catch(t){return console.warn(`File Style Slot error for ${e.path}`,t),[]}return{}},this.getDecorationIcons=e=>{if((0,n.isFsNode)(e))try{return[...this.decorationIconsSlot].map((t=>t.render(e))).filter((e=>!!e))}catch(t){return console.warn(`Decoration Icon Slot error for ${e.path}`,t),[]}return[]},this.fileIconRenderer=e=>{var t;if((0,n.isFsNode)(e)){const s=null===(t=this.FileIconService)||void 0===t?void 0:t.getFileIconByTreeItem(e);if(s)return r.default.createElement(s,null)}return null}}getContextActions(e){const t=[],s=e.path,r=e.type===a.NodeType.directory,n=e.type===a.NodeType.file;if(n)for(const[e,{label:r,panelFactoryType:a,test:n,removeFromContextMenu:o,actionIcon:l}]of this.openFileSlotEntries)n(s)&&!o&&t.push({id:e,icon:l,label:r,action:()=>(0,i.navigateToPanel)({type:a,props:{filePath:s}})});for(const{id:e,test:a,label:i,action:o,icon:l,section:c}of this.contextSlotEntries)a(s,r,n)&&t.push({id:e,label:i,section:c,action:()=>o(s),icon:l});return t}}},29682:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileTreeStore=t.MAX_FOLDER_DEPTH=void 0;const r=s(5163),a=s(73654),i=s(91570),n=s(30896),o=s(69144),l=s(6045),c=r.__importStar(s(22633));t.MAX_FOLDER_DEPTH=200,t.FileTreeStore=class{constructor(e,t,s,r=[]){this.directoryManager=e,this.fileChildrenFactories=t,this.getRootPath=s,this.toggledItemsIds=r,this.isPreloading=!1,this.onDirectoryChanged=async e=>{for(const t of e){const e=t.getId(),s=this.subPath(e),r=this.fileSystemTree.get((0,o.getTreeNodePath)(s,this.path.sep));if(!r)continue;const a=new Map(Array.from(t.getLatest()).map((e=>[e.name,e.stats])));for(const[t,s]of a)if(!r.children.has(t)){const r=this.path.join(e,t);this.createNode(r,s.isDirectory),s.isDirectory&&await this.preload(r)}for(const[t]of r.children)a.has(t)||this.removeNode(this.path.join(e,t))}};const{subscribe:c,unsubscribe:u,internals:d}=(0,i.setupSubscribers)();this.pubSubInternals=d,this.subscribe=c,this.unsubscribe=u;const h=a.posix.sep;this.path=a.posix,e.subscribeToAny(this.onDirectoryChanged),this.treeViewState={...n.TreeViewDefaultState,toggledItemsIds:[h,...r]},this.rootPathDepth=(0,o.getTreeNodePath)(h,a.posix.sep).length,this.fileSystemTree=new l.ScalableTree("root",{label:h,path:h,type:o.NodeType.directory,status:l.LoadingStatus.notLoaded})}async init(){this.rootPath=await this.getRootPath(),this.path=(0,i.isWindowsStyleAbsolutePath)(this.rootPath)?a.win32:a.posix,this.treeViewState={...n.TreeViewDefaultState,toggledItemsIds:[this.path.sep,...this.toggledItemsIds]},this.rootPathDepth=(0,o.getTreeNodePath)(this.rootPath,this.path.sep).length,this.fileSystemTree=new l.ScalableTree("root",{label:this.rootPath,path:this.rootPath,type:o.NodeType.directory,status:l.LoadingStatus.notLoaded}),this.isPreloading=!0,this.preload(this.rootPath).then((()=>{this.isPreloading=!1,this.notify({path:this.rootPath,type:o.FsEventType.LOAD,fileSystemTree:this.fileSystemTree,treeViewState:this.treeViewState})})).catch((()=>{this.isPreloading=!1}))}destroy(){this.directoryManager.unsubscribeFromAny(this.onDirectoryChanged)}updateTreeViewState(e){this.treeViewState=e}async loadDirectory(e){await this.preload(e)}notify(e){this.isPreloading||this.pubSubInternals.notify(e)}createNode(e,t){const s=this.makeNode(e,this.path.basename(e),t?o.NodeType.directory:o.NodeType.file);if(this.addNodes(this.path.dirname(e),[s]),s.dataItem.status===l.LoadingStatus.notLoaded)try{this.loadFileChildren(e)}catch(t){throw new Error(`something went frong loading file children for ${e}\n${t}`)}}removeNode(e){const t=this.subPath(e),s=(0,o.getTreeNodePath)(t,this.path.sep);if(this.fileSystemTree.get(s)){const t=this.fileSystemTree.removeNode(s);if(t)return this.fileSystemTree=t,this.notify({path:e,type:o.FsEventType.DELETE,fileSystemTree:this.fileSystemTree,treeViewState:this.treeViewState}),!0}return!1}loadFileChildren(e){const t=[];for(const s of this.fileChildrenFactories)if(s.isApplicable(e)){const r=s.getChildren(e);for(const a of r){const r=`${e}#${a.id}`,i=this.makeNode(r,a.label,o.NodeType.virtual,s.groupingRoot);i.dataItem.action=a.action,t.push(i)}}this.addNodes(e,t);const s=t.length>0?l.LoadingStatus.loaded:l.LoadingStatus.unloadable;this.updateDataItem(e,"status",s)}async readDirectory(e){const s=this.subPath(e);if((0,o.getTreeNodePath)(s,this.path.sep).length-this.rootPathDepth>t.MAX_FOLDER_DEPTH)throw new Error("Max folder depth exceeded");return(await this.directoryManager.getReady(e,this)).getLatest().map((t=>this.makeNode(this.path.join(e,t.name),t.name,t.stats.isDirectory?o.NodeType.directory:o.NodeType.file)))}makeNode(e,t,s,r){let a;return a=s===o.NodeType.directory||Array.from(this.fileChildrenFactories).some((t=>t.isApplicable(e)))?l.LoadingStatus.notLoaded:l.LoadingStatus.unloadable,new l.ScalableTree(t,{label:t,path:e,type:s,status:a,groupingRoot:r})}updateDataItem(e,t,s){const r=this.subPath(e),a=(0,o.getTreeNodePath)(r,this.path.sep),i=this.fileSystemTree.get(a);if(i){const r={...i.dataItem,[t]:s},n=this.fileSystemTree.updateDataItem(a,r);if(!n)return!1;this.fileSystemTree=n,this.notify({path:e,type:o.FsEventType.LOAD,fileSystemTree:this.fileSystemTree,treeViewState:this.treeViewState})}return!0}addNodes(e,t){const s=this.subPath(e),r=(0,o.getTreeNodePath)(s,this.path.sep),a=this.fileSystemTree.setChildren(r,t);return!!a&&(this.fileSystemTree=a,this.notify({path:e,type:o.FsEventType.CREATE,fileSystemTree:this.fileSystemTree,treeViewState:this.treeViewState}),!0)}async preload(e){this.updateDataItem(e,"status",l.LoadingStatus.loading);const t=await this.readDirectory(e),s=this.subPath(e),r=(0,o.getTreeNodePath)(s,this.path.sep),a=this.fileSystemTree.get(r);if(!a)return;const i=this.fileSystemTree.replace(r,new l.ScalableTree(a.id,{...a.dataItem,status:l.LoadingStatus.loaded},t.reduce(((e,t)=>e.set(t.id,t)),new Map)));i&&(this.fileSystemTree=i,t&&await Promise.all(Array.from(t).map((e=>{if(e.dataItem.status!==l.LoadingStatus.unloadable){if(c.isDir(e.dataItem))return this.preload(e.dataItem.path);if(c.isFile(e.dataItem))return this.updateDataItem(e.dataItem.path,"status",l.LoadingStatus.loading),this.loadFileChildren(e.dataItem.path)}}))),this.updateDataItem(e,"status",l.LoadingStatus.loaded))}subPath(e){return this.path.sep+this.path.relative(this.rootPath,e)}}},43271:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s(5163).__exportStar(s(29682),t)},97908:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},67079:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createOpenFile=void 0;const r=s(83135);t.createOpenFile=e=>t=>{for(const{test:s,panelFactoryType:a}of e.values())if(s(t)){(0,r.navigateToPanel)({type:a,props:{filePath:t},keepExistingParams:!0});break}}},22633:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isVirtual=t.isFsNode=t.isFile=t.isDir=void 0;const r=s(69144);t.isDir=function(e){return e.type===r.NodeType.directory},t.isFile=function(e){return e.type===r.NodeType.file},t.isFsNode=function(e){return e.type===r.NodeType.file||e.type===r.NodeType.directory},t.isVirtual=function(e){return e.type===r.NodeType.virtual}},32623:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s(5163).__exportStar(s(22633),t)},42341:(e,t)=>{"use strict";var s,r;Object.defineProperty(t,"__esModule",{value:!0}),t.LoadingStatus=t.ContextMenuSections=t.getPanelId=t.UNDO_REDO_BUTTONS_ID=t.FILE_EXPLORER_TYPE=void 0,t.FILE_EXPLORER_TYPE="FileExplorerPanel",t.UNDO_REDO_BUTTONS_ID="undo-redo-buttons",t.getPanelId=function(e,t){return`file://${t}@${e}`},(r=t.ContextMenuSections||(t.ContextMenuSections={}))[r.Main=0]="Main",r[r.New=1]="New",r[r.Clipboard=2]="Clipboard",r[r.Delete=3]="Delete",(s=t.LoadingStatus||(t.LoadingStatus={}))[s.loading=0]="loading",s[s.loaded=1]="loaded",s[s.notLoaded=2]="notLoaded",s[s.unloadable=3]="unloadable"},35875:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.notifications=t.tooltips=t.dialogs=t.fileActions=void 0,t.fileActions={copy:"Copy",cut:"Cut",paste:"Paste",rename:"Rename",delete:"Delete",copyAbsolutePath:"Copy Absolute Path",copyRelativePath:"Copy Relative Path",newFile:"New File",newFolder:"New Folder"},t.dialogs={newDialog:{title:e=>`Create New ${e}`,content:e=>`${e} Name`,emptyError:e=>`${e} name cannot be empty`,error:(e,t)=>`Couldn't create ${e}: "${t}"`,createButton:"Create",cancelButton:"Cancel"},delete:{title:"Delete",content:e=>`Are you sure you want to delete '${e}'?`,error:e=>`Couldn't delete ${e}`}},t.tooltips={undo:"Undo",redo:"Redo"},t.notifications={externalUndo:"The action you reverted was made outside of WCS."}},6045:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.content=void 0;const r=s(5163);t.content=r.__importStar(s(35875)),r.__exportStar(s(35875),t),r.__exportStar(s(42341),t),r.__exportStar(s(24584),t)},24584:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScalableTree=void 0;class s{constructor(e,t,s=new Map){this.id=e,this.dataItem=t,this.children=s}forEach(e){e(this),this.children&&this.children.forEach((t=>t.forEach(e)))}get(e){const[t,...s]=e;if(!t)return this;{const e=this.children&&this.children.get(t);if(e)return e.get(s)}return null}replace(e,t){const[r,...a]=e;if(!r)return t;{const e=this.children&&this.children.get(r),i=e&&e.replace(a,t);if(e&&i){const t=this.updateChildren({filterIds:[e.id],oldChildren:this.children,newChildren:[i]});return new s(this.id,this.dataItem,t)}}return null}removeNode(e){if(e.length>0){const t=e[e.length-1],r=e.slice(0,e.length-1),a=this.get(r),i=a&&a.get([t]);if(a&&i)return this.replace(r,new s(a.id,a.dataItem,this.updateChildren({filterIds:[i.id],oldChildren:a.children})))}return null}setChildren(e,t){const r=this.get(e);return r?this.replace(e,new s(r.id,r.dataItem,this.updateChildren({oldChildren:r.children,newChildren:t}))):null}updateDataItem(e,t){const r=this.get(e);if(r){const a=new s(r.id,t,r.children);return this.replace(e,a)}return null}updateChildren(e){const{filterIds:t=[],oldChildren:s,newChildren:r}=e,a=new Map;if(s&&s.forEach(((e,s)=>{t.includes(s)||a.set(s,e)})),r)for(const e of r)a.set(e.id,e);return a.size>0?a:new Map}}t.ScalableTree=s},43934:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const r=s(5163);r.__exportStar(s(31434),t);var a=s(31434);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.__importDefault(a).default}})},98180:(e,t)=>{"use strict";var s;Object.defineProperty(t,"__esModule",{value:!0}),t.directoryManipulator=t.directoryReducer=t.DirectoryChangeKind=void 0,function(e){e.FULL="full",e.ADD="add",e.REMOVE="remove"}(s=t.DirectoryChangeKind||(t.DirectoryChangeKind={})),t.directoryReducer=(e,t)=>{switch(t.kind){case s.FULL:return{value:t.value,invertingChanges:[{kind:s.FULL,value:e}]};case s.ADD:return{value:[...e,t.node],invertingChanges:[{kind:s.FULL,value:e}]};case s.REMOVE:return{value:e.filter((e=>e.name!==t.name)),invertingChanges:[{kind:s.FULL,value:e}]};default:return{value:e,invertingChanges:[{kind:s.FULL,value:e}]}}},t.directoryManipulator={reducer:t.directoryReducer}},34232:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultFileNamingConvention=void 0;const r=s(91570);t.defaultFileNamingConvention=r.NamingConvention.KebabCase},61276:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileScannerComputeHandler=t.getDirectoryEntities=t.traverseFs=void 0;const r=s(93849),a=s(98180);t.traverseFs=function e({directoryPath:t,fs:s,filterFile:a=r.returnsTrue,filterDirectory:i=r.returnsTrue,directories:n=[],files:o=[]}){const{readdirSync:l}=s;n.push({path:t,name:s.basename(t)});for(const r of l(t,{withFileTypes:!0})){const l=r.name,c=s.join(t,l);r.isDirectory()&&i(c,l)?e({directoryPath:c,fs:s,filterFile:a,filterDirectory:i,directories:n,files:o}):r.isFile()&&a(c,l)&&o.push({path:c,name:l})}return{directories:n,files:o}},t.getDirectoryEntities=function({directoryPath:e,fs:t}){const{readdirSync:s}=t,r={directories:[],files:[]};for(const a of s(e,{withFileTypes:!0})){const s=a.name,i=t.join(e,s);a.isDirectory()?r.directories.push({path:i,name:s}):a.isFile()&&r.files.push({path:i,name:s})}return r},t.FileScannerComputeHandler=class{constructor(e,t,s,r,a){this.controller=e,this.manipulator=t,this.fs=s,this.pathPredicate=r,this.directoryManager=a}compute(e){let t=this.controller.getEmptyValue();const{changes:s,dependencies:r}=this.addDirectory(e,t);for(const e of s)t=this.manipulator.reducer(t,e).value;return{value:t,dependencies:r,status:{valid:!0}}}recompute(e,t,s,r){const a=e.getLatest(),i=[];let n=new Set(r);for(const e of s){if(!e.isValid())continue;const s=e.getType(),{changes:r,dependencies:o}=this.getDirectoryRelatedUpdates(e,t[s][e.getSerializedId()],a,n);i.push(...r),n=o}const o=Array.from(r).filter((e=>!e.isValid()));return{dependencies:new Set([...n].filter((e=>!o.includes(e)))),changes:i,status:{valid:!0}}}addDirectory(e,t){const s=new Set,{files:r,directoryResources:a}=this.addDirRecurse(e),i=[],n=this.controller.onFilesAdded(t,r.map((({path:e})=>e)));return a.forEach((e=>s.add(e))),i.push(...n.changes),{changes:i,dependencies:s}}addDirRecurse(e,t=[],s=[],r=[]){const a=this.directoryManager.get(e);r.push(a);const i=a.getLatest();for(const a of i){const i={name:a.name,path:this.fs.join(e,a.name)};this.pathPredicate(i.path)&&(a.stats.isDirectory?(t.push(i),this.addDirRecurse(i.path,t,s,r)):a.stats.isFile&&this.controller.predicate(i.path)&&s.push(i))}return{files:s,directories:t,directoryResources:r}}getDirectoryRelatedUpdates(e,t,s,r){if(t.isDisposed())return{changes:[],dependencies:r};const i=[],n=new Set(r),o=e.getChangesFromVersion(t),l=e.getId();return o.forEach((e=>{if(e.kind===a.DirectoryChangeKind.ADD){const t=this.fs.join(l,e.node.name);if(e.node.stats.isDirectory){if(this.pathPredicate(t)){const{changes:e,dependencies:r}=this.addDirectory(t,s);for(const e of r)n.add(e);i.push(...e)}}else if(this.pathPredicate(t)&&this.controller.predicate(t)){const{changes:e}=this.controller.onFilesAdded(s,[t]);i.push(...e)}}else if(e.kind===a.DirectoryChangeKind.REMOVE){const t=this.fs.join(l,e.name);i.push(...this.controller.onRemoved(s,t))}})),{changes:i,dependencies:n}}}},33506:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removePrefixPath=t.createPathPredicate=t.directoryDeepChildren=t.getPathsOfFilePath=t.getTreeNodePath=void 0;const r=s(71876),a=s(73654),i=s(91570);function n(e,t){return e.split(t).filter((e=>!!e))}function o(){return!0}t.getTreeNodePath=n,t.getPathsOfFilePath=function(e,t){var s;const r=e?n(e,t):[],a=[];for(let e=0;e<r.length;e++)a.push((null!==(s=a[e-1])&&void 0!==s?s:"")+t+r[e]);return a},t.directoryDeepChildren=async function*e(t,s,r=o,a=s){for(const i of await t.promises.readdir(s,{withFileTypes:!0})){const n=i.name,o=t.join(s,n),l=t.relative(a,o);if(i.isFile()){const e={type:"file",path:o,name:n,relativePath:l};r(e)&&(yield e)}else if(i.isDirectory()){const s={type:"directory",path:o,name:n,relativePath:l};r(s)&&(yield s,yield*e(t,o,r,a))}}},t.createPathPredicate=function(e,t,s){const a=s.map((e=>(0,r.makeRe)(e)));return s=>{const r=e.relative(t,s);return!a.some((e=>e.test(r)))}},t.removePrefixPath=(e,t)=>e?(0,i.replaceWinSlashes)(a.win32.relative(e,t)):(0,i.replaceWinSlashes)(t)},18012:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(5163);r.__exportStar(s(78204),t),r.__exportStar(s(98180),t),r.__exportStar(s(33506),t),r.__exportStar(s(98073),t),r.__exportStar(s(61276),t),r.__exportStar(s(34232),t)},98073:(e,t)=>{"use strict";var s,r;Object.defineProperty(t,"__esModule",{value:!0}),t.NodeType=t.FsEventType=void 0,(r=t.FsEventType||(t.FsEventType={}))[r.CREATE=0]="CREATE",r[r.LOAD=1]="LOAD",r[r.UPDATE=2]="UPDATE",r[r.DELETE=3]="DELETE",(s=t.NodeType||(t.NodeType={}))[s.directory=0]="directory",s[s.file=1]="file",s[s.virtual=2]="virtual",s[s.none=3]="none"},2206:(e,t,s)=>{e.exports=s(43934)},69144:(e,t,s)=>{e.exports=s(18012)},78432:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useResources=t.useResource=t.useResourceApplyChange=t.useResourceValidity=t.useResourceValue=t.useResourceState=t.useApplyChange=t.useValidity=t.useValue=t.useResourceSubscriber=t.useHoldResource=t.useResourceInstance=void 0;const r=s(87363),a=s(93849),i=s(60814),n=s(69202);function o({resource:e,defaultValue:t,enabled:s=!0}){const i=(0,n.useForceUpdate)(),o=(0,r.useRef)(!1),l=(0,n.useLatest)(s),c=(0,r.useCallback)((()=>{l.current&&!o.current&&i()}),[l,i]);return(0,r.useEffect)((()=>(e&&e.subscribe(c),(null==e?void 0:e.ready)&&e.ready.then(c).catch(a.reportError),()=>{null==e||e.unsubscribe(c)})),[c,e]),(0,r.useEffect)((()=>()=>{o.current=!0}),[]),function(e,t){return e&&e.isReady()&&e.isValid()?e.getLatest():t}(e,t)}function l({resource:e,enabled:t=!0}){const[s,a]=(0,r.useState)(),i=(0,r.useCallback)((()=>{if(t){const t=e&&e.isReady()?e.isValid():void 0;a(t)}}),[e,t]);return(0,r.useEffect)((()=>{var s;if(!e)return void(t&&a(void 0));let r=!1;const n=()=>{r||i()};return e.subscribe(n),n(),null===(s=e.ready)||void 0===s||s.then(n).catch(n),()=>{r=!0,e.unsubscribe(n)}}),[e,i,t]),s}function c(e){return(0,r.useCallback)((t=>{null==e||e.applyChange(t)}),[e])}function u(e){return!!e.ids}t.useResourceInstance=({resourceManager:e,resourceId:t,enabled:s=!0})=>{const a=(0,r.useMemo)((()=>({})),[]),i=(0,r.useRef)({resourceManager:e,resourceId:t}),n=(0,r.useMemo)((()=>{if(void 0===t)return;const{current:r}=i;return function(e,t,s){return e||t.resourceId!==s.resourceId||t.resourceManager!==s.resourceManager}(s,r,{resourceManager:e,resourceId:t})?e.get(t,a):r.resourceInstance}),[t,s,e,a]);return i.current={resourceManager:e,resourceId:t,resourceInstance:n},(0,r.useEffect)((()=>()=>null==n?void 0:n.release(a)),[n,a]),n},t.useHoldResource=e=>{(0,r.useEffect)((()=>{const t={};return e.use(t),()=>{e.release(t)}}),[e])},t.useResourceSubscriber=(e,t)=>{(0,r.useEffect)((()=>{const s=()=>t(e.getLatest());return null==e||e.subscribe(s),()=>null==e?void 0:e.unsubscribe(s)}),[t,e])},t.useValue=o,t.useValidity=l,t.useApplyChange=c,t.useResourceState=function({resource:e,enabled:t,defaultValue:s}){const a=o({resource:e,enabled:t,defaultValue:(null==e?void 0:e.getLatest())||s}),n=c(e),l=(0,r.useCallback)((e=>n((0,i.fullChange)(e))),[n]);return[a,l,e]},t.useResourceValue=function({resourceManager:e,resourceId:s,defaultValue:r,enabled:a=!0}){return o({resource:(0,t.useResourceInstance)({resourceManager:e,resourceId:s,enabled:a}),defaultValue:r,enabled:a})},t.useResourceValidity=function({resourceManager:e,resourceId:s,enabled:r=!0}){return l({resource:(0,t.useResourceInstance)({resourceManager:e,resourceId:s,enabled:r}),enabled:r})},t.useResourceApplyChange=function({resourceManager:e,resourceId:s}){return c((0,t.useResourceInstance)({resourceManager:e,resourceId:s}))},t.useResource=function(e,t){const[s,a]=(0,r.useState)(t);return(0,r.useEffect)((()=>{var s;let r=!1;if(!e)return;const i=()=>{r||(e.isReady()&&e.isValid()?a(e.getLatest()):a(t))};return e.subscribe(i),i(),null===(s=e.ready)||void 0===s||s.then(i).catch(i),()=>{r=!0,e.unsubscribe(i)}}),[e,t]),e&&e.isReady()?e.getLatest():s};const d=new WeakMap,h=e=>{const t=d.get(e);if(t)for(const s of Object.keys(t))for(const r of Object.keys(t[s]))t[s][r].resource.isReady()&&t[s][r].resource.release(e)},p=(e,t,s,r,a)=>{const i=t.getType();t.isReady()||a.push(t.ready),e[i]||(e[i]={}),e[i][t.getSerializedId()]={resource:t,field:s,isInnerRecord:r}},f={valid:!1,message:"Loading"},y=(e,t)=>{for(const s of Object.keys(e))if(t[s])for(const r of t[s])if(e[s][r])return!0;return!1};t.useResources=function(e,t=!0){const s=(e=>JSON.stringify(e,((e,t)=>t instanceof i.ResourceManager?t.getTypeName():t)))(e),[n]=(0,r.useState)({cleanupRequested:!1,enabled:t,hasChanges:!1,used:new Set});n.enabled=t;const[o,l]=(0,r.useState)(0),c=Object.keys(e),m=c.length?e[c[0]].resourceManager.getBatcher():void 0,g=d.get(n)||{},S=(0,r.useCallback)((e=>{if(!n.enabled)return;const t=y(g,e.changed),s=y(g,e.changedStatus);(t||s)&&l(Math.random())}),[g,n]);return d.has(n)||(d.set(n,g),m.subscribe(S)),(0,r.useMemo)((()=>{const t=[];n.enabled&&(m.batchAll((()=>{const s=new Set;for(const[r,a]of Object.entries(e))if(u(a))for(const e of a.ids){const i=a.resourceManager.get(e,n);s.add(i),p(g,i,r,!0,t)}else if(a.id){const e=a.resourceManager.get(a.id,n);s.add(e),p(g,e,r,!0,t)}for(const e of Object.values(g))for(const[t,r]of Object.entries(e))s.has(r.resource)||(r.resource.isReady()?(r.resource.release(n),delete e[t]):r.resource.ready.then((()=>{n.used.has(r.resource)||(r.resource.release(n),delete e[t])})).catch(a.reportError));n.used=s})),t.length&&n.enabled&&Promise.all(t).then((e=>{n.cleanupRequested?h(n):l(Math.random())})).catch((e=>{throw e})))}),[s,n,m,g]),(0,r.useEffect)((()=>()=>{h(n),m.unsubscribe(S),n.cleanupRequested=!0}),[n]),(0,r.useMemo)((()=>{return Object.keys(e).reduce(((s,r)=>{const a=e[r];if(u(a))s[r]={getResource:e=>t(r,e),getValue(e){const s=t(r,e);return s&&s.isValid()?s.getLatest():a.defaultValue},getStatus(e){const s=t(r,e);return s&&s.isReady()?s.getStatus():f}};else{const e=t(r,a.id);s[r]={value:e&&e.isValid()?e.getLatest():a.defaultValue,status:e?e.getStatus():f,resource:e}}return s}),{});function t(t,s){const r=e[t],a=u(r)?s:r.id;if(!a||!g[r.resourceManager.getTypeName()])return;const n=g[r.resourceManager.getTypeName()][(0,i.serializeId)(a)];return n&&n.resource&&n.resource.isReady()?n.resource:void 0}}),[o,t,s])}},40386:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(5163);r.__exportStar(s(78432),t),r.__exportStar(s(23496),t)},23496:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createJSONResource=void 0;const r=s(60814);t.createJSONResource=function(e){return new r.JSONResource("data",{provider:{provide:()=>({value:e})},resourceType:"state-resource",batcher:new r.Batcher})}},27941:(e,t,s)=>{e.exports=s(40386)},60814:(e,t,s)=>{e.exports=s(73858)}}]);
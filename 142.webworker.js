(self.webpackChunk_wixc3_stylable_playground_feature=self.webpackChunk_wixc3_stylable_playground_feature||[]).push([[142],{45219:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAppliedChanges=void 0,t.getAppliedChanges=function(e){const t=e.map((e=>({newText:e.newText,span:{length:e.span.length,start:e.span.start}})));for(let e=0;e<t.length;e++){const r=t[e],n=r.newText.length-r.span.length;for(let o=e+1;o<t.length;o++)t[o].span.start>=r.span.start&&(t[o].span.start+=n)}return t}},58665:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.escapeDblQuoteHtml=t.escapeDblQuote=t.escapeSingleQuote=t.isValidIdentifierName=void 0,t.isValidIdentifierName=e=>e.length&&!/[^\d\w]/g.test(e),t.escapeSingleQuote=e=>e.replace(/\\/g,"\\\\").replace(/'/g,"\\'"),t.escapeDblQuote=e=>e.replace(/\\/g,"\\\\").replace(/"/g,'\\"'),t.escapeDblQuoteHtml=e=>e.replace(/&/g,"&amp;").replace(/"/g,"&quot;")},60147:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAstFromString=void 0;const n=r(5163).__importDefault(r(60270));t.createAstFromString=function(e){const t=n.default.createSourceFile("createAstFromString.ts",`0,${e}`,n.default.ScriptTarget.Latest,!1,n.default.ScriptKind.TSX);if(1!==t.statements.length)throw new Error("Failed to parse partial code: too many statements");const r=t.statements[0];if(n.default.isExpressionStatement(r)&&n.default.isBinaryExpression(r.expression))return r.expression.right;throw new Error("Failed to parse partial code: statement is not an expression")}},49001:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findConvertor=void 0,t.findConvertor=(e,t)=>e.find((e=>e.isApplicable(t,null)))},22161:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getModification=void 0;const n=r(49001);t.getModification=(e,t,r)=>{const o=(0,n.findConvertor)(e.convertors,t);if(!o)throw new Error("can't find convertor");const i=o.modifications[r];if(!i)throw new Error(`no modification: ${r}`);return i}},79606:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5163);n.__exportStar(r(45219),t),n.__exportStar(r(58665),t),n.__exportStar(r(60147),t),n.__exportStar(r(59750),t),n.__exportStar(r(81315),t),n.__exportStar(r(48475),t),n.__exportStar(r(96689),t),n.__exportStar(r(81238),t),n.__exportStar(r(22161),t),n.__exportStar(r(49001),t)},59750:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLeadingSpaces=t.findCommaBeforeNode=t.findCommaAfterNode=t.mergeWithPreviousChanges=t.mergeChanges=t.getAddedChars=void 0,t.getAddedChars=e=>e.newContent.reduce(((e,t)=>"string"==typeof t?e+t.length:e),0),t.mergeChanges=(e,r)=>r.map((r=>(0,t.mergeWithPreviousChanges)(e,r))),t.mergeWithPreviousChanges=(e,r)=>{let n=r.from,o=r.to;for(const r of e){const e=r.from-r.to+(0,t.getAddedChars)(r);r.to<=n?(n+=e,o+=e):r.from<n&&(o+=e)}return{from:n,to:o,newContent:r.newContent}},t.findCommaAfterNode=function(e,t){const r=e.findIndex((e=>e===t)),n=e[r+1];if(n&&","===n.getText())return n},t.findCommaBeforeNode=function(e,t){const r=e.findIndex((e=>e===t)),n=e[r-1];if(n&&","===n.getText())return n},t.getLeadingSpaces=function(e){return e.getFullText().slice(0,e.getLeadingTriviaWidth()).replace(/./g," ")}},81315:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.printWithIds=void 0;const n=r(5163).__importDefault(r(60270)),o=r(36136);t.printWithIds=function(e,t){const r=e.getFullText(),i={},a=e=>{const r=t(e);r&&(i[e.getStart()]=i[e.getStart()]||[],i[e.getEnd()]=i[e.getEnd()]||[],i[e.getStart()].push((0,o.startNode)(r,e.kind)),i[e.getEnd()].push((0,o.endNode)(r))),n.default.forEachChild(e,a)},s=[];a(e);let d=0;const l=Object.keys(i).map((e=>parseInt(e))).sort(((e,t)=>e-t));for(const t of l){const n=t-e.getFullStart();s.push(r.slice(d,n)),d=n,s.push(...i[t])}return s.push(r.slice(d)),s}},96689:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMainSymbolDeclaration=t.getEachChild=void 0,t.getEachChild=function(e){const t=[];return e.forEachChild((e=>{t.push(e)})),t},t.getMainSymbolDeclaration=function(e){return e.valueDeclaration||(e.declarations?e.declarations[0]:void 0)}},81238:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.template=void 0;const n=r(5163).__importDefault(r(60270));t.template=function(e){const t=n.default.createSourceFile("template.ts",e,n.default.ScriptTarget.Latest,!1,n.default.ScriptKind.TSX);return e=>n.default.createPrinter().printFile(n.default.transform(t,[t=>r=>{const o=r=>n.default.isIdentifier(r)&&e[r.text]?e[r.text]:n.default.visitEachChild(r,o,t);return n.default.visitNode(r,o)}]).transformed[0])}},48475:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addImports=t.createEnsureImportTypescriptFactory=t.createEnsureImportTypescript=t.computeNewLocalName=t.escapeFileName=t.getImportsOfModule=t.getReferenceTarget=t.scanModuleImports=t.scanModuleVars=t.getAccessibleScopes=t.getVariableScope=t.isVariableBlockingNode=t.isNamedAccess=t.isNamedDeclaration=t.isNamedAssignment=t.isReferencableDeclaration=t.isTypeLike=void 0;const n=r(5163).__importDefault(r(60270)),o=r(60814);function i(e){return n.default.isTypeAliasDeclaration(e)||n.default.isInterfaceDeclaration(e)||n.default.isTypeNode(e)}function a(e){return n.default.isVariableDeclaration(e)||n.default.isParameter(e)||n.default.isImportClause(e)||n.default.isNamespaceImport(e)||n.default.isImportSpecifier(e)||n.default.isEnumDeclaration(e)||n.default.isClassDeclaration(e)||n.default.isFunctionDeclaration(e)||n.default.isBindingElement(e)||n.default.isFunctionLike(e)}function s(e){return n.default.isPropertyDeclaration(e)||n.default.isPropertyAssignment(e)}function d(e){return n.default.isFunctionLike(e)||n.default.isBlock(e)||n.default.isSourceFile(e)}function l(e){const t=[];for(;e.parent&&!n.default.isSourceFile(e.parent);)d(e=e.parent)&&t.push(e);return t.push(e.getSourceFile()),t}t.isTypeLike=i,t.isReferencableDeclaration=a,t.isNamedAssignment=s,t.isNamedDeclaration=function(e){return a(e)||s(e)},t.isNamedAccess=function(e){return n.default.isPropertyAccessExpression(e)},t.isVariableBlockingNode=d,t.getVariableScope=function(e){for(;e.parent&&!n.default.isSourceFile(e.parent);)if(d(e=e.parent))return e;return e.getSourceFile()},t.getAccessibleScopes=l;const c=new WeakMap,u=new WeakMap;function g(e){return e.statements.reduce(((e,t)=>{var r;if(n.default.isImportDeclaration(t)){const o=t.moduleSpecifier;if(t.importClause&&n.default.isStringLiteral(o)){const i=o.text;e.toDeclaration[i]=e.toDeclaration[i]||[],e.toDeclaration[i].push(t),e.toLocal[i]=e.toLocal[i]||{},t.importClause.name&&(e.toLocal[i].default=t.importClause.name.text);const a=t.importClause.namedBindings;if(a)if(n.default.isNamespaceImport(a))e.toLocal[i]["*"]=a.name.text;else for(const t of a.elements)e.toLocal[i][(null===(r=t.propertyName)||void 0===r?void 0:r.text)||t.name.text]=t.name.text}}return e}),{toDeclaration:{},toLocal:{}})}function f(e){return e.slice(e.lastIndexOf("/")+1).split("-").map((e=>e[0].toUpperCase()+e.slice(1))).join("").split(".").join("_")}function p(e,t,r,n){const o="*"===t||"default"===t?f(e):t;let i=0,a=o;for(;r[a]||n.has(a);)a=o+i,i++;return a}t.scanModuleVars=e=>{if(c.has(e))return c.get(e);const t={},r=new Set;r.add(e);let o=e;const s=l=>{if(!i(l)){const i=o;n.default.isIdentifier(l)?a(l.parent)&&l.parent.name===l&&(t[l.text]=t[l.text]||new Map,t[l.text].set(n.default.isFunctionDeclaration(l.parent)?e:o,l.parent)):d(l)&&(o=l,r.add(l)),l.forEachChild(s),o=i}};e.forEachChild(s);const l={variableScopeMap:t,scopes:r};return c.set(e,l),l},t.scanModuleImports=e=>{if(u.has(e))return u.get(e);const t=g(e);return u.set(e,t),t},t.getReferenceTarget=e=>{const r=(0,t.scanModuleVars)(e.getSourceFile()),n=l(e),o=r.variableScopeMap[e.text];if(!o)return;const i=n.find((e=>o.has(e)));return i?o.get(i):void 0},t.getImportsOfModule=g,t.escapeFileName=f,t.computeNewLocalName=p;const h=e=>{const t={...e};return delete t["*"],delete t.default,{default:e.default,"*":e["*"],named:t}};function m(e){return(r,n)=>(o,i,a)=>{var s;const d=null!==(s=null==e?void 0:e({sourceFilePath:o.fileName,importPath:i,exportName:a}))&&void 0!==s?s:{request:i,exportName:a},l=(0,t.scanModuleImports)(o);if(l.toLocal[d.request]&&l.toLocal[d.request][d.exportName])return l.toLocal[d.request][d.exportName];if(r[d.request]&&r[d.request][d.exportName])return r[d.request][d.exportName];const c=p(d.request,d.exportName,(0,t.scanModuleVars)(o).variableScopeMap,n);return n.add(c),r[d.request]=r[d.request]||{},r[d.request][d.exportName]=c,c}}t.createEnsureImportTypescript=m(),t.createEnsureImportTypescriptFactory=m;const v=e=>e.importClause&&(!e.importClause.namedBindings||n.default.isNamedImports(e.importClause.namedBindings));t.addImports=function(e,r){var i,a,s;if(0===Object.keys(r).length)return[];const d=(0,t.scanModuleImports)(e),l=[],c=Object.keys(r).filter((e=>d.toDeclaration[e]&&d.toDeclaration[e].find(v))).map((e=>{const t=d.toDeclaration[e].find(v);return{filePath:e,pos:t.getStart(),decl:t}})).sort(((e,t)=>t.pos-e.pos));for(const{filePath:e,decl:t}of c){const n=h(r[e]),d=Object.keys(n.named);if(d.length){const e=d.map((e=>n.named[e]!==e?` ${e} as ${n.named[e]}`:" "+e)).join();if(null===(i=t.importClause)||void 0===i?void 0:i.namedBindings){const r=t.importClause.namedBindings,n=r.elements[r.elements.length-1].getEnd();l.push((0,o.stringPartialChangeByValues)("",","+e,n,n))}else{const r=(null===(a=t.importClause)||void 0===a?void 0:a.name)?t.importClause.name.getEnd():t.getChildAt(0).getEnd();l.push((0,o.stringPartialChangeByValues)("",`${(null===(s=t.importClause)||void 0===s?void 0:s.name)?",":""} {${e} }`,r,r))}if(t.importClause.isTypeOnly){const e=t.importClause.getChildAt(0);l.push((0,o.stringPartialChangeByValues)("type ","",e.getStart(),e.getEnd()+1))}}if(n.default){const e=t.getChildAt(0).getEnd();l.push((0,o.stringPartialChangeByValues)(""," "+n.default+",",e,e))}}let u;for(const t of e.statements)n.default.isImportDeclaration(t)&&(u=t);const g=u?u.getEnd():0;for(const e of Object.keys(r)){const t=h(r[e]);let n="";if(!d.toDeclaration[e]){const r=Object.keys(t.named);n+="\nimport",t.default&&(n+=" "+t.default),r.length&&(n+=t.default?", {":" {",n+=r.map((e=>t.named[e]===e?" "+e:` ${e} as ${t.named[e]}`)).join(),n+=" }"),n+=` from '${e}';`}t["*"]&&(n+=`\nimport * as ${t["*"]} from '${e}';`),n.length&&l.unshift((0,o.stringPartialChangeByValues)("",n,g,g))}return l}},7122:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.basePlugins=void 0;const n=r(35018),o=r(35770),i=r(53235),a=r(1249),s=r(42169),d=r(79378),l=r(7387),c=r(1491),u=r(17853),g=r(6679),f=r(55286),p=r(19316);t.basePlugins=[n.sourceFileConvertor,o.variableDeclarationConvertor,i.numberConvertor,i.booleanConvertor,i.nullConvertor,i.undefinedConvertor,s.arrayConvertor,a.objectConvertor,a.namedPropertyConvertor,p.functionConvertor,d.jsxConvertor,d.jsxTextConvertor,d.jsxExpressionConvertor,l.trinaryConvertor,c.referenceConvertor,u.propertyAccessConvertor,u.propertyAccessIndexConvertor,i.stringConvertor,g.templateStringConvertor,d.jsxPropConvertor,d.jsxSpreadPropConvertor,f.callConvertor]},53516:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodeService=void 0;const n=r(60814);t.CodeService=class{constructor(e,t){this.idService=e,this.fileManager=t}getCode(e,t){const r=this.idService.getLanguage(e);if(!r)return"";const n=this.idService.getFileAPI(e).getNodeByID(t);return n?r.getFullText(n):""}setCode(e,t,r){if(!this.idService.getLanguage(e))return;const o=this.idService.getFileAPI(e).getNodeByID(t),i=this.fileManager.get(e),a=(0,n.stringPartialChange)(r,o.pos,o.end,i);a&&i.applyChange(a)}}},88206:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.genericUnParsedConvertor=void 0;const n=r(36136),o=r(23987);t.genericUnParsedConvertor=e=>({kind:"UnparsedNode",isApplicable:()=>!0,convert:(t,r)=>(0,o.createUnparsedNode)({astNodeId:r.getNodeId(t),code:e.getText(t)}),modifications:{},defaultConfig:{},generate:e=>[(0,n.startNode)(e.astNodeId),e.code,(0,n.endNode)(e.astNodeId)],language:e.language})},66877:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findComponents=void 0;const n=r(46726);function o(e){return(0,n.isSimpleFileReferenceNode)(e)&&(e.targetFile.startsWith(".")||e.targetFile.startsWith("/"))}t.findComponents=function(e,t){if(!e)return[];if((0,n.isSimpleFileReferenceNode)(e))return[e];const r=[];return(0,n.walkProjectedNodes)(e,t,(e=>((0,n.isJSXElementNode)(e)&&(0,n.isSimpleFileReferenceNode)(e.type)&&r.push(e.type),!0))),r.filter(o)}},13218:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(5163).__exportStar(r(61515),t)},61515:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatDiagnostics=t.tsPlugin=void 0;const n=r(5163).__importStar(r(60270)),o=r(91570),i=r(60814),a=r(96689),s=r(35018),d=r(48475),l=r(73027),c=r(32393),u=r(45219);t.tsPlugin=(e,r,g,f)=>{const p=(e,t)=>n.default.createSourceFile(null!=t?t:"",e,n.default.ScriptTarget.ESNext,!0),h=new WeakMap,m=(e,t)=>{var r;if(t&&h.has(t)){const n=null===(r=h.get(t))||void 0===r?void 0:r.get(e);if(n)return t.text.slice(n.start,n.end)}return e.getText()};return{getChildren:a.getEachChild,getKind:e=>e.kind,getPosition:(e,t)=>{var r;if(t&&h.has(t)){const n=null===(r=h.get(t))||void 0===r?void 0:r.get(e);if(n)return n}return{start:e.getStart(),end:e.getEnd()}},getAST:t=>{const r=e(t);return p(r,t)},getASTFromContents:p,isApplicable:e=>(0,o.isTypeScriptFile)(e)||(0,o.isJavaScriptFile)(e),getText:m,createEmptyRoot:()=>n.default.factory.createSourceFile([],n.default.factory.createToken(n.default.SyntaxKind.EndOfFileToken),0),getName:(e,t)=>(0,n.isVariableStatement)(e)?e.declarationList.declarations.map((e=>m(e.name,t))).join(","):(0,d.isNamedDeclaration)(e)&&e.name?m(e.name,t):void 0,getFullText:(e,t)=>{var r;if(t&&h.has(t)){const n=null===(r=h.get(t))||void 0===r?void 0:r.get(e);if(n)return t.text.slice(n.fullStart,n.fullEnd)}return e.getFullText()},updateAst(e,t,r,n){const o=new Map;return h.set(t,o),(0,c.visitAst)(this.getChildren,t,(e=>{o.set(e,{fullStart:e.getFullStart(),start:e.getStart(),end:e.end,fullEnd:e.end})})),t.update(r,n)},language:"typescript",getFormattingChanges(e){const t=g?n.default.toEditorSettings(g):n.default.getDefaultFormatCodeSettings(),r=n.default.formatting.formatDocument(e,n.default.formatting.getFormatContext(t)),o=[];let a=e.getFullText();for(const e of(0,u.getAppliedChanges)(r)){const{start:t,length:r}=e.span,n=a.substr(t,r),s=(0,i.stringPartialChangeByValues)(n,e.newText,t,t+r);s&&(o.push(s),a=i.stringManipulator.reducer(a,s).value)}return o},defaultRootConvertor:s.sourceFileConvertor,getSyntacticDiagnostics(e){return r?[...r.getLanguageController(e,this).languageService.getSyntacticDiagnostics(e)].map(t.formatDiagnostics):[]},getSemanticDiagnostics(e){return r?[...r.getLanguageController(e,this).languageService.getSemanticDiagnostics(e)].map(t.formatDiagnostics):[]},getJSDocs:e=>(0,l.getJsDocInfo)(e),getExports(e){if(!r)return{};const t=r.getLanguageController(e,this).languageService.getProgram(),o=null==t?void 0:t.getTypeChecker(),i=null==t?void 0:t.getSourceFile(e);if(!i||!o)return{};const s=o.getSymbolAtLocation(i);return(o.getExportsOfModule(s)||[]).reduce(((e,t)=>{const r=(0,a.getMainSymbolDeclaration)(t);if(r){const i=t.getFlags()&n.default.SymbolFlags.Alias?o.getAliasedSymbol(t).getName():t.getName();e[t.getName()]={node:r,symbolName:i}}return e}),{})},addImports:d.addImports,createEnsureImport:(0,d.createEnsureImportTypescriptFactory)(f)}},t.formatDiagnostics=e=>({category:e.category,code:e.code,length:e.length||0,start:e.start||0,messageText:"string"==typeof e.messageText?e.messageText:e.messageText.messageText})},70089:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IDService=void 0;const n=r(32393);t.IDService=class{constructor(e,t){this.getFileContent=e,this.langs=t,this.listeners={},this.errors={},this.openFiles={}}getLanguage(e){return[...this.langs].find((t=>t.isApplicable(e)))}getLangOrThrow(e){const t=this.getLanguage(e);if(!t)throw new Error("could not find language plugin for "+e);return t}getFileAPI(e){const t=this.getLangOrThrow(e),r=()=>{try{return this.errors[e]=null,t.getAST(e)}catch(r){return this.errors[e]=r,t.createEmptyRoot(e)}},o=()=>{const t=this.getFileContent(e);if(this.openFiles[e].fileContent===t)return;this.openFiles[e].fileContent=t;const n=r();this.errors[e]||(this.openFiles[e].idService.remarkWithRef(n,this.openFiles[e].file),this.openFiles[e].file=n)};this.openFiles[e]?o():(this.openFiles[e]={file:r(),fileContent:this.getFileContent(e),idService:(0,n.createIdentificationService)(t)},this.openFiles[e].idService.markAst(this.openFiles[e].file));const i=(e,r,n,o)=>{const a=t.getPosition(e);if(a.start>r||a.end<n)return null;if(a.start===r&&a.end===n&&(!o||t.getKind(e)===o))return e;const s=t.getChildren(e);for(const e of s){const t=i(e,r,n,o);if(t)return t}},a={filePath:e,getNodeByID:t=>{if(!this.errors[e])return this.openFiles[e].idService.idsToNodes.get(t)},getNodeID:t=>this.errors[e]?"":this.openFiles[e].idService.nodesToIds.get(t),getSourceFile:()=>(o(),this.errors[e]?t.createEmptyRoot(e):this.openFiles[e].file),getUnderlyingIDService:()=>{if(this.errors[e]){const r=this.openFiles[e].idService.clone();return r.markAst(t.createEmptyRoot(e)),r}return this.openFiles[e].idService},getNodeIdByPos:(t,r,n)=>{if(o(),this.errors[e])return;const a=this.openFiles[e].file,s=i(a,t,r,n);return s?this.openFiles[e].idService.nodesToIds.get(s):void 0},getParsingErrors:()=>this.errors[e],getExports:()=>{const t=this.getLanguage(e);return(null==t?void 0:t.getExports)?t.getExports(e):{}},getName:t=>{const r=this.getLanguage(e);return null==r?void 0:r.getName(t)}};return this.listeners[e]=this.listeners[e]||new Set,this.listeners[e].add(a),a}isFileOpen(e){return!!this.openFiles[e]}setOpenFile(e,t,r){this.openFiles[e]={idService:t,file:r,fileContent:this.getFileContent(e)}}releaseAPI(e){this.listeners[e.filePath].delete(e),0===this.listeners[e.filePath].size&&(delete this.listeners[e.filePath],delete this.openFiles[e.filePath])}}},45856:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5163);n.__exportStar(r(79606),t),n.__exportStar(r(7122),t),n.__exportStar(r(53516),t),n.__exportStar(r(70089),t),n.__exportStar(r(13218),t),n.__exportStar(r(32393),t),n.__exportStar(r(19316),t),n.__exportStar(r(29231),t),n.__exportStar(r(96589),t),n.__exportStar(r(59541),t),n.__exportStar(r(79063),t),n.__exportStar(r(52855),t),n.__exportStar(r(78237),t),n.__exportStar(r(4075),t),n.__exportStar(r(66877),t)},73027:(e,t)=>{"use strict";function r(e){return void 0===e||"string"==typeof e?e:e.map((e=>e.text)).join("")}Object.defineProperty(t,"__esModule",{value:!0}),t.getJsDocInfo=void 0,t.getJsDocInfo=function(e){const t=e.jsDoc;if(t&&t.length){const e=t[0],n={};if(e.comment&&(n.description=r(e.comment)),e.tags&&e.tags.length){n.tags=[];for(const t of e.tags)if(t.tagName){const e=t.tagName.escapedText;let o,i=r(t.comment)||"";if("param"===e){const e=i.trim().replace(/\s.*/,""),t=i.trim().replace(/^[^\s]*\s*/,"");o=e,i=t}const a={tagName:e,text:i,param:o};n.tags.push(a)}}return n}}},40977:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.moveNode=void 0;const n=r(79606),o=r(22161);t.moveNode=function(e,t,{newParentId:r,node:i,...a}){const s=t.getNodeByID(r);if(!s)throw new Error(`couldn't find new parent with id: ${r}`);const d=t.getNodeByID(i.astNodeId);if(!d)throw new Error(`couldn't find child with id: ${i.astNodeId} to move`);const l=(0,o.getModification)(t,d.parent,"removeChild"),c={childId:i.astNodeId,placeholderId:a.placeholderId},u=l(d.parent,t,c),g=(0,o.getModification)(t,s,"addChild")(s,t,{newChild:i,...a}),f=(0,n.mergeChanges)(u,g);return[...u,...f]}},32393:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findInIdMap=t.createIdentificationService=t.visitAstAndBreak=t.visitAst=void 0;const n=r(15089);function o(e,t,r){r(t);for(const n of e(t))o(e,n,r)}t.visitAst=o,t.visitAstAndBreak=function e(t,r,n){if(n(r))for(const o of t(r))e(t,o,n)};const i=({referenceData:e,data:t},r)=>{const n={matched:[],unmatched:{data:[],referenceData:[]}},o=[...e];for(let e=0;e<t.length;e++){const i=t[e],a=o.findIndex(((t,n)=>r(i,t,e,n)));if(-1!==a){const[e]=o.splice(a,1);n.matched.push({data:i,ref:e})}else n.unmatched.data.push(i)}return n.unmatched.referenceData=o,n};function a({getKind:e,getPosition:t},r,n){if(!n)return;const{end:o,start:i}=t(r),a=Object.entries(n).find((([t,n])=>n.start===i&&n.end===o&&(!n.nodeKind||n.nodeKind===e(r))));return a?a[0]:void 0}t.createIdentificationService=function e(t,r="p",s=0,d=new Map,l=new Map){const{nextId:c,currentCount:u}=(0,n.createPrefixCounter)(r,s),{getChildren:g}=t;function f(e,r){const n=new Set;return o(g,e,(e=>{const o=r&&a(t,e,r);if(o){const t=l.get(e);t&&t!==o&&d.delete(t)}m(e,o),n.add(e)})),n}function p(e,r,n,s,u=new Map,v){const N=l.get(r)||c();d.set(N,e),l.delete(r),l.set(e,N);const I=[...g(r)],S=g(e);for(const e of s||[]){const t=d.get(e),r=I.indexOf(t);-1!==r&&(h(I[r]),u.set(t,e),I.splice(r,1))}const x=i({referenceData:I,data:S},((e,t)=>e===t)),C=[...x.unmatched.referenceData],y=[],_=({data:e,ref:t})=>{p(e,t,n,s,u,v)};for(const e of x.unmatched.data){const r=n&&a(t,e,n);if(r){const i=d.get(r);if(i&&x.unmatched.referenceData.includes(i)){_({data:e,ref:i});const t=C.indexOf(i);C.splice(t,1)}else o(g,e,(e=>m(e,a(t,e,n))))}else y.push(e)}const E=i({data:y,referenceData:C},((e,r)=>{const n=I.filter((e=>t.getKind(e)===t.getKind(r))).findIndex((e=>e===r));return S.filter((r=>t.getKind(r)===t.getKind(e))).findIndex((t=>t===e))===n&&t.getKind(e)===t.getKind(r)&&t.getText(e)===t.getText(r,v)})),w=i(E.unmatched,((e,r)=>t.getKind(e)===t.getKind(r)&&t.getText(e)===t.getText(r,v))),T=i(w.unmatched,((e,r)=>t.getKind(e)===t.getKind(r)&&!!t.getName(e)&&t.getName(e)===t.getName(r,v))),A=i(T.unmatched,((e,r)=>t.getKind(e)===t.getKind(r)));E.matched.forEach(_),w.matched.forEach(_),T.matched.forEach(_),A.matched.forEach(_);for(const e of A.unmatched.referenceData)h(e,u);for(const e of A.unmatched.data)f(e,n);return u}function h(e,t){o(g,e,(e=>function(e,t){const r=l.get(e);r&&(l.delete(e),d.delete(r),t&&t.set(e,r))}(e,t)))}function m(e,t){const r=t||l.get(e)||c(),n=d.get(r);n&&n!==e&&l.delete(n),d.set(r,e),l.set(e,r)}return{markAst:function(e){o(g,e,m)},remarkAst:function(e,t){const r=new Map(l.entries()),n=f(e,t);for(const[e,t]of r)n.has(e)?r.delete(e):(d.delete(t),l.delete(e));return r},nextId:c,nodesToIds:l,idsToNodes:d,remarkWithRef:function(e,t,r,n,o=new Map){return p(e,t,r,n,o,t)},clone:function(){return e(t,r,u(),new Map(d.entries()),new Map(l.entries()))}}},t.findInIdMap=a},42169:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arrayConvertor=void 0;const n=r(5163).__importDefault(r(60270)),o=r(68029),i=r(36136),a=r(81315),s=r(59750),d=r(46726);function l(e){return e.getChildren()[1].getChildren()}function c(e,t){const r=e.elements.indexOf(t);if(r<0)throw new Error("node not found in array");return r}t.arrayConvertor={kind:"array",language:"typescript",isApplicable:e=>n.default.isArrayLiteralExpression(e),convert(e,t){const r=t.getJsDoc(e),n=e.elements.map((e=>t.convertLeaf(e))),i=(0,o.createArrayNode)({astNodeId:t.getNodeId(e),elements:n});return r&&(i.jsdoc=r),i},modifications:{removeChild:(e,r,{childId:n})=>t.arrayConvertor.modifications.removeElement(e,r,{elementId:n}),removeElement(e,t,{elementId:r}){const n=t.getNodeByID(r);if(!n)throw new Error("node does not exist");c(e,n);const o=l(e),a=(0,s.findCommaAfterNode)(o,n);if(a){const e=n.getFullStart(),t=a.getEnd();return[(0,i.ASTChange)(e,t,[],[r])]}{const e=n.getFullStart(),t=n.getEnd();return[(0,i.ASTChange)(e,t,[],[r])]}},insertAtBeginning(e,t,{value:r}){const n=e.elements[0];if(n){const e=n.getFullStart(),o=(0,s.getLeadingSpaces)(n);return[(0,i.ASTChange)(e,e,[o,...t.generate(r),","])]}{const n=e.getStart()+1;return[(0,i.ASTChange)(n,n,t.generate(r))]}},insertAtEnd(e,t,{value:r}){const n=e.elements[e.elements.length-1];if(n){const o=l(e),a=(0,s.findCommaAfterNode)(o,n);let d=n.getEnd(),c=(0,s.getLeadingSpaces)(n);return a?d=a.getEnd():c=","+c,[(0,i.ASTChange)(d,d,[c,...t.generate(r)])]}{const n=e.getStart()+1,o=" ";return[(0,i.ASTChange)(n,n,[o,...t.generate(r)])]}},addChild(e,r,n){if((0,d.isAddInsteadModArgs)(n))return t.arrayConvertor.modifications.setElement(e,r,{elementId:n.insteadOfChildId,value:n.node});if((0,d.isAddBeforeModArgs)(n))return n.beforeChildId?t.arrayConvertor.modifications.insertBefore(e,r,{targetId:n.beforeChildId,value:n.node}):t.arrayConvertor.modifications.insertAtEnd(e,r,{value:n.node});throw new Error("ArrayNode only supports add of kind add-instead or add-before")},insertBefore(e,t,{targetId:r,value:n}){const o=t.getNodeByID(r);if(!o)throw new Error("node does not exist");c(e,o);const a=o.getFullStart(),s=o.getFullText().slice(0,o.getLeadingTriviaWidth()).replace(/./g," ");return[(0,i.ASTChange)(a,a,[s,...t.generate(n),","])]},insertAfter(e,t,{targetId:r,value:n}){const o=t.getNodeByID(r);if(!o)throw new Error("node does not exist");c(e,o);const a=l(e),d=(0,s.findCommaAfterNode)(a,o);let u=o.getEnd(),g=(0,s.getLeadingSpaces)(o);return d?u=d.getEnd():g=","+g,[(0,i.ASTChange)(u,u,[g,...t.generate(n),","])]},setElement(e,t,{elementId:r,value:n}){const o=t.getNodeByID(r);if(!o)throw new Error("node does not exist");c(e,o);const a=o.getStart(),s=o.getEnd();return[(0,i.ASTChange)(a,s,t.generate(n),[r])]},moveBefore(e,t,{elementId:r,targetId:n}){if(r===n)return[];const o=t.getNodeByID(r),d=t.getNodeByID(n);if(!o)throw new Error("node does not exist");if(!d)throw new Error("node does not exist");if(c(e,o)+1===c(e,d))return[];const u=(0,a.printWithIds)(o,t.getNodeID),g=(0,i.ASTChange)(o.getFullStart(),o.getEnd(),[],[r]),f=l(e),p=(0,s.findCommaAfterNode)(f,o);if(p){const e=p.getFullText();u.push(e),g.to+=e.length}else u.push(",");const h=d.getFullStart(),m=[(0,i.ASTChange)(h,h,u)],v=[g],N=(0,s.mergeChanges)(v,m);return[...v,...N]},moveAfter(e,t,{elementId:r,targetId:n}){if(r===n)return[];const o=t.getNodeByID(r),d=t.getNodeByID(n);if(!o)throw new Error("element not found");if(!d)throw new Error("target not found");if(c(e,o)-1===c(e,d))return[];const u=(0,a.printWithIds)(o,t.getNodeID),g=(0,i.ASTChange)(o.getFullStart(),o.getEnd(),[],[r]),f=l(e),p=(0,s.findCommaAfterNode)(f,o);if(p){const e=p.getFullText();u.push(e),g.to+=e.length}else u.push(",");let h=d.getEnd();const m=(0,s.findCommaAfterNode)(f,d);m?h=m.getEnd():u.unshift(",");const v=[(0,i.ASTChange)(h,h,u)],N=[g],I=(0,s.mergeChanges)(N,v);return[...N,...I]}},defaultConfig:{},generate:(e,t)=>[(0,i.startNode)(e.astNodeId),"[",...e.elements.flatMap(((r,n)=>n<e.elements.length-1?t.generate(r).concat(","):t.generate(r))),"]",(0,i.endNode)(e.astNodeId)]}},2927:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(5163).__exportStar(r(42169),t)},55286:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getArgumentsWithCommas=t.callConvertor=void 0;const n=r(5163).__importDefault(r(60270)),o=r(42143),i=r(59750),a=r(36136),s=r(79606);function d(e){return e.getChildren()[2].getChildren()}function l(e,t){const r=e.arguments.indexOf(t);if(r<0)throw new Error("node not found in call arguments");return r}t.callConvertor={kind:"call",language:"typescript",isApplicable:e=>n.default.isCallExpression(e)||n.default.isNewExpression(e),convert(e,t){var r;const i=t.convertLeaf(e.expression),a=null===(r=e.arguments)||void 0===r?void 0:r.map((e=>t.convertLeaf(e)));return(0,o.createCallNode)({astNodeId:t.getNodeId(e),method:i,hasNewKeyword:n.default.isNewExpression(e),args:a})},modifications:{replaceMethod(e,t,{method:r}){const n=t.generate(r);return[{from:e.expression.getStart(),to:e.expression.getEnd(),newContent:n,removedIds:[t.getNodeID(e.expression)]}]},addArg(e,r,{arg:n,beforeArg:o}){const a=r.generate(n);if(o){const n=e.arguments.find((e=>r.getNodeID(e)===o));if(!n)throw new Error("arg not found");const s=(0,i.getLeadingSpaces)(n);if(n===e.arguments[0])return[{from:n.getFullStart(),to:n.getFullStart(),newContent:[s,...a," ,"]}];{const r=(0,i.findCommaBeforeNode)((0,t.getArgumentsWithCommas)(e),n);if(!r)throw new Error("arg comma not found");return[{from:r.getFullStart(),to:r.getFullStart(),newContent:[" ,",s,...a]}]}}return[{from:e.getEnd()-1,to:e.getEnd()-1,newContent:[e.arguments.length&&!e.arguments.hasTrailingComma?", ":" ",...a," "]}]},replaceArg(e,t,{arg:r,oldChildId:n}){const o=e.arguments.find((e=>t.getNodeID(e)===n));if(!o)throw new Error("arg not found");const i=t.generate(r);return[{from:o.getStart(),to:o.getEnd(),newContent:i}]},removeArg(e,r,{argId:n}){const o=e.arguments.find((e=>r.getNodeID(e)===n));if(!o)throw new Error("arg not found");const a=(0,i.findCommaAfterNode)((0,t.getArgumentsWithCommas)(e),o),s=(0,i.findCommaBeforeNode)((0,t.getArgumentsWithCommas)(e),o);return s&&!a?[{from:s.getFullStart(),to:o.getEnd(),newContent:[],removedIds:[n]}]:[{from:o.getFullStart(),to:a?a.getEnd():o.getEnd(),newContent:[],removedIds:[n]}]},moveArgBefore(e,t,{argId:r,targetId:n}){if(r===n)return[];const o=t.getNodeByID(r),c=t.getNodeByID(n);if(!o)throw new Error("node does not exist");if(!c)throw new Error("node does not exist");if(l(e,o)+1===l(e,c))return[];const u=(0,s.printWithIds)(o,t.getNodeID),g=(0,a.ASTChange)(o.getFullStart(),o.getEnd(),[],[r]),f=d(e),p=(0,i.findCommaAfterNode)(f,o);if(p){const e=p.getFullText();u.push(e),g.to+=e.length}else u.push(",");const h=c.getFullStart(),m=[(0,a.ASTChange)(h,h,u)],v=[g],N=(0,i.mergeChanges)(v,m);return[...v,...N]},moveArgAfter(e,t,{argId:r,targetId:n}){if(r===n)return[];const o=t.getNodeByID(r),c=t.getNodeByID(n);if(!o)throw new Error("element not found");if(!c)throw new Error("target not found");if(l(e,o)-1===l(e,c))return[];const u=(0,s.printWithIds)(o,t.getNodeID),g=(0,a.ASTChange)(o.getFullStart(),o.getEnd(),[],[r]),f=d(e),p=(0,i.findCommaAfterNode)(f,o);if(p){const e=p.getFullText();u.push(e),g.to+=e.length}else u.push(",");let h=c.getEnd();const m=(0,i.findCommaAfterNode)(f,c);m?h=m.getEnd():u.unshift(",");const v=[(0,a.ASTChange)(h,h,u)],N=[g],I=(0,i.mergeChanges)(N,v);return[...N,...I]},removeArgsInRange(e,r,{from:n,to:o}){const a=e.arguments.slice(n,null!=o?o:e.arguments.length),s=(0,i.findCommaBeforeNode)((0,t.getArgumentsWithCommas)(e),a[0]),d=(0,i.findCommaAfterNode)((0,t.getArgumentsWithCommas)(e),a[a.length-1]);return[{from:s?o&&o<e.arguments.length?s.getEnd():s.getFullStart():a[0].getFullStart(),to:d?d.getEnd():a[a.length-1].getEnd(),newContent:[],removedIds:a.map((e=>{var t;return null!==(t=r.getNodeID(e))&&void 0!==t?t:""}))}]}},generate:(e,t)=>[(0,a.startNode)(e.astNodeId),...t.generate(e.method),"(",...e.args.flatMap(((e,r)=>r>0?[","].concat(t.generate(e)):t.generate(e))),")",(0,a.endNode)(e.astNodeId)],defaultConfig:{}},t.getArgumentsWithCommas=e=>{const t=[...e.getChildren()];t.reverse();const r=t.find((e=>e.kind===n.default.SyntaxKind.SyntaxList));return r?r.getChildren():[]}},31716:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(5163).__exportStar(r(55286),t)},58555:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.functionConvertor=void 0;const n=r(5163),o=r(56533),i=n.__importDefault(r(60270));t.functionConvertor={kind:"function",language:"typescript",isApplicable:e=>i.default.isFunctionLike(e),convert(e,t){var r;const n=e.name?i.default.isComputedPropertyName(e.name)?t.convertLeaf(e.name):e.name.text:"";if(e.kind===i.default.SyntaxKind.FunctionDeclaration||e.kind===i.default.SyntaxKind.FunctionExpression||e.kind===i.default.SyntaxKind.ArrowFunction||e.kind===i.default.SyntaxKind.MethodDeclaration){if(!e.body)return t.unparsedConvertor.convert(e,t);if(!i.default.isBlock(e.body))return t.unparsedConvertor.convert(e,t);const a=t.getJsDoc(e),s=null!==(r=e.body.statements.map((e=>t.convert(e))).flat())&&void 0!==r?r:[],d=e.parameters.map((e=>t.convertLeaf(e))),l=(0,o.createFunctionNode)({astNodeId:t.getNodeId(e),name:n,body:s,args:d});return a&&(l.jsdoc=a),l}return e.kind,i.default.SyntaxKind.MethodSignature,t.unparsedConvertor.convert(e,t)},modifications:{},defaultConfig:{}}},22784:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(5163).__exportStar(r(58555),t)},19316:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5163);n.__exportStar(r(2927),t),n.__exportStar(r(31716),t),n.__exportStar(r(22784),t),n.__exportStar(r(15115),t),n.__exportStar(r(45668),t),n.__exportStar(r(61274),t),n.__exportStar(r(99661),t),n.__exportStar(r(47995),t),n.__exportStar(r(8994),t),n.__exportStar(r(8554),t),n.__exportStar(r(94165),t),n.__exportStar(r(7387),t)},79378:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.jsxSpreadPropConvertor=t.jsxTextConvertor=t.jsxExpressionConvertor=t.jsxPropConvertor=t.jsxConvertor=t.isJsxNode=void 0;const n=r(5163).__importDefault(r(60270)),o=r(46726),i=r(10766),a=r(36136),s=r(87185),d=r(79606),l=r(34580),c=r(40977),u=r(59392);function g(e){return n.default.isJsxElement(e)||n.default.isJsxFragment(e)||n.default.isJsxSelfClosingElement(e)}t.isJsxNode=g;const f=(e,t,r)=>{const n=e.getNodeByID(t);if(!n)throw new Error(r+" node not found using id "+t);return n},p=(e,t,r)=>!0===r?[t]:[t,"=",...h(e,r)];function h(e,t){return"string"==typeof t?['"'+(0,d.escapeDblQuoteHtml)(t)+'"']:(0,o.isJSXExpressionNode)(t)?e.generate(t):["{",...e.generate(t),"}"]}function m(e,t,r){if(n.default.isJsxSelfClosingElement(e)||r.idx<0||r.idx>=e.children.length)return[];const o=t.getNodeID(e.children[r.idx]),s=o?[o]:[],d=e.children[r.idx];let l=n.default.isJsxText(d)?d.getFullStart():d.getStart(),c=d.getEnd(),u=!1,g=" ";if(r.idx>0){const o=e.children[r.idx-1];n.default.isJsxText(o)&&(0!==o.getText().trim().length?(g=(0,i.getSummarizedEndSpace)(o.getText()),u=!0):(s.push(t.getNodeID(o)),l=o.getFullStart()));const d=t.getNodeID(o);if(r.idx<e.children.length-1){const i=e.children[r.idx+1];if(n.default.isJsxText(i))if(r.idx==e.children.length-2&&0===i.getText().trim().length)c=i.getEnd(),s.push(t.getNodeID(i));else if(u)return s.push(t.getNodeID(i)),[{from:o.getStart(),to:i.getEnd(),newContent:[(0,a.startNode)(d),o.getText().trimEnd(),g,i.getText(),(0,a.endNode)(d)],removedIds:s}]}}return[{from:l,to:c,newContent:[],removedIds:s}]}function v(e,t){const r=t.getNodeByID(e.astNodeId),n=r&&(0,d.printWithIds)(r,t.getNodeID);return n?function(e,t){const r=e.findIndex((e=>(0,a.isStartNode)(e)&&e.id===t)),n=(0,o.findLastIndex)(e,a.isEndNode);return r<0||n>=e.length?[]:e.slice(r,n+1)}(n,e.astNodeId):t.generate(e)}t.jsxConvertor={kind:"jsx-element",language:"typescript",isApplicable:g,convert:(e,t)=>(e.getSourceFile().referencedFiles,{kind:"jsx-element",astNodeId:t.getNodeId(e),type:t.convertLeaf((0,l.getJSXTagName)(e)),children:(0,l.getJSXChildren)(e).map((e=>t.convertLeaf(e))),props:(0,l.getJSXProps)(e).map((e=>t.convertLeaf(e)))}),modifications:{removeChild(e,t,{childId:r}){if(n.default.isJsxSelfClosingElement(e))return[];const o=f(t,r,"node to remove"),i=e.children.indexOf(o);return m(e,t,{idx:i})},removeChildWithIndex:m,addChild(e,t,r){if(!(0,s.isAddBeforeModArgs)(r)&&!(0,s.isAddAfterModArgs)(r)||void 0===r.spaceBeforeId||void 0===r.spaceAfterId)throw new Error("jsx only supports add-before, add-after with spaceBeforeId & spaceAfterId");const{newChild:o,spaceAfterId:i,spaceBeforeId:l}=r,c=(0,s.isAddBeforeModArgs)(r)?r.beforeChildId:function(e,t,r){if(n.default.isJsxSelfClosingElement(e))return;if(void 0===t)return r.getNodeID(e.children[0]);const o=e.children.findIndex((e=>r.getNodeID(e)===t));if(o<0||o==e.children.length-1)return;const i=o+1;return r.getNodeID(e.children[i])}(e,r.afterChildId,t);return((e,t,{beforeChildId:r,spaceBeforeId:o,spaceAfterId:i,newChild:s,isAddingText:l})=>{let c,u,g=-1;if(r){const n=f(t,r,"child to insert before");if(!n)return[];u=n,c=e.children[e.children.indexOf(n)-1],g=n.getFullStart()}else{if(n.default.isJsxSelfClosingElement(e)){const r=(0,d.printWithIds)(e,t.getNodeID);r.find((r=>"string"!=typeof r&&"start"===r.kind&&r.id===t.getNodeID(e))).nodeKind=n.default.SyntaxKind.JsxElement;const c=r.length-[...r].reverse().findIndex((e=>"string"==typeof e&&e.includes("/")))-1;return r.splice(c,1,r[c].replace(/ \/|\//,""),"\n",(0,a.startNode)(o),(0,a.endNode)(o),...s,l?"":"\n",(0,a.startNode)(i),(0,a.endNode)(i),"</",e.tagName.getText(),">"),[{from:e.getFullStart(),to:e.getEnd(),newContent:r}]}e.children.length?(g=e.children[e.children.length-1].getEnd(),c=e.children[e.children.length-1]):n.default.isJsxElement(e)?g=e.openingElement.getEnd():n.default.isJsxFragment(e)&&(g=e.openingFragment.getEnd())}const p=[];if(l){if(c&&n.default.isJsxText(c)){const e=[...s],t=e.findIndex((e=>"string"!=typeof e));return e.splice(t+1,0,c.getText()),[{from:c.getStart(),to:g,newContent:e}]}if(u&&n.default.isJsxText(u)){const e=[...s],t=[...s];t.reverse();const r=t.length-1-t.findIndex((e=>"string"!=typeof e)),n=u.getEnd();return e.splice(r,0,u.text),[{from:g,to:n,newContent:e}]}}return l||c&&n.default.isJsxText(c)||p.push("\n",(0,a.startNode)(o),(0,a.endNode)(o)),p.push(...s),l||u&&n.default.isJsxText(u)||p.push("\n",(0,a.startNode)(i),(0,a.endNode)(i)),[{from:g,to:g,newContent:p}]})(e,t,{beforeChildId:c,isAddingText:(0,s.isNodeOfKind)("jsx-text-element",o),spaceAfterId:i,spaceBeforeId:l,newChild:v(o,t)})},moveChild:c.moveNode,replaceChild(e,t,{childId:r,target:o}){const i=[r],a=f(t,r,"node to remove");return n.default.isJsxSelfClosingElement(e)||-1===e.children.indexOf(a)?[]:[{from:a.getStart(),to:a.getEnd(),newContent:t.generate(o),removedIds:i}]},addProp(e,t,{prop:r}){if(n.default.isJsxFragment(e))throw new Error("cant add prop to a fragment");const o=n.default.isJsxElement(e)?e.openingElement:e;if(function(e,t,r){return e.attributes.properties.some((e=>t.getNodeID(e)===r.astNodeId))}(o,t,r))return[];const i=o.attributes.properties[o.attributes.properties.length-1],d=i?i.getEnd():o.getEnd()-(n.default.isJsxSelfClosingElement(e)?2:1),l=i?i.getFullText().slice(0,i.getLeadingTriviaWidth()):" ";if((0,s.isNodeOfKind)("jsx-prop",r)){const o=p(t,r.name,r.value);if(n.default.isJsxFragment(e))throw new Error("cant add prop to a fragment");return[{from:d,to:d,newContent:[l,(0,a.startNode)(r.astNodeId,n.default.SyntaxKind.JsxAttribute),...o,(0,a.endNode)(r.astNodeId)]}]}return[{from:d,to:d,newContent:[l,...t.generate(r)]}]},removeProp(e,t,{propId:r}){const n=f(t,r,"edited prop");return[{from:n.getFullStart(),to:n.getEnd(),newContent:[],removedIds:[r]}]},setProperty(e,t,{propId:r,value:o}){const i=f(t,r,"edited prop"),s=p(t,i.name.text,o);return[{from:i.getStart(),to:i.getEnd(),newContent:[" ",(0,a.startNode)(r,n.default.SyntaxKind.JsxAttribute),...s,(0,a.endNode)(r)],removedIds:[]}]},setPropertyLike(e,t,{propLike:r}){const n=f(t,r.astNodeId,"edited prop");return[{from:n.getStart(),to:n.getEnd(),newContent:[" ",...t.generate(r)],removedIds:[]}]}},generate(e,t){const r=!e.children.length,i=e.props.reduce(((e,r)=>(e.push(" "),(0,s.isNodeOfKind)("jsx-prop",r)?(e.push((0,a.startNode)(r.astNodeId,n.default.SyntaxKind.JsxAttribute)),"string"==typeof r.value?e.push(r.name+'="'+r.value+'"'):!0===r.value?e.push(r.name):(e.push(r.name+"="),e.push("{ ",...t.generate(r.value)," }")),e.push((0,a.endNode)(r.astNodeId)),e):(e.push(...t.generate(r)),e))),[]);if(r)return[(0,a.startNode)(e.astNodeId),"<",...t.generate(e.type),...i," />",(0,a.endNode)(e.astNodeId)];const d=e.children.reduce(((e,r)=>(e.push(...t.generate(r)),e)),[]),l=(0,o.isUnparsedNode)(e.type)&&"<>"===e.type.code;return[(0,a.startNode)(e.astNodeId),"<",...l?[]:t.generate(e.type),...i,">",...d,"</",...l?[]:t.generate(e.type).filter((e=>"string"==typeof e)),">",(0,a.endNode)(e.astNodeId)]},defaultConfig:{}},t.jsxPropConvertor={kind:"jsx-prop",isApplicable:n.default.isJsxAttribute,language:"typescript",defaultConfig:{},modifications:{setValue(e,t,{value:r}){const n=p(t,e.name.getText(),r);return[{from:e.getStart(),to:e.getEnd(),newContent:n}]},addChild(e,r,n){if(!(0,s.isAddInsteadModArgs)(n))throw new Error("props only support add instead");return t.jsxPropConvertor.modifications.setValue(e,r,{value:(0,i.getJSXPropValue)(n.newChild)})},removeChild(e,t,{childId:r,placeholderId:n}){if(!e.initializer)return[];if(!n)throw new Error("no new id for null to replace prop value");return[{from:e.initializer.getStart(),to:e.initializer.getEnd(),removedIds:[r],newContent:h(t,(0,o.createNullNode)({astNodeId:n}))}]}},convert(e,t){const r=e.name.text,o=e.initializer,i=t.getNodeId(e);return o?n.default.isStringLiteral(o)?{kind:"jsx-prop",astNodeId:i,name:r,value:(0,u.decode)(o.text)}:{kind:"jsx-prop",astNodeId:i,name:r,value:o.expression?t.convertLeaf(o.expression):void 0}:{kind:"jsx-prop",astNodeId:i,name:r,value:!0}}},t.jsxExpressionConvertor={kind:"jsx-expression",language:"typescript",isApplicable:e=>n.default.isJsxExpression(e),convert(e,t){const r={kind:"jsx-expression",astNodeId:t.getNodeId(e),code:e.getText()};return e.expression&&(r.expression=t.convertLeaf(e.expression)),r},modifications:{setExpression(e,t,{expression:r}){const n=t.generate(r);return e.expression?[{from:e.expression.getStart(),to:e.expression.getEnd(),newContent:n}]:[]},removeChild:(e,t,{childId:r,placeholderId:n})=>e.expression&&n?[{from:e.expression.getStart(),to:e.expression.getEnd(),removedIds:[r],newContent:t.generate((0,o.createNullNode)({astNodeId:n}))}]:[],addChild(e,t,r){if(!(0,s.isAddInsteadModArgs)(r))throw new Error("jsx-expression only supports add-instead");return[{from:e.getStart(),to:e.getEnd(),removedIds:[r.insteadOfChildId],newContent:["{",...t.generate(r.newChild),"}"]}]}},generate:(e,t)=>[(0,a.startNode)(e.astNodeId),"{",...e.expression?t.generate(e.expression):[],"}",(0,a.endNode)(e.astNodeId)],defaultConfig:{}},t.jsxTextConvertor={kind:"jsx-text-element",language:"typescript",isApplicable:e=>n.default.isJsxText(e),convert:(e,t)=>({kind:"jsx-text-element",astNodeId:t.getNodeId(e),value:(0,o.trimJsxText)(e.getFullText())}),modifications:{setValue(e,t,r){const n=t.getNodeID(e),o=r.value.trimStart()!==r.value;return[{from:e.getFullStart(),to:e.getEnd(),newContent:n?o?[r.value[0],(0,a.startNode)(n),r.value.slice(1),(0,a.endNode)(n)]:[(0,a.startNode)(n),r.value,(0,a.endNode)(n)]:[r.value]}]}},generate(e){const t=e.value.trimStart();return[e.value.slice(0,e.value.length-t.length),(0,a.startNode)(e.astNodeId),t,(0,a.endNode)(e.astNodeId)]},defaultConfig:{}},t.jsxSpreadPropConvertor={kind:"jsx-spread-prop",language:"typescript",isApplicable:e=>n.default.isJsxSpreadAttribute(e),convert:(e,t)=>(0,o.createJSXSpreadPropertyNode)({astNodeId:t.getNodeId(e),value:t.convertLeaf(e.expression)}),modifications:{},generate:(e,t)=>[(0,a.startNode)(e.astNodeId),"{ ...",...t.generate(e.value)," }",(0,a.endNode)(e.astNodeId)],defaultConfig:{}}},15115:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5163);n.__exportStar(r(79378),t),n.__exportStar(r(34580),t)},34580:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getJSXProps=t.getJSXChildren=t.getJSXTagName=void 0;const n=r(5163).__importDefault(r(60270));t.getJSXTagName=function(e){return n.default.isJsxElement(e)?e.openingElement.tagName:n.default.isJsxSelfClosingElement(e)?e.tagName:e.openingFragment},t.getJSXChildren=function(e){return n.default.isJsxElement(e)?e.children:n.default.isJsxSelfClosingElement(e)?n.default.createNodeArray():n.default.isJsxFragment(e)?e.children:n.default.createNodeArray()},t.getJSXProps=function(e){let t;return t=n.default.isJsxElement(e)?e.openingElement.attributes.properties:n.default.isJsxSelfClosingElement(e)?e.attributes.properties:n.default.createNodeArray(),t}},1249:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.namedPropertyConvertor=t.getTrailingCommaNode=t.convertPropertyName=t.objectConvertor=void 0;const n=r(5163).__importDefault(r(60270)),o=r(23987),i=r(4697),a=r(36136),s=r(58665),d=r(61285),l=r(87185);function c(e,t,r,n,o,i){if((0,l.isNodeOfKind)("string",n)){let d=n.value;return(0,s.isValidIdentifierName)(d)||(d=`'${(0,s.escapeSingleQuote)(d)}'`),[(0,a.ASTChange)(t,t,[r,(0,a.startNode)(i),(0,a.startNode)(n.astNodeId),`${d}`,(0,a.endNode)(n.astNodeId),": ",...e.generate(o),(0,a.endNode)(i)])]}return[(0,a.ASTChange)(t,t,[r,(0,a.startNode)(i),...e.generate(n),": ",...e.generate(o),(0,a.endNode)(i)])]}function u(e,t,r){const n=t.getNodeId(e),o=f(e.name,t),i=(0,d.createPropertyNode)({astNodeId:n,name:o,initializer:t.convertLeaf(e.initializer)});return r&&(i.jsdoc=r),i}function g(e,t){if((0,l.isNodeOfKind)("property",e)){const r=(0,l.isNodeOfKind)("string",e.name)?(0,s.isValidIdentifierName)(e.name.value)?[(0,a.startNode)(e.name.astNodeId),e.name.value,(0,a.endNode)(e.name.astNodeId)]:[(0,a.startNode)(e.name.astNodeId),`'${e.name.value}'`,(0,a.endNode)(e.name.astNodeId)]:t(e.name);return[(0,a.startNode)(e.astNodeId),...r,":",...t(e.initializer),(0,a.endNode)(e.astNodeId)]}throw"TODO"}function f(e,t){return n.default.isComputedPropertyName(e)?t.convertLeaf(e):(0,i.createStringNode)({astNodeId:t.getNodeId(e),value:e.text})}function p(e){if(e.properties.hasTrailingComma){const t=e.getChildren()[1].getChildren();return t[t.length-1]}}t.objectConvertor={kind:"object",language:"typescript",isApplicable:e=>n.default.isObjectLiteralExpression(e),convert(e,t){const r=t.getJsDoc(e),i=e.properties.map((e=>{const r=t.getJsDoc(e);if(n.default.isPropertyAssignment(e)||n.default.isShorthandPropertyAssignment(e)||n.default.isMethodDeclaration(e)||n.default.isGetAccessorDeclaration(e)||n.default.isSetAccessorDeclaration(e)){const i=t.getNodeId(e),a=f(e.name,t);if(n.default.isPropertyAssignment(e))return u(e,t,r);if(n.default.isShorthandPropertyAssignment(e)){const n=(0,d.createPropertyNode)({astNodeId:i,name:a,initializer:t.convertLeaf(e.name)});return r&&(n.jsdoc=r),n}if(n.default.isMethodDeclaration(e)||n.default.isGetAccessorDeclaration(e)||n.default.isSetAccessorDeclaration(e)){const n=(0,d.createPropertyNode)({astNodeId:i,name:a,initializer:t.convertLeaf(e)});return r&&(n.jsdoc=r),n}return(0,o.createUnparsedNode)({astNodeId:i,code:""})}return t.convertLeaf(e)})),a=(0,d.createObjectNode)({astNodeId:t.getNodeId(e),properties:i});return r&&(a.jsdoc=r),a},modifications:{addProperty(e,t,{name:r,value:n,propertyId:o}){const i=e.properties[e.properties.length-1];if(i){const a=p(e);let s=i.getEnd(),d=i.getFullText().slice(0,i.getLeadingTriviaWidth()).replace(/./g," ");return a?s=a.getEnd():d=","+d,c(t,s,d,r,n,o)}return c(t,e.getStart()+1,"\n",r,n,o)},removeProperty(e,t,{childId:r}){const o=[r],i=t.getNodeByID(r);if(!i||!n.default.isObjectLiteralElementLike(i))throw new Error("Cannot find prop to remove");if(-1===e.properties.indexOf(i))return[];const a=i.getFullStart();let s=i.getEnd();const d=e.getChildren()[1].getChildren(),l=d.findIndex((e=>e===i));let c=d[l+1];if(c&&","===c.getText()&&(c=d[l+2]),c||(c=e.getChildren()[2]),c){const e=c.getFullText().slice(0,c.getLeadingTriviaWidth());s=/\S/.test(e)?c.getFullStart():c.getStart()}return[{from:a,to:s,newContent:[],removedIds:o}]},setProperty(e,t,{childId:r,value:o}){const i=t.getNodeByID(r);if(!i||!e.properties.includes(i))throw new Error("node not found for rename");if(!n.default.isPropertyAssignment(i))throw new Error("node is not a propery assignment");return[(0,a.ASTChange)(i.initializer.getStart(),i.initializer.getEnd(),[...t.generate(o)])]},renameProperty(e,t,{childId:r,newName:o}){const i=t.getNodeByID(r);if(!i||!e.properties.includes(i))throw new Error("node not found for rename");if(!n.default.isPropertyAssignment(i))throw new Error("node is not a propery assignment");let d=o;(0,s.isValidIdentifierName)(o)||(d=`'${o}'`);const l=t.getNodeID(i.name);return[(0,a.ASTChange)(i.name.getStart(),i.name.getEnd(),[(0,a.startNode)(l),d,(0,a.endNode)(l)])]}},defaultConfig:{},generate:(e,t)=>[(0,a.startNode)(e.astNodeId),"{\n",...e.properties.flatMap(((r,n)=>n<e.properties.length-1?g(r,t.generate).concat(","):g(r,t.generate))),"}",(0,a.endNode)(e.astNodeId)]},t.convertPropertyName=f,t.getTrailingCommaNode=p,t.namedPropertyConvertor={language:"typescript",kind:"property",isApplicable:n.default.isPropertyAssignment,convert:u,modifications:{removeChild(e,t,{childId:r,placeholderId:n}){if(void 0===n)throw new Error("property needs a placeholderId to remove value, and replace it with null");return[{from:e.initializer.getStart(),to:e.initializer.getEnd(),removedIds:[r],newContent:t.generate((0,i.createNullNode)({astNodeId:n}))}]}},defaultConfig:{},generate:(e,t)=>g(e,t.generate)}},45668:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(5163).__exportStar(r(1249),t)},53235:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.undefinedConvertor=t.nullConvertor=t.booleanConvertor=t.numberConvertor=t.stringConvertor=void 0;const n=r(5163),o=r(36136),i=n.__importDefault(r(60270)),a=r(4697),s=r(58665);t.stringConvertor={language:"typescript",isApplicable:e=>i.default.isStringLiteral(e),convert:(e,t)=>(0,a.createStringNode)({astNodeId:t.getNodeId(e),value:e.text}),modifications:{setValue:(e,t,{value:r})=>(r=(e.getText().startsWith("'")?s.escapeSingleQuote:s.escapeDblQuote)(r),[(0,o.ASTChange)(e.getStart()+1,e.getEnd()-1,[r])])},generate(e,t,r){const n=r.useSingleQuotes?s.escapeSingleQuote:s.escapeDblQuote,i=r.useSingleQuotes?"'":'"';return[(0,o.startNode)(e.astNodeId),i+n(e.value)+i,(0,o.endNode)(e.astNodeId)]},kind:"string",defaultConfig:{useSingleQuotes:!0}},t.numberConvertor={language:"typescript",isApplicable:e=>!!i.default.isNumericLiteral(e)||!!i.default.isPrefixUnaryExpression(e)&&e.operator===i.default.SyntaxKind.MinusToken&&i.default.isNumericLiteral(e.operand),convert:(e,t)=>i.default.isNumericLiteral(e)?(0,a.createNumberNode)({astNodeId:t.getNodeId(e),value:parseFloat(e.text)}):(0,a.createNumberNode)({astNodeId:t.getNodeId(e),value:-1*parseFloat(e.operand.text)}),modifications:{setValue(e,t,{value:r}){const n=t.getNodeID(e);return[(0,o.ASTChange)(e.getStart(),e.getEnd(),[(0,o.startNode)(n),r.toString(),(0,o.endNode)(n)])]}},generate:e=>[(0,o.startNode)(e.astNodeId),e.value.toString(),(0,o.endNode)(e.astNodeId)],kind:"number",defaultConfig:{}},t.booleanConvertor={language:"typescript",isApplicable:e=>e.kind===i.default.SyntaxKind.TrueKeyword||e.kind===i.default.SyntaxKind.FalseKeyword,convert:(e,t)=>(0,a.createBooleanNode)({astNodeId:t.getNodeId(e),value:e.kind===i.default.SyntaxKind.TrueKeyword}),modifications:{setValue(e,t,{value:r}){const n=t.getNodeID(e);return[(0,o.ASTChange)(e.getStart(),e.getEnd(),[(0,o.startNode)(n),r.toString(),(0,o.endNode)(n)])]}},generate:e=>[(0,o.startNode)(e.astNodeId),e.value.toString(),(0,o.endNode)(e.astNodeId)],kind:"boolean",defaultConfig:{}},t.nullConvertor={language:"typescript",isApplicable:e=>e.kind===i.default.SyntaxKind.NullKeyword,convert:(e,t)=>({astNodeId:t.getNodeId(e),kind:"null"}),modifications:{},generate:e=>[(0,o.startNode)(e.astNodeId),"null",(0,o.endNode)(e.astNodeId)],kind:"null",defaultConfig:{}},t.undefinedConvertor={language:"typescript",isApplicable:e=>i.default.isIdentifier(e)&&"undefined"===e.text,convert:(e,t)=>({astNodeId:t.getNodeId(e),kind:"undefined"}),modifications:{},generate:e=>[(0,o.startNode)(e.astNodeId),"undefined",(0,o.endNode)(e.astNodeId)],kind:"undefined",defaultConfig:{}}},61274:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(5163).__exportStar(r(53235),t)},17853:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.propertyAccessIndexConvertor=t.propertyAccessConvertor=void 0;const n=r(5163).__importDefault(r(60270)),o=r(36136),i=r(51201),a=r(87185),s=r(58665);t.propertyAccessConvertor={language:"typescript",kind:"property-access",isApplicable:e=>n.default.isPropertyAccessExpression(e)||n.default.isElementAccessExpression(e),convert(e,t){const r=t.convertLeaf(e.expression),o=t.convertLeaf(n.default.isPropertyAccessExpression(e)?e.name:e.argumentExpression),s=(0,a.isNodeOfKind)("property-access",r)?[...r.accessPath,o]:[o];return(0,i.createPropertyAccessNode)({astNodeId:t.getNodeId(e),reference:(0,a.isNodeOfKind)("property-access",r)?r.reference:r,accessPath:s})},modifications:{setValue(e,t,{reference:r,accessPath:n}){const i=[];for(const e of n)i.push(...t.generate(e));const a=t.getNodeID(e);return a?[(0,o.ASTChange)(e.getStart(),e.getEnd(),[(0,o.startNode)(a),...t.generate(r),...i,(0,o.endNode)(a)])]:[]}},defaultConfig:{},generate(e,t){const r=[];for(const n of e.accessPath)r.push(...t.generate(n));return[(0,o.startNode)(e.astNodeId),...t.generate(e.reference),...r,(0,o.endNode)(e.astNodeId)]}},t.propertyAccessIndexConvertor={language:"typescript",kind:"property-access-index",isApplicable:e=>e.parent&&(n.default.isPropertyAccessExpression(e.parent)&&e.parent.name===e||n.default.isElementAccessExpression(e.parent)&&e.parent.argumentExpression===e&&!n.default.isIdentifier(e)),convert:(e,t)=>n.default.isIdentifier(e)||n.default.isStringLiteral(e)?{astNodeId:t.getNodeId(e),kind:"property-access-index",accessKey:e.text}:{astNodeId:t.getNodeId(e),kind:"property-access-index",accessKey:parseFloat(e.text)},modifications:{},defaultConfig:{},generate:(e,t)=>[(0,o.startNode)(e.astNodeId),"number"==typeof e.accessKey||e.accessKey===`${parseInt(e.accessKey)}`?`[${e.accessKey}]`:(0,s.isValidIdentifierName)(e.accessKey)?`.${e.accessKey}`:`['${e.accessKey}']`,(0,o.endNode)(e.astNodeId)]}},99661:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(5163).__exportStar(r(17853),t)},1491:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.referenceConvertor=t.getParentImportDeclaration=void 0;const n=r(5163).__importDefault(r(60270)),o=r(89038),i=r(36136),a=r(48475);function s(e){if(n.default.isImportDeclaration(e))return e;if(n.default.isSourceFile(e))throw new Error("Cannot find parent import declaration");return s(e.parent)}t.getParentImportDeclaration=s,t.referenceConvertor={language:"typescript",isApplicable:e=>{if(n.default.isIdentifier(e)){if(((0,a.isNamedDeclaration)(e.parent)||(0,a.isNamedAccess)(e.parent)||(0,a.isNamedAssignment)(e.parent))&&e.parent.name===e)return!1;if((n.default.isJsxSelfClosingElement(e.parent)||n.default.isJsxOpeningElement(e.parent))&&e.parent.tagName===e&&e.text[0]===e.text[0].toLowerCase())return!1;const t=(0,a.getReferenceTarget)(e);if(t)return!(0,a.isReferencableDeclaration)(t)||t.name!==e}return!1},convert(e,t){var r,i;const s=(0,a.getReferenceTarget)(e),d=s?t.getNodeId(s):void 0;if(s){if(n.default.isImportSpecifier(s)&&n.default.isStringLiteral(s.parent.parent.parent.moduleSpecifier))return(0,o.createFileReferenceNode)({astNodeId:t.getNodeId(e),targetExport:(s.propertyName||s.name).getText(),targetFile:s.parent.parent.parent.moduleSpecifier.text,targetId:d});if(n.default.isImportClause(s)&&n.default.isStringLiteral(s.parent.moduleSpecifier))return(0,o.createFileReferenceNode)({astNodeId:t.getNodeId(e),targetExport:"default",symbolName:null===(i=null===(r=s.parent.importClause)||void 0===r?void 0:r.name)||void 0===i?void 0:i.getText(),targetFile:s.parent.moduleSpecifier.text,targetId:d})}return(0,o.createReferenceNode)({astNodeId:t.getNodeId(e),name:e.text,targetId:d})},kind:"ref",modifications:{changeModuleSpecifier(e,t,{moduleSpecifier:r}){const n=(0,a.getReferenceTarget)(e);if(!n)throw new Error("Cannot resolve ref");const o=s(n);return[{from:o.moduleSpecifier.getStart()+1,to:o.moduleSpecifier.getEnd()-1,newContent:[r]}]}},generate(e,t){if("between-file"===e.refType){if(t.ensureImport)return[(0,i.startNode)(e.astNodeId),t.ensureImport(e.targetFile,e.targetExport),(0,i.endNode)(e.astNodeId)];throw new Error("Language Plugin does not support adding imports")}return[(0,i.startNode)(e.astNodeId),e.name,(0,i.endNode)(e.astNodeId)]},defaultConfig:{}}},47995:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(5163).__exportStar(r(1491),t)},35018:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sourceFileConvertor=void 0;const n=r(5163).__importDefault(r(60270)),o=r(36136);t.sourceFileConvertor={language:"typescript",isApplicable:e=>n.default.isSourceFile(e),convert:(e,t)=>({kind:"root",astNodeId:t.getNodeId(e),statements:e.statements.map((e=>t.convert(e))).flat()}),kind:"root",modifications:{addStatement(e,t,{newStatement:r,beforeStatementId:n}){let i=e.getEnd();if(n){const r=t.getNodeByID(n);if(!r)throw new Error("reference node not found");let o=r;for(;o.parent!==e;)o=o.parent;i=o.getStart()}return[(0,o.ASTChange)(i,i,t.generate(r))]},removeStatement(e,t,{}){throw new Error('modification "removeStatement" not supported in TS')}},defaultConfig:{}}},8994:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(5163).__exportStar(r(35018),t)},6679:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.templateStringConvertor=void 0;const n=r(5163).__importDefault(r(60270)),o=r(36136),i=r(3097);function a(e,t,r,a){if(n.default.isNoSubstitutionTemplateLiteral(e)){if((0,i.isTemplateText)(r)){const t=a?e.getEnd()-1:e.getStart()+1;return[(0,o.ASTChange)(t,t,[r.text],[])]}const n=t.getNodeID(e),s=[(0,o.startNode)(n),a?(0,o.startNode)(n+"_text"):"","`",a?e.text:"","${",a?(0,o.endNode)(n+"_text"):"",...t.generate(r),a?"":(0,o.startNode)(n+"_text"),"}",a?"":e.text,"`",a?"":(0,o.endNode)(n+"_text"),(0,o.endNode)(n)];return[(0,o.ASTChange)(e.getStart(),e.getEnd(),s,[])]}if(!a||a===e.head){if((0,i.isTemplateText)(r)){const n=t.getNodeID(e.head),i=a?e.head.text+r.text:r.text+e.head.text;return[(0,o.ASTChange)(e.head.getStart(),e.head.getEnd(),[(0,o.startNode)(r.astNodeId),"`",i,"${",(0,o.endNode)(r.astNodeId)],[n])]}if(a)return[(0,o.ASTChange)(e.head.getEnd(),e.head.getEnd(),[(0,o.startNode)(r.astNodeId+"_span"),...t.generate(r),"}${",(0,o.endNode)(r.astNodeId+"_span")],[])];{const n=t.getNodeID(e.head);return[(0,o.ASTChange)(e.getStart(),e.getStart()+3,[(0,o.startNode)(r.astNodeId+"_head"),"`${",(0,o.endNode)(r.astNodeId+"_head"),(0,o.startNode)(r.astNodeId+"_span"),...t.generate(r),"}${",(0,o.endNode)(r.astNodeId+"_span")],[n])]}}const s=a.parent;if((0,i.isTemplateText)(r)){const e=n.default.isTemplateMiddleOrTemplateTail(a)?a.text+r.text:r.text+s.literal.text;return[(0,o.ASTChange)(s.literal.getStart(),s.literal.getEnd(),[(0,o.startNode)(r.astNodeId),"}",e,n.default.isTemplateTail(s.literal)?"`":"${",(0,o.endNode)(r.astNodeId)],[])]}if(n.default.isTemplateMiddle(a))return[(0,o.ASTChange)(a.getEnd(),a.getEnd(),[(0,o.startNode)(r.astNodeId+"_span"),"}${",...t.generate(r),(0,o.endNode)(r.astNodeId+"_span")],[])];if(n.default.isTemplateTail(a)){const e=t.getNodeID(a);return[(0,o.ASTChange)(a.getStart(),a.getEnd(),[(0,o.startNode)(e),"}",a.text,"${",(0,o.endNode)(e),(0,o.startNode)(r.astNodeId+"_span"),...t.generate(r),"}`",(0,o.endNode)(r.astNodeId+"_span")],[])]}const d=t.getNodeID(s.literal);return[(0,o.ASTChange)(s.literal.getStart(),s.literal.getEnd(),["}${",...t.generate(r),(0,o.startNode)(d),"}",s.literal.text,n.default.isTemplateTail(s.literal)?"`":"${",(0,o.endNode)(d)],[])]}t.templateStringConvertor={language:"typescript",kind:"template-string",isApplicable:e=>n.default.isTemplateLiteral(e),convert(e,t){if(n.default.isNoSubstitutionTemplateLiteral(e))return(0,i.createTemplateNode)({astNodeId:t.getNodeId(e),elements:e.text?[(0,i.createTemplateText)({astNodeId:t.getNodeId(e)+"_text",text:e.text})]:[]});const r=[];e.head.text&&r.push((0,i.createTemplateText)({astNodeId:t.getNodeId(e.head),text:e.head.text}));for(const n of e.templateSpans)r.push(t.convertLeaf(n.expression)),n.literal.text&&r.push((0,i.createTemplateText)({astNodeId:t.getNodeId(n.literal),text:n.literal.text}));return(0,i.createTemplateNode)({astNodeId:t.getNodeId(e),elements:r})},modifications:{removeElement(e,t,{elementId:r}){const i=t.getNodeID(e);if(n.default.isNoSubstitutionTemplateLiteral(e)){if(r!==i+"_text")throw new Error("unknown nodeid "+i);return[(0,o.ASTChange)(e.getStart()+1,e.getEnd()-1,[],[r])]}const a=t.getNodeByID(r);if(!a)throw new Error("node does not exist");if(a===e.head)return[(0,o.ASTChange)(a.getStart()+1,a.getEnd(),[],[r])];const s=function(e,t){const r=e.templateSpans.findIndex((e=>e.literal===t||e.expression===t));if(r<0)throw new Error("node not found in template string");return r}(e,a),d=e.templateSpans[s],l=t.getNodeID(d);return a===d.literal?[(0,o.ASTChange)(a.getStart()+1,a.getEnd()-1,[],[r])]:1===e.templateSpans.length?[(0,o.ASTChange)(e.getStart(),e.getEnd(),[(0,o.startNode)(i),"`",e.head.text,d.literal.text,"`",(0,o.endNode)(i)],[r])]:[(0,o.ASTChange)(a.getFullStart()-2,a.getEnd()+1,[],[r,l])]},insertAtBeginning:(e,t,{value:r})=>a(e,t,r),insertAtEnd:(e,t,{value:r})=>n.default.isNoSubstitutionTemplateLiteral(e)?a(e,t,r,e):a(e,t,r,e.templateSpans[e.templateSpans.length-1].literal),insertBefore(e,t,{targetId:r,value:o}){if(n.default.isNoSubstitutionTemplateLiteral(e))return a(e,t,o);const i=t.getNodeByID(r);if(!i)throw new Error("node does not exist");if(i===e.head)return a(e,t,o);const s=i.parent;if(s.literal===i)return a(e,t,o,s.expression);const d=e.templateSpans.indexOf(s);return a(e,t,o,0===d?e.head:e.templateSpans[d-1].literal)},insertAfter(e,t,{targetId:r,value:n}){const o=t.getNodeByID(r);if(!o)throw new Error("node does not exist");return a(e,t,n,o)}},defaultConfig:{},generate(e,t,r){const n=e.elements[0];return 0===e.elements.length?[(0,o.startNode)(e.astNodeId),"``",(0,o.endNode)(e.astNodeId)]:1===e.elements.length&&(0,i.isTemplateText)(n)?[(0,o.startNode)(e.astNodeId),"`",n.text,"`",(0,o.endNode)(e.astNodeId)]:[(0,o.startNode)(e.astNodeId),...e.elements.reduce(((e,t)=>{const r=e[e.length-1];return r&&(0,i.isTemplateText)(r)&&(0,i.isTemplateText)(t)?r.text+=t.text:e.push(t),e}),[]).flatMap(((e,r,n)=>{const a=[];return(0,i.isTemplateText)(e)?(a.push((0,o.startNode)(e.astNodeId)),a.push(0===r?"`":"}"),a.push(e.text),a.push(r===n.length-1?"`":"${"),a.push((0,o.endNode)(e.astNodeId))):(0===r?a.push("`${"):(0,i.isTemplateText)(n[r-1])||a.push("}${"),a.push(...t.generate(e)),r===n.length-1&&a.push("}`")),a})),(0,o.endNode)(e.astNodeId)]}}},8554:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(5163).__exportStar(r(6679),t)},7387:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.trinaryConvertor=void 0;const n=r(5163).__importDefault(r(60270)),o=r(36136),i=r(46726);function a(e,t,r,n){if(!e)return[];const o=(0,i.createNullNode)({astNodeId:r}),a=n.generate(o);return[{from:e.getStart(),to:e.getEnd(),newContent:a,removedIds:[t]}]}function s(e,t,r,n,o){return{kind:"trinary",astNodeId:e.getNodeId(t),condition:e.convertLeaf(r),whenTrue:e.convertLeaf(n),whenFalse:e.convertLeaf(o)}}function d(e,t,r,n,i){return function(e,t,r,n){return[(0,o.startNode)(e),...t,` ${r} `,...n,(0,o.endNode)(e)]}(e,i(t),r,i(n))}t.trinaryConvertor={kind:"trinary",language:"typescript",isApplicable:e=>{return n.default.isConditionalExpression(e)||(t=e,n.default.isBinaryExpression(t)&&(t.operatorToken.kind===n.default.SyntaxKind.BarBarToken||t.operatorToken.kind===n.default.SyntaxKind.AmpersandAmpersandToken||t.operatorToken.kind===n.default.SyntaxKind.QuestionQuestionToken));var t},convert(e,t){if(n.default.isBinaryExpression(e)&&(e.operatorToken.kind==n.default.SyntaxKind.BarBarToken||e.operatorToken.kind==n.default.SyntaxKind.QuestionQuestionToken))return s(t,e,e.left,e.left,e.right);if(n.default.isBinaryExpression(e)&&e.operatorToken.kind==n.default.SyntaxKind.AmpersandAmpersandToken)return s(t,e,e.left,e.right,e.left);if(n.default.isConditionalExpression(e))return s(t,e,e.condition,e.whenTrue,e.whenFalse);throw new Error(`Conditional Expression cannot convert node with kind: ${e.getFullText()}`)},modifications:{addChild(e,t,r){if(!(0,i.isAddInsteadModArgs)(r))throw new Error("trinary only supports add-instead");const n=t.getNodeByID(r.insteadOfChildId);if(!n)throw new Error(`can't find child with id: ${r.insteadOfChildId}`);const o=(0,i.isJSXExpressionNode)(r.newChild)?r.newChild.expression:r.newChild;if(!o)throw new Error("can't add empty node");return[{from:n.getFullStart(),to:n.getEnd(),newContent:t.generate(o),removedIds:[r.insteadOfChildId]}]},removeChild:(e,t,{childId:r,placeholderId:o})=>n.default.isBinaryExpression(e)?function(e,t,r,n){return a(function(e,t,r){return function(e,t,r){return e.getNodeID(t.left)===r}(r,e,t)?e.left:function(e,t,r){return e.getNodeID(t.right)===r}(r,e,t)?e.right:void 0}(e,r,t),r,n,t)}(e,t,r,o):function(e,t,r,n){const o=t.getNodeByID(r);if(o&&(function(e,t,r){return e.getNodeID(t.whenTrue)===r}(t,e,r)||function(e,t,r){return e.getNodeID(t.whenFalse)===r}(t,e,r)))return a(o,r,n,t);throw new Error(`childId: ${r} is not whenTrue, or whenFalse`)}(e,t,r,o)},generate:(e,t)=>e.condition.astNodeId===e.whenFalse.astNodeId?d(e.astNodeId,e.condition,"&&",e.whenTrue,t.generate):e.condition.astNodeId===e.whenTrue.astNodeId?d(e.astNodeId,e.condition,"||",e.whenFalse,t.generate):function(e,t){return[(0,o.startNode)(e.astNodeId),...t(e.condition)," ? ",...t(e.whenTrue)," : ",...t(e.whenFalse),(0,o.endNode)(e.astNodeId)]}(e,t.generate),defaultConfig:{}}},35770:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.variableDeclarationConvertor=void 0;const n=r(5163).__importDefault(r(60270)),o=r(36136);function i(e){const t=e.parent;return t.flags&n.default.NodeFlags.Const?"const":t.flags&n.default.NodeFlags.Let?"let":"var"}t.variableDeclarationConvertor={language:"typescript",isApplicable:e=>e.kind===n.default.SyntaxKind.VariableDeclaration,convert(e,t){e.kind;const r=i(e),o=t.getJsDoc(e),a={kind:"variable",varKind:r,astNodeId:t.getNodeId(e),name:e.name.kind===n.default.SyntaxKind.Identifier?e.name.text:t.convertLeaf(e.name),initializer:e.initializer?t.convertLeaf(e.initializer):void 0};return o&&(a.jsdoc=o),a},kind:"variable",modifications:{inlineRename:(e,t,{name:r})=>[(0,o.ASTChange)(e.name.getStart(),e.name.getEnd(),[r])],changeVarKind(e,t,{varKind:r}){const n=i(e).length,a=e.parent.getStart();return[(0,o.ASTChange)(a,a+n,[r])]}},generate(e,t){let r=[];e.initializer&&(r=[" = ",...t.generate(e.initializer)]);const n="string"==typeof e.name?[e.name]:t.generate(e.name);return["\n",e.varKind," ",(0,o.startNode)(e.astNodeId),...n,...r,(0,o.endNode)(e.astNodeId),";"]},defaultConfig:{}}},94165:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(5163).__exportStar(r(35770),t)},29231:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parenthesizedExpressionPassThrough=t.variableStatementPassThrough=t.expressionStatementPassThrough=void 0;const n=r(5163).__importDefault(r(60270));t.expressionStatementPassThrough={language:"typescript",isApplicable:e=>e.kind===n.default.SyntaxKind.ExpressionStatement,getChildren:e=>e.expression},t.variableStatementPassThrough={language:"typescript",isApplicable:e=>e.kind===n.default.SyntaxKind.VariableStatement,getChildren:e=>e.declarationList.declarations},t.parenthesizedExpressionPassThrough={language:"typescript",isApplicable:e=>n.default.isParenthesizedExpression(e),getChildren:e=>e.expression}},96589:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectionConvertor=void 0;const n=r(32393),o=r(88206);function i(e){if(Array.isArray(e)){if(1===e.length)return e[0];throw new Error("Expected one item or array with length of 1 but got array with length of "+e.length)}return e}t.ProjectionConvertor=class{constructor(e,t,r,i=(0,n.createIdentificationService)(t)){this.filePath=e,this.lang=t,this.sourceFile=r,this.idService=i,this.currentConvertor=this.lang.defaultRootConvertor,this.convertors=new Map,this.passThroughConvertors=new Map,this.idService.markAst(this.sourceFile),this.unparsedConvertor=(0,o.genericUnParsedConvertor)(t)}registerConvertor(e,t=this.lang.defaultRootConvertor){const r=this.convertors.get(t);r?r.push(e):this.convertors.set(t,[e])}registerPassThroughConvertor(e,t=this.lang.defaultRootConvertor){const r=this.passThroughConvertors.get(t);r?r.push(e):this.passThroughConvertors.set(t,[e])}getConvertors(e){return(this.convertors.get(this.lang.defaultRootConvertor)||[]).concat(this.convertors.get(e)||[])}getPassConvertors(e){return(this.passThroughConvertors.get(this.lang.defaultRootConvertor)||[]).concat(this.passThroughConvertors.get(e)||[])}convertFrom(e){const t=this.idService.idsToNodes.get(e);if(!t)throw new Error("Could not find node with astNodeId: "+e);return this.convertLeaf(t)}convertRoot(){return i(this.convert(this.sourceFile))}convert(e){const t=this.getConvertors(this.currentConvertor).find((t=>t.isApplicable(e,this)));if(t)return t.convert(e,this);{const t=this.getPassConvertors(this.currentConvertor).find((t=>t.isApplicable(e)));if(t){const r=t.getChildren(e,this);return Array.isArray(r)?r.map((e=>this.convert(e))).flat():this.convert(r)}return this.unparsedConvertor.convert(e,this)}}convertLeaf(e){return i(this.convert(e))}getNodeId(e){const t=this.idService.nodesToIds.get(e);if(!t)throw new Error(`Missing ast node id: ${e.kind}`);return t}getJsDoc(e){return this.lang.getJSDocs(e)}}},59541:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.editProjection=t.createIdMap=void 0;const n=r(60814),o=r(60109),i=r(91570),a=r(88206),s=r(79606);function d(e,t=0,r={}){for(const n of e)if("string"==typeof n)t+=n.length;else if("start"===n.kind){if(r[n.id])throw new Error("2 positions determind for same node");r[n.id]={start:t,nodeKind:n.nodeKind}}else{if(!r[n.id])throw new Error("node end declared without start");r[n.id].end=t}return r}function l(e,t,r,n,o,i,a){const s={},d=new Set,l=null==a?void 0:a(s,d),c=l&&((e,r)=>l(t,e,r)),u=t=>{const n=r.find((e=>e.kind===t.kind));if(!n||!n.generate)throw new Error("node does not support generation "+t.kind);return n.generate(t,{generate:u,ensureImport:c,getFilePath:()=>e},o[t.kind]||n.defaultConfig)};return{api:{convertors:r,generate:u,getNodeByID:e=>n.idsToNodes.get(e),getNodeID:e=>n.nodesToIds.get(e),getFilePath:()=>e,getConfig(e){var t,n;const i=r.find((t=>t.kind===e));return null!==(n=null!==(t=o[e])&&void 0!==t?t:null==i?void 0:i.defaultConfig)&&void 0!==n?n:{}},lang:i},addedToFile:s}}t.createIdMap=d,t.editProjection=function(e,t,r,c,u,g,f,p,h=!1,m,v){let N=r.getFullText(c);const I=[],S=(0,a.genericUnParsedConvertor)(r);let x={};for(const a of f){const C=g.getASTInfo(t).idToNode.get(a.targetId),y=u.idsToNodes.get(a.targetId);if(!y)throw new Error("simple ast recompute back, node not found");if(!C)throw new Error("simple ast recompute back, simpleASTNode not found");const _=p.find((e=>e.kind===C.kind));if(!_)throw new Error("simple ast recompute back, convertor not found");const E=_.modifications[a.modification],w=[...p,S],{api:T,addedToFile:A}=l(e,c,w,u,m,r,r.createEnsureImport);let P;try{P=E(y,T,a.modificationArgs)}catch(e){P=[]}let b=N;const D=P.map((e=>{const t=e.newContent.filter((e=>"string"==typeof e)).join(""),r=(0,n.stringPartialChangeByValues)(b.slice(e.from,e.to),t,e.from,e.to);return r&&(b=n.stringManipulator.reducer(N,r).value),r})),F=[],M=r.addImports?r.addImports(c,A):[];for(const e of M)F.push(...n.stringManipulator.merger(N,F,[e]).changesToApply);const j=n.stringManipulator.squasher(F)[0];let k;if(j){const e=(0,n.parseChangeMetadata)(j,"");k=e.replacements,D.push(j)}x={};const L=new Set,O=e=>{let t=0;if(!k)return 0;for(const r of k){if(r.from>e)break;t+=r.newLength-r.length}return t};for(const[e,t]of P.entries()){const r=(0,s.mergeWithPreviousChanges)(P.slice(e+1),t),n=r.from+O(r.from);if(d(t.newContent,n,x),t.removedIds)for(const e of t.removedIds)L.add(e)}const B=n.stringManipulator.squasher(D.filter(i.notNullish));if(I.push(...B),h||a!==f[f.length-1]){const i=(0,o.calcChangeRange)(N,B);for(const e of B)N=n.stringManipulator.reducer(N,e).value;const s=c;c=r.updateAst(e,c,N,{span:{start:i.start,length:i.length},newLength:i.newLength}),u.remarkWithRef(c,s,x,[...L]),t=v(t,a)}}const C=r.getFormattingChanges?r.getFormattingChanges(c):[];return I.push(...C),{fileChanges:I,updatedSourceFile:c,idService:u,idMapping:x}}},79063:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupDiagnostics=void 0;const n=r(93849),o=r(60814),i=r(91570),a=r(32393);t.setupDiagnostics=(e,t,r,s,d)=>{const l=e=>{try{const n=s.getLanguage(e.filePath);if(!n)throw new Error("unknown language");const o=t.get(e).getLatest(),i=r.getASTInfo(o),d=new Set(i.idToNode.keys()),l=s.getFileAPI(e.filePath),c=n.getSyntacticDiagnostics?n.getSyntacticDiagnostics(e.filePath):[],u=n.getSemanticDiagnostics?n.getSemanticDiagnostics(e.filePath):[],g=[...c,...u],f=new Map;(0,a.visitAst)(n.getChildren,l.getSourceFile(),(e=>{const t=l.getNodeID(e);if(d.has(t)){const r=g.filter((t=>{const r=t.start||0,o=r+(t.length||0),{end:i,start:a}=n.getPosition(e);return r>=a&&o<=i}));for(const e of r)f.set(e,t)}}));const p=[...f.entries()].reduce(((e,[t,r])=>(e[r]=e[r]||[],e[r].push(t),e)),{});return p}catch(e){return{}}},c=d(l),u=new i.Debouncer((()=>{const e=c.getOpenResources();for(const t of e){const e=(0,o.deserializeId)(t);if(c.isOpen(e)){const t=c.get(e),r=l(e);JSON.stringify(t.getLatest())!==JSON.stringify(r)&&t.applyChange((0,o.fullChange)(r))}}}),300,1e3);return e.watchService.addGlobalListener((()=>{u.trigger().catch(n.reportError)})),c}},52855:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleAstHandler=void 0;const n=r(5163),o=r(60814),i=n.__importDefault(r(78435)),a=r(96589),s=r(59541);t.SimpleAstHandler=class{constructor(e,t,r,n,o,i){this.idService=e,this.fileManager=t,this.convertors=r,this.passConvertorMap=n,this.simpleASTPluginRepo=o,this.projectedNodeManipulator=i,this.openIdServices={},this.openProjections={}}compute({filePath:e,astNodeId:t,parsers:r},n){var o;const i=this.idService.getLanguage(e);if(!i)throw Error(`Unknown language for file path: ${e}`);const s=n.getSerializedId();if(this.openIdServices[e]||(this.openIdServices[e]=this.idService.getFileAPI(e)),this.openProjections[s])this.openProjections[s].sourceFile=this.openIdServices[e].getSourceFile();else{const t=new a.ProjectionConvertor(e,i,this.openIdServices[e].getSourceFile(),this.openIdServices[e].getUnderlyingIDService());for(const e of(null===(o=this.convertors.get(i.language))||void 0===o?void 0:o.values())||[])r.includes(e.kind)&&t.registerConvertor(e);for(const e of this.passConvertorMap.get(i.language)||[])t.registerPassThroughConvertor(e);this.openProjections[s]=t}let d;const l=this.fileManager.get(e),c=new Set([l]);if(!l.isValid())return{status:{valid:!1,message:l.getInvalidationMessage()},value:d,dependencies:c};if(t){const r=this.openIdServices[e].getNodeByID(t);d=this.openProjections[s].convertLeaf(r)}else d=this.openProjections[s].convertRoot();return{status:{valid:!0},value:d,dependencies:c}}recompute(e,t,r,n){const a=e.getSerializedId(),{filePath:s,astNodeId:d}=e.getId(),l=this.idService.getLanguage(s),c=this.fileManager.get(s);if(!l||!c.isValid())return{status:{valid:!1,message:c.getInvalidationMessage()},changes:[],dependencies:n};const u=this.openIdServices[s].getSourceFile();if(this.openIdServices[s].getParsingErrors()||l.getSyntacticDiagnostics&&l.getSyntacticDiagnostics(s).length)return{status:{valid:!1},changes:[],dependencies:n};this.openProjections[a].sourceFile=u;const g=[],f=e.getLatest();let p;if(d){const e=this.openIdServices[s].getNodeByID(d);p=e?this.openProjections[a].convertLeaf(e):f}else p=this.openProjections[a].convertRoot();return(0,i.default)(f,p)||g.push((0,o.fullChange)(p)),{status:{valid:!0},changes:g,dependencies:n}}recomputeBack(e,t,r){const n=t.getId().filePath,o=this.idService.getLanguage(n);if(!o)throw new Error("unknown language");const i=t.getSerializedId(),a=t.getChangesFromVersion(r),d=this.fileManager.get(n),l=this.openIdServices[n],{fileChanges:c,updatedSourceFile:u}=(0,s.editProjection)(n,t.getProjection(r),o,l.getSourceFile(),l.getUnderlyingIDService(),this.simpleASTPluginRepo,a,this.convertors.get(o.language)||[],!0,{},((e,t)=>this.projectedNodeManipulator.reducer(e,t).value));return this.idService.setOpenFile(n,l.getUnderlyingIDService(),u),this.openProjections[i].sourceFile=u,{[this.fileManager.getTypeName()]:{[d.getSerializedId()]:c}}}}},78237:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SourceIdsHandler=void 0;const n=r(60814);t.SourceIdsHandler=class{constructor(e,t){this.idService=e,this.fileManager=t,this.openIds={},this.computeIds=e=>{const t=this.idService.getLanguage(e);if(!t)throw new Error("source id handler, language not found");this.openIds[e]?this.openIds[e].getSourceFile():this.openIds[e]=this.idService.getFileAPI(e);const r=this.openIds[e].getUnderlyingIDService(),n={};return r.idsToNodes.forEach(((e,r)=>{n[r]={...t.getPosition(e),kind:t.getKind(e)}})),n}}compute(e){return{value:this.computeIds(e),dependencies:new Set([this.fileManager.get(e)]),status:{valid:!0}}}recompute(e){const t=this.computeIds(e.getId()),r=[];return JSON.stringify(t)!==JSON.stringify(e.getLatest())&&r.push((0,n.fullChange)(t)),{changes:r,dependencies:new Set([this.fileManager.get(e.getId())]),status:{valid:!0}}}}},4075:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},48150:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const n=r(5163);n.__exportStar(r(17166),t);var o=r(17166);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n.__importDefault(o).default}})},98658:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5163);n.__exportStar(r(13672),t),n.__exportStar(r(13672),t),n.__exportStar(r(52182),t),n.__exportStar(r(91968),t),n.__exportStar(r(70975),t),n.__exportStar(r(95390),t)},89111:(e,t,r)=>{e.exports=r(48150)},60109:(e,t,r)=>{e.exports=r(98658)}}]);
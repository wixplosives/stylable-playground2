(self.webpackChunk_wixc3_stylable_playground_feature=self.webpackChunk_wixc3_stylable_playground_feature||[]).push([[115],{95944:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_DEMO_EXTENSIONS=void 0;const i=n(5163),s=n(93849),o=i.__importDefault(n(34302)),a=i.__importDefault(n(2206)),r=i.__importDefault(n(58729));t.DEFAULT_DEMO_EXTENSIONS=[".board.tsx"];const l=a.default.api.pluggableProjectConfig.entry(t.DEFAULT_DEMO_EXTENSIONS,"demoExtensions");t.default=new s.Feature({id:"demoDiscovery",dependencies:[o.default.asEntity,a.default.asEntity,r.default.asEntity],api:{demoExtensionsConfig:l}})},7822:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n(95944);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i(s).default}})},25109:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.demoPlugin=t.isDemoNode=void 0;const i=n(9240);t.isDemoNode=e=>!!e&&(0,i.isNodeOfKind)("demo",e),t.demoPlugin=(0,i.packPlugin)()({kind:"demo",modifiers:{addEnvironmentProps:(e,{value:t})=>({...e,environmentProps:t}),setName:(e,{name:t})=>({...e,name:i.stringPlugin.modifiers.setValue(e.name,{value:t})}),removeProps:e=>({...e,props:void 0})},createBlank:e=>({kind:"demo",astNodeId:e(),name:i.stringPlugin.createBlank(e),demo:i.nullPlugin.createBlank(e)}),getNodeChildren:e=>{const t=[e.name,e.demo];return e.props&&t.push(e.props),e.environmentProps&&t.push(e.environmentProps),t},replaceChild:(e,t,n)=>{var s,o;if((0,i.isStringNode)(n)&&e.name.astNodeId===t)return{...e,name:n};if((0,i.isObjectNode)(n)&&(null===(s=e.props)||void 0===s?void 0:s.astNodeId)===t)return{...e,props:n};if((0,i.isObjectNode)(n)&&(null===(o=e.environmentProps)||void 0===o?void 0:o.astNodeId)===t)return{...e,environmentProps:n};if(e.demo.astNodeId===t)return{...e,demo:n};throw new Error("child not found")}})},12836:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5163);i.__exportStar(n(24569),t),i.__exportStar(n(25109),t)},24569:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEMO_FILE_TAG=void 0,t.DEMO_FILE_TAG="demo-file-tag"},45272:(e,t,n)=>{e.exports=n(7822)},26709:(e,t,n)=>{e.exports=n(12836)},56830:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5163),s=n(93849),o=i.__importStar(n(2206)),a=i.__importDefault(n(58729));t.default=new s.Feature({id:"discovery",dependencies:[o.default.asEntity,a.default.asEntity],api:{extensionsConfig:s.Slot.withType().defineEntity(o.processingEnv)}})},8221:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const i=n(5163);var s=n(56830);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.__importDefault(s).default}}),i.__exportStar(n(56830),t)},34302:(e,t,n)=>{e.exports=n(8221)},22856:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENTS_TASK_ID=t.FILE_COMPONENTS_TYPE=void 0;const i=n(5163),s=n(93849),o=n(32510),a=n(5689),r=i.__importStar(n(2206)),l=i.__importDefault(n(45272)),d=i.__importDefault(n(58729)),u=i.__importDefault(n(94400)),p=i.__importDefault(n(27628)),c=i.__importDefault(n(93208)),m=i.__importDefault(n(71815)),f=i.__importDefault(n(89111));t.FILE_COMPONENTS_TYPE="fileComponents",t.COMPONENTS_TASK_ID="components-discovery";const g=(0,o.defineComputedResource)().defineEntity(r.processingEnv),_=(0,o.defineComputedResource)().defineEntity(r.processingEnv);t.default=new s.Feature({id:t.FILE_COMPONENTS_TYPE,api:{demoComponentLocationsManager:g,demoComponentLocationsManagerMain:g.defineConsumer(a.mainEnv),componentsManager:_,componentsManagerMain:_.defineConsumer(a.mainEnv),componentsMapping:new s.Config({})},dependencies:[r.default.asEntity,u.default.asEntity,l.default.asEntity,p.default.asEntity,c.default.asEntity,m.default.asEntity,f.default.asEntity,d.default.asEntity]})},73908:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5163),s=n(93849),o=n(2206),a=i.__importDefault(n(22856)),r=n(72822),l=n(57764),d=n(90946),u=n(91788);a.default.setup(o.processingEnv,(({run:e,demoComponentLocationsManager:t,componentsManager:n,componentsMapping:i},{project:{fs:a,projectService:p,fileManager:c},simpleAST:{simpleAST:m,languageASTPlugin:f,simpleASTPluginRepo:g,idService:_},fileAssets:{assets:v},typescriptAssets:{assetTaggerSlots:y,assets:E}})=>{f.register(u.demoConvertor),y.register(l.reactComponentAssetTagger);const h=t.provide({dependencies:[v],handler:new d.DemoComponentLocationsResourceComputer(v,m,g,a,i)}),P=p.getProjectPath(),S=n.provide({dependencies:[c],handler:new r.ComponentsResourceHandler(a,c,h,E,P,_)});return e((()=>{h.getReady(P,o.processingEnv).catch(s.reportError)})),{componentsManager:S,demoComponentLocationsManager:h}}))},29368:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentLocationsResourceComputer=void 0;const i=n(26315),s=n(91570);t.ComponentLocationsResourceComputer=class{constructor(e,t,n,o={},a){this.fileAssetsManager=e,this.simpleAST=t,this.fs=n,this.componentsMapping=o,this.fileTag=a,this.resolveNodeRequest=(0,i.createRequestResolver)({fs:this.fs,extensions:s.resolveExtensions}),this.fromConfig=0!==Object.keys(this.componentsMapping).length}compute(e){const t=this.fileAssetsManager.get(e);if(this.fromConfig)return this.fromConfig=!1,{value:this.componentsMapping,dependencies:new Set([t]),status:{valid:!0}};if(!t.isValid()&&this.fromConfig)return{value:{},dependencies:new Set([t]),status:{valid:!1,message:t.getInvalidationMessage()}};const n=new Set([t]),i=t.getFilesWithTag(this.fileTag),s={};for(const e of i){const t=this.simpleAST.get({filePath:e,parsers:this.getSimpleASTPluginNodeKinds()});n.add(t);const i=t.getLatest();this.getComponentsInfo(i).forEach((t=>{const{exportName:n,symbolName:i,targetFile:o}=t,a=this.resolveNodeRequest(this.fs.dirname(e),o).resolvedFile;a&&(s[a]||(s[a]=[]),s[a].find((e=>e.exportName===n))||s[a].push({exportName:n,symbolName:i}))}))}return{value:s,dependencies:n,status:{valid:!0}}}recompute(e,t,n,i){const s=this.compute(e.getId());return{changes:JSON.stringify(s.value)!==JSON.stringify(e.getLatest())?[{kind:"replace",path:[],value:s.value}]:[],dependencies:s.dependencies,status:s.status}}}},72822:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentsResourceHandler=void 0;const i=n(60814),s=n(9240),o=n(91570);t.ComponentsResourceHandler=class{constructor(e,t,n,i,s,o){this.fs=e,this.fileManager=t,this.simComponentsManager=n,this.assets=i,this.projectPath=s,this.idService=o}compute({filePath:e,exportName:t}){var n,i;const o=this.fileManager.get(e),a={exportName:"",packagePath:""},r=new Set([o]);if(!o.isValid())return{value:a,dependencies:r,status:{valid:!1,message:o.getInvalidationMessage()}};try{const o=this.getPackagePath(e),a=this.simComponentsManager.get(this.projectPath);let l=(null!==(n=a.getLatest()[e])&&void 0!==n?n:[]).find((e=>e.exportName===t));if(r.add(a),!l&&this.assets.isOpen(this.projectPath)){const n=this.assets.get(this.projectPath),s=n.getLatest().results[e],o=s&&s[t];(null===(i=null==o?void 0:o.tags)||void 0===i?void 0:i.includes("component"))&&(l={exportName:t,symbolName:o.symbolName}),r.add(n)}if(!l){const n=this.idService.getFileAPI(e).getExports()[t];void 0!==n&&(l={exportName:t,symbolName:n.symbolName})}if(null==l)throw new Error(`Component ${t} not found in ${e}`);return{value:{exportName:t,packagePath:o,name:(0,s.getComponentName)(e,t,l.symbolName)},dependencies:r,status:{valid:!0}}}catch(e){return{value:a,dependencies:r,status:{valid:!1,message:null==e?void 0:e.message}}}}recompute(e,t,n,s){const o=[...n].every((e=>!!e.isValid())),a=o?this.compute(e.getId()):null;return{status:{valid:o},changes:a?[(0,i.fullChange)(a.value)]:[],dependencies:a?a.dependencies:s}}getPackagePath(e){const t=(0,o.getPackagePath)(e,this.fs);if(!t)throw new Error(`There is no package.json found for the the file ${e}`);return t}}},90946:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DemoComponentLocationsResourceComputer=void 0;const i=n(26709),s=n(9240),o=n(29368),a=n(25109),r=n(8260);class l extends o.ComponentLocationsResourceComputer{constructor(e,t,n,o,l={}){super(e,t,o,l,i.DEMO_FILE_TAG),this.simpleASTPluginRepo=n,this.getComponentsInfo=e=>{const t=(0,s.findNode)(e,this.simpleASTPluginRepo.getPlugins(),a.isDemoNode);return(0,a.isDemoNode)(t)?(0,r.findComponents)(t.demo,this.simpleASTPluginRepo.getPlugins()).map((e=>({exportName:e.targetExport,targetFile:e.targetFile,symbolName:e.symbolName}))):[]}}getSimpleASTPluginNodeKinds(){return[...this.simpleASTPluginRepo.getPlugins().values(),a.demoPlugin].map((e=>e.nodeKind))}}t.DemoComponentLocationsResourceComputer=l},57764:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reactComponentAssetTagger=void 0,t.reactComponentAssetTagger={tags:["component","react-component"],typeFileContents:"\n    import * as React from 'react';\n\n    export type AComponent = React.ComponentType<any>;\n    export type NotAnyFunction = ()=>({__brand: string & number});\n    ",isApplicableToFile:e=>!e.endsWith(".d.ts"),applicableTo:["AComponent"],notApplicableTo:["NotAnyFunction"]}},71797:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const i=n(5163);i.__exportStar(n(12803),t);var s=n(12803);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.__importDefault(s).default}})},12803:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(93849),s=n(2206);t.default=new i.Feature({id:"jobManager",dependencies:[i.COM.asEntity],api:{jobRunnersSlot:i.Slot.withType().defineEntity(s.processingEnv),jobs:i.Service.withType().defineEntity(s.processingEnv).allowRemoteAccess()}})},27628:(e,t,n)=>{e.exports=n(71797)},48541:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const i=n(5163);i.__exportStar(n(17831),t);var s=n(17831);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.__importDefault(s).default}})},17831:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5163),s=n(93849),o=i.__importDefault(n(93104)),a=n(32510),r=i.__importStar(n(2206)),l=i.__importDefault(n(89111)),d=n(5689),u=n(46726),p=(0,a.defineTwoWayComputedResource)().defineEntity(r.processingEnv),c=(0,a.defineOneWayResource)().defineEntity(r.processingEnv),m=(0,a.defineComputedResource)().defineEntity(r.processingEnv);t.default=new s.Feature({id:"simpleAST",dependencies:[o.default.asEntity,r.default.asEntity,l.default.asEntity,s.COM.asEntity],api:{idService:s.Service.withType().defineEntity(r.processingEnv),remoteIdService:s.Service.withType().defineEntity(r.processingEnv).allowRemoteAccess(),codeService:s.Service.withType().defineEntity(r.processingEnv).allowRemoteAccess(),sourceIdResource:m,sourceIdResourceMain:m.defineConsumer(d.mainEnv),idGenerator:s.Service.withType().defineEntity(s.Universal),simpleASTPlugin:s.Slot.withType().defineEntity(s.Universal),languagePlugin:s.Slot.withType().defineEntity(r.processingEnv),languageASTPlugin:s.Slot.withType().defineEntity(r.processingEnv),languageASTFallbackPlugin:s.Slot.withType().defineEntity(r.processingEnv),languageASTPassthroughPlugin:s.Slot.withType().defineEntity(r.processingEnv),simpleAST:p,simpleASTMain:p.defineConsumer(d.mainEnv),simpleASTPluginRepo:s.Service.withType().defineEntity(s.Universal),astVisualizer:s.Slot.withType().defineEntity(d.mainEnv),simpleASTDiagnostics:c,simpleASTDiagnosticsMain:c.defineConsumer(d.mainEnv)}}).setup(s.Universal,(({simpleASTPlugin:e,simpleAST:t},{COM:n})=>{const i=new u.NodePluginRepo;e.stream((e=>{i.registerPlugin(e)})),u.commonSimpleAstParsers.forEach((t=>e.register(t)));const s=n.communication.getEnvironmentId(),o={};return{simpleASTPluginRepo:i,simpleAST:t,idGenerator:{generateId:e=>(o[e]||(o[e]=(0,u.createPrefixCounter)(s).nextId),o[e]())}}}))},94400:(e,t,n)=>{e.exports=n(48541)},9240:(e,t,n)=>{e.exports=n(46726)},94998:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const i=n(5163);var s=n(30600);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.__importDefault(s).default}}),i.__exportStar(n(30600),t)},30600:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ANALYZE_FILES_MARK=void 0;const i=n(5163),s=n(93849),o=i.__importDefault(n(89111)),a=i.__importStar(n(2206)),r=i.__importDefault(n(58729)),l=i.__importStar(n(32510)),d=i.__importDefault(n(93104)),u=i.__importDefault(n(32562)),p=n(5689),c=a.default.api.pluggableProjectConfig.entry({},"componentsDiscovery"),m=s.Config.withType().defineEntity({maxWorkTime:130,minSleepTime:50,changeBufferTime:2e3,splitPerFiles:100});t.ANALYZE_FILES_MARK="ANALYZE_FILES_MARK";const f=(0,l.defineIncrementalComputedResource)().defineEntity(a.processingEnv),g=(0,l.defineOneWayResource)().defineEntity(a.processingEnv);t.default=new s.Feature({id:"typescriptAssets",dependencies:[o.default.asEntity,a.default.asEntity,l.default.asEntity,r.default.asEntity,d.default.asEntity,u.default.asEntity],api:{assetsReevaluateService:s.Service.withType().defineEntity(a.processingEnv).allowRemoteAccess(),assetTaggerSlots:s.Slot.withType().defineEntity(a.processingEnv),assets:f,assetsMain:f.defineConsumer(p.mainEnv),openAssets:g,openAssetsMain:g.defineConsumer(p.mainEnv),componentsDiscoveryConfig:c,assetDiscoveryConfig:m}})},71815:(e,t,n)=>{e.exports=n(94998)},32562:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5163),s=n(93849),o=i.__importDefault(n(2206)),a=i.__importDefault(n(25447)),r=i.__importDefault(n(93104)),l=i.__importDefault(n(17166));t.default=new s.Feature({id:"typescriptCompiler",dependencies:[o.default.asEntity,a.default.asEntity,r.default.asEntity,l.default.asEntity],api:{}})}}]);
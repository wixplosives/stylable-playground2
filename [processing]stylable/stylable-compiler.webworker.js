(self.webpackChunk_wixc3_stylable_playground_feature=self.webpackChunk_wixc3_stylable_playground_feature||[]).push([[872],{51609:(e,t)=>{"use strict";function n(e,t){if(t.isStylableModule(e)){const n=[],i=t.getModulePathNoExt(e);for(const r of t.getImporters(e))t.isStylableModule(r)||t.getModulePathNoExt(r)!==i||n.push(r);if(n.length>1)throw new Error(`Stylable Component Conflict:\n${e} has multiple components entries [${n}] `);return n[0]}}Object.defineProperty(t,"__esModule",{value:!0}),t.getCSSViewModule=t.calcDepth=void 0,t.calcDepth=function e(t,i,r=[],o=new Map){let s=0;if(o.has(t))return o.get(t);if(r.includes(t))return 0;r=r.concat(t);const l=i.getDependencies(t);for(const t of l)s=Math.max(s,e(t,i,r,o));if(i.isStylableModule(t)){const l=n(t,i);l&&(s=Math.max(s,e(l,i,r,o)),o.delete(l)),s++}return o.set(t,s),s},t.getCSSViewModule=n},43450:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.codeExecutionRenderer=void 0;const i=n(5163),r=n(93849),o=i.__importStar(n(32510)),s=i.__importDefault(n(60456)),l=i.__importDefault(n(25447)),a=i.__importStar(n(2206)),u=n(5689),d=i.__importDefault(n(93208)),c=i.__importDefault(n(1529)),p=(0,o.defineComputedResource)().defineEntity(a.processingEnv),f=(0,o.defineComputedResource)().defineEntity(a.processingEnv),y=(0,o.defineComputedResource)().defineEntity(a.processingEnv),m=(0,o.defineQueryResource)().defineEntity(a.processingEnv),g=(0,o.defineComputedResource)().defineEntity(a.processingEnv);t.codeExecutionRenderer=new r.Environment("window-renderer","iframe","multi");const E=new r.Feature({id:"codeExecution",dependencies:[a.default.asEntity,l.default.asEntity,r.COM.asEntity,d.default.asEntity,c.default.asEntity,o.default.asEntity,s.default.asEntity],api:{requestsExtractors:r.Slot.withType().defineEntity(a.processingEnv),requestResolvers:r.Slot.withType().defineEntity(a.processingEnv),bundlePlugins:r.Slot.withType().defineEntity(a.processingEnv),resolveNodeRequest:r.Service.withType().defineEntity(a.processingEnv),resolver:r.Service.withType().defineEntity(a.processingEnv).allowRemoteAccess(),deepDependencies:g,deepDependenciesMain:g.defineConsumer(u.mainEnv),dependencyResourceFactory:p,fileDependencyResourceFactory:f,executionResourceFactory:m,executionResourceFactoryRenderer:m.defineConsumer(t.codeExecutionRenderer),fileDependencyGraphResourceFactory:y,resolveConfig:a.default.api.pluggableProjectConfig.entry({},"resolve"),injectedLibraries:r.MapSlot.withType().defineEntity(t.codeExecutionRenderer),runtimeEnvVars:r.OrderedSlot.withType().defineEntity(t.codeExecutionRenderer),createRenderer:r.Service.withType().defineEntity(t.codeExecutionRenderer),windowController:r.Service.withType().defineEntity(t.codeExecutionRenderer),globalSetupConfig:a.default.api.pluggableProjectConfig.entry(null,"boardGlobalSetup"),previewConfiguration:a.default.api.pluggableProjectConfig.entry({environmentVariables:{}},"previewConfiguration")}});t.default=E},33142:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const i=n(5163);i.__exportStar(n(43450),t);var r=n(43450);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.__importDefault(r).default}})},93104:(e,t,n)=>{e.exports=n(33142)},80134:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultCompiledFileExtention=void 0;const i=n(5163),r=n(93849),o=i.__importStar(n(32510)),s=i.__importDefault(n(93208)),l=i.__importStar(n(2206)),a=i.__importDefault(n(19608));t.defaultCompiledFileExtention=".compiled";const u=l.default.api.pluggableProjectConfig.entry({compiledFilesExtention:t.defaultCompiledFileExtention},"compilation");t.default=new r.Feature({id:"compilation",dependencies:[s.default.asEntity,l.default.asEntity,o.default.asEntity,a.default.asEntity],api:{compilationSlot:r.Slot.withType().defineEntity(l.processingEnv),compilationStore:r.Service.withType().defineEntity(l.processingEnv).allowRemoteAccess(),compiledFilesManager:(0,o.defineComputedResource)().defineEntity(l.processingEnv),compilationConfig:u}})},97569:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(80134);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i(r).default}})},25447:(e,t,n)=>{e.exports=n(97569)},2618:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(43345);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i(r).default}})},43345:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultFileTreeConfig=void 0;const i=n(5163),r=n(93849),o=i.__importDefault(n(60456)),s=i.__importDefault(n(2206)),l=i.__importDefault(n(93208)),a=n(5689),u=i.__importDefault(n(83654)),d=i.__importDefault(n(1529));t.defaultFileTreeConfig={openedItems:[]},t.default=new r.Feature({id:"projectUI",dependencies:[s.default.asEntity,l.default.asEntity,u.default.asEntity,d.default.asEntity,o.default.asEntity],api:{slotsProcessor:r.Service.withType().defineEntity(a.mainEnv),fileTreeStore:r.Service.withType().defineEntity(a.mainEnv),fileTreeConfig:new r.Config(t.defaultFileTreeConfig),openFilesService:r.Service.withType().defineEntity(a.mainEnv),openFilesConfig:new r.Config({targetAreaGroup:"content",openFiles:[]}),openFileSlot:r.MapSlot.withType().defineEntity(a.mainEnv),contextMenuSlot:r.Slot.withType().defineEntity(a.mainEnv),fileChildrenSlot:r.Slot.withType().defineEntity(a.mainEnv),decorationIconsSlot:r.Slot.withType().defineEntity(a.mainEnv),copyPasteManager:r.Service.withType().defineEntity(a.mainEnv),fileStylingSlot:r.OrderedSlot.withType().defineEntity(a.mainEnv),fileStylingConfig:new r.Config([]),fileIconSlot:r.OrderedSlot.withType().defineEntity(a.mainEnv),fileIconService:r.Service.withType().defineEntity(a.mainEnv),renderFileIconConfig:new r.Config([["extension",["default"]]])}})},82026:(e,t,n)=>{e.exports=n(2618)},43934:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const i=n(5163);i.__exportStar(n(31434),t);var r=n(31434);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.__importDefault(r).default}})},2206:(e,t,n)=>{e.exports=n(43934)},84081:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5163),r=n(93849),o=n(2206),s=i.__importDefault(n(25447)),l=i.__importDefault(n(93104)),a=i.__importDefault(n(70286));t.default=new r.Feature({id:"stylableCompiler",dependencies:[a.default.asEntity,s.default.asEntity,l.default.asEntity],api:{onProcessSlot:r.Slot.withType().defineEntity(o.processingEnv)}})},47255:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5163),r=n(47325),o=n(2206),s=i.__importDefault(n(84081)),l=n(37312),a=n(70130),u=n(5926),d="@stylable/runtime";s.default.setup(o.processingEnv,(({onProcessSlot:e},{compilation:{compilationSlot:t},codeExecution:{requestsExtractors:n,bundlePlugins:i,dependencyResourceFactory:o,resolveNodeRequest:s},stylable:{createStylable:c,createCalcDepthContext:p}})=>{const f=t=>(n,i)=>{for(const{editing:r,process:o}of e)(!t||t&&!r)&&(n=o(n,i));return n},y=c({onProcess:f(!1)}),m=c({onProcess:f(!0)});i.register({id:"stylable-bundle",process(e,t){const{resolvedFile:n}=s(y.projectRoot,d),i=(0,a.buildDependenciesGraph)(t,o),r=(0,a.createDepthMap)(i,p(i));return{before:r.hasStylableFiles?(0,a.depthAwareRuntimeInitializer)(r.depthMapping,n):""}}}),n.register({test:e=>e.endsWith(".st.css"),extractRequests:(e,t)=>[...y.createProcessor().process((0,r.safeParse)(t,{from:e})).getImportStatements().map((({request:e})=>e)),d]}),t.register({isApplicable:e=>e.endsWith(".st.css"),outputLanguage:"javascript",compile:(e,t=!1)=>{const{result:n,dependencies:i}=(0,u.compileStylable)(t?m:y,e);return{content:(0,l.generateModuleSource)(n,!0,d),dependencies:i}},languageName:"Stylable"}),t.register({isApplicable:e=>e.endsWith(".st.css"),outputLanguage:"css",compile:e=>{const{result:t,dependencies:n}=(0,u.compileStylable)(y,e);return{content:t.meta.outputAst.toString(),dependencies:n}},languageName:"Stylable"})}))},70286:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5163),r=i.__importStar(n(2206)),o=i.__importDefault(n(82026)),s=n(93849);t.default=new s.Feature({id:"stylable",dependencies:[r.default.asEntity,o.default.asEntity],api:{createStylable:s.Service.withType().defineEntity(r.processingEnv),createCalcDepthContext:s.Service.withType().defineEntity(r.processingEnv)}})},70130:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildDependenciesGraph=t.createDepthMap=t.depthAwareRuntimeInitializer=t.createCalcDepthContext=void 0;const i=n(51609);t.createCalcDepthContext=function(e,t){return{getDependencies:t=>e[t].imported,getImporters:t=>e[t].importers,isStylableModule:e=>e.endsWith(".st.css"),getModulePathNoExt:e=>{if(e.endsWith(".st.css"))return e.replace(/\.st\.css$/,"");const{dir:n,name:i}=t.parse(e);return t.join(n,i)}}},t.depthAwareRuntimeInitializer=function(e,t){return`\nconst depthMap = ${JSON.stringify(e)};\nconst stylableRuntime = require(${JSON.stringify(t)});   \nif(!stylableRuntime.$.window) {\n    stylableRuntime.$.init(window);\n    const register = stylableRuntime.$.register;\n    stylableRuntime.$.register = function(stylesheet){\n        stylesheet.$depth = stylableRuntime.$.$$depthMap[stylesheet.$id] || -1;\n        return register.call(this, stylesheet);\n    }\n}\nstylableRuntime.$.$$depthMap = {...stylableRuntime.$.$$depthMap, ...depthMap}; \n    `},t.createDepthMap=function(e,t){const n=new Map,r={};let o=!1;for(const s in e)s.endsWith(".st.css")&&(r[s]=(0,i.calcDepth)(s,t,[],n),o=!0);return{depthMapping:r,hasStylableFiles:o}},t.buildDependenciesGraph=function(e,t){var n,i;const r={};for(const o of e){if(!t.isResourceOfType(o))continue;const e=o.getId();null!==(n=r[e])&&void 0!==n||(r[e]={importers:new Set,imported:new Set});for(const t of Object.values(o.getLatest()))"string"==typeof t&&(r[e].imported.add(t),null!==(i=r[t])&&void 0!==i||(r[t]={importers:new Set,imported:new Set}),r[t].importers.add(e))}return r}},37312:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateModuleSource=void 0,t.generateModuleSource=function(e,t,n){const{exports:i,meta:r}=e,o=JSON.stringify(i),s=JSON.stringify(r.namespace),l=t?JSON.stringify(r.outputAst.toString()):"null";return`\n    ${r.getImportStatements().filter((({from:e})=>e.endsWith(".st.css"))).map((({request:e},t)=>`const $${t} = require(${JSON.stringify(e)});`)).join("\n")}\n    const stylableRuntime = require(${JSON.stringify(n)});\nmodule.exports = stylableRuntime.create(\n    ${s},\n    ${o},\n    ${l},\n    -1,\n    module.id,\n    stylableRuntime.$\n);\n`}},5926:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compileStylable=void 0;const i=n(47325);t.compileStylable=function(e,t){const n=e.analyze(t),r=e.transform(n),o=new Set;return(0,i.visitMetaCSSDependenciesBFS)(n,(({source:e})=>{o.add(e)}),e.resolver,(e=>o.add(e))),{result:r,dependencies:Array.from(o)}}},73837:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(89102);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i(r).default}})},89102:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(93849),r=n(2206);t.default=new i.Feature({id:"userApplicationServer",dependencies:[],api:{userApplicationServerInterface:i.Service.withType().defineEntity(r.processingEnv).allowRemoteAccess(),serverRootSlot:i.Slot.withType().defineEntity(r.processingEnv),applicationHandlerSlot:i.Slot.withType().defineEntity(r.processingEnv)},context:{serverInitializer:r.processingEnv.withContext()}})},19608:(e,t,n)=>{e.exports=n(73837)},91768:()=>{},70764:()=>{},45158:()=>{},58635:()=>{},30139:()=>{},63653:()=>{}}]);
(self.webpackChunk_wixc3_stylable_playground_feature=self.webpackChunk_wixc3_stylable_playground_feature||[]).push([[975],{98180:(e,t)=>{"use strict";var s;Object.defineProperty(t,"__esModule",{value:!0}),t.directoryManipulator=t.directoryReducer=t.DirectoryChangeKind=void 0,function(e){e.FULL="full",e.ADD="add",e.REMOVE="remove"}(s=t.DirectoryChangeKind||(t.DirectoryChangeKind={})),t.directoryReducer=(e,t)=>{switch(t.kind){case s.FULL:return{value:t.value,invertingChanges:[{kind:s.FULL,value:e}]};case s.ADD:return{value:[...e,t.node],invertingChanges:[{kind:s.FULL,value:e}]};case s.REMOVE:return{value:e.filter((e=>e.name!==t.name)),invertingChanges:[{kind:s.FULL,value:e}]};default:return{value:e,invertingChanges:[{kind:s.FULL,value:e}]}}},t.directoryManipulator={reducer:t.directoryReducer}},34232:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultFileNamingConvention=void 0;const i=s(91570);t.defaultFileNamingConvention=i.NamingConvention.KebabCase},61276:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileScannerComputeHandler=t.getDirectoryEntities=t.traverseFs=void 0;const i=s(93849),n=s(98180);t.traverseFs=function e({directoryPath:t,fs:s,filterFile:n=i.returnsTrue,filterDirectory:r=i.returnsTrue,directories:o=[],files:a=[]}){const{readdirSync:c}=s;o.push({path:t,name:s.basename(t)});for(const i of c(t,{withFileTypes:!0})){const c=i.name,l=s.join(t,c);i.isDirectory()&&r(l,c)?e({directoryPath:l,fs:s,filterFile:n,filterDirectory:r,directories:o,files:a}):i.isFile()&&n(l,c)&&a.push({path:l,name:c})}return{directories:o,files:a}},t.getDirectoryEntities=function({directoryPath:e,fs:t}){const{readdirSync:s}=t,i={directories:[],files:[]};for(const n of s(e,{withFileTypes:!0})){const s=n.name,r=t.join(e,s);n.isDirectory()?i.directories.push({path:r,name:s}):n.isFile()&&i.files.push({path:r,name:s})}return i},t.FileScannerComputeHandler=class{constructor(e,t,s,i,n){this.controller=e,this.manipulator=t,this.fs=s,this.pathPredicate=i,this.directoryManager=n}compute(e){let t=this.controller.getEmptyValue();const{changes:s,dependencies:i}=this.addDirectory(e,t);for(const e of s)t=this.manipulator.reducer(t,e).value;return{value:t,dependencies:i,status:{valid:!0}}}recompute(e,t,s,i){const n=e.getLatest(),r=[];let o=new Set(i);for(const e of s){if(!e.isValid())continue;const s=e.getType(),{changes:i,dependencies:a}=this.getDirectoryRelatedUpdates(e,t[s][e.getSerializedId()],n,o);r.push(...i),o=a}const a=Array.from(i).filter((e=>!e.isValid()));return{dependencies:new Set([...o].filter((e=>!a.includes(e)))),changes:r,status:{valid:!0}}}addDirectory(e,t){const s=new Set,{files:i,directoryResources:n}=this.addDirRecurse(e),r=[],o=this.controller.onFilesAdded(t,i.map((({path:e})=>e)));return n.forEach((e=>s.add(e))),r.push(...o.changes),{changes:r,dependencies:s}}addDirRecurse(e,t=[],s=[],i=[]){const n=this.directoryManager.get(e);i.push(n);const r=n.getLatest();for(const n of r){const r={name:n.name,path:this.fs.join(e,n.name)};this.pathPredicate(r.path)&&(n.stats.isDirectory?(t.push(r),this.addDirRecurse(r.path,t,s,i)):n.stats.isFile&&this.controller.predicate(r.path)&&s.push(r))}return{files:s,directories:t,directoryResources:i}}getDirectoryRelatedUpdates(e,t,s,i){if(t.isDisposed())return{changes:[],dependencies:i};const r=[],o=new Set(i),a=e.getChangesFromVersion(t),c=e.getId();return a.forEach((e=>{if(e.kind===n.DirectoryChangeKind.ADD){const t=this.fs.join(c,e.node.name);if(e.node.stats.isDirectory){if(this.pathPredicate(t)){const{changes:e,dependencies:i}=this.addDirectory(t,s);for(const e of i)o.add(e);r.push(...e)}}else if(this.pathPredicate(t)&&this.controller.predicate(t)){const{changes:e}=this.controller.onFilesAdded(s,[t]);r.push(...e)}}else if(e.kind===n.DirectoryChangeKind.REMOVE){const t=this.fs.join(c,e.name);r.push(...this.controller.onRemoved(s,t))}})),{changes:r,dependencies:o}}}},33506:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removePrefixPath=t.createPathPredicate=t.directoryDeepChildren=t.getPathsOfFilePath=t.getTreeNodePath=void 0;const i=s(71876),n=s(73654),r=s(91570);function o(e,t){return e.split(t).filter((e=>!!e))}function a(){return!0}t.getTreeNodePath=o,t.getPathsOfFilePath=function(e,t){var s;const i=e?o(e,t):[],n=[];for(let e=0;e<i.length;e++)n.push((null!==(s=n[e-1])&&void 0!==s?s:"")+t+i[e]);return n},t.directoryDeepChildren=async function*e(t,s,i=a,n=s){for(const r of await t.promises.readdir(s,{withFileTypes:!0})){const o=r.name,a=t.join(s,o),c=t.relative(n,a);if(r.isFile()){const e={type:"file",path:a,name:o,relativePath:c};i(e)&&(yield e)}else if(r.isDirectory()){const s={type:"directory",path:a,name:o,relativePath:c};i(s)&&(yield s,yield*e(t,a,i,n))}}},t.createPathPredicate=function(e,t,s){const n=s.map((e=>(0,i.makeRe)(e)));return s=>{const i=e.relative(t,s);return!n.some((e=>e.test(i)))}},t.removePrefixPath=(e,t)=>e?(0,r.replaceWinSlashes)(n.win32.relative(e,t)):(0,r.replaceWinSlashes)(t)},18012:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(5163);i.__exportStar(s(78204),t),i.__exportStar(s(98180),t),i.__exportStar(s(33506),t),i.__exportStar(s(98073),t),i.__exportStar(s(61276),t),i.__exportStar(s(34232),t)},98073:(e,t)=>{"use strict";var s,i;Object.defineProperty(t,"__esModule",{value:!0}),t.NodeType=t.FsEventType=void 0,(i=t.FsEventType||(t.FsEventType={}))[i.CREATE=0]="CREATE",i[i.LOAD=1]="LOAD",i[i.UPDATE=2]="UPDATE",i[i.DELETE=3]="DELETE",(s=t.NodeType||(t.NodeType={}))[s.directory=0]="directory",s[s.file=1]="file",s[s.virtual=2]="virtual",s[s.none=3]="none"},69144:(e,t,s)=>{e.exports=s(18012)},8260:(e,t,s)=>{e.exports=s(45856)},30600:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ANALYZE_FILES_MARK=void 0;const i=s(5163),n=s(93849),r=i.__importDefault(s(89111)),o=i.__importStar(s(2206)),a=i.__importDefault(s(58729)),c=i.__importStar(s(32510)),l=i.__importDefault(s(93104)),d=i.__importDefault(s(32562)),u=s(5689),p=o.default.api.pluggableProjectConfig.entry({},"componentsDiscovery"),f=n.Config.withType().defineEntity({maxWorkTime:130,minSleepTime:50,changeBufferTime:2e3,splitPerFiles:100});t.ANALYZE_FILES_MARK="ANALYZE_FILES_MARK";const g=(0,c.defineIncrementalComputedResource)().defineEntity(o.processingEnv),h=(0,c.defineOneWayResource)().defineEntity(o.processingEnv);t.default=new n.Feature({id:"typescriptAssets",dependencies:[r.default.asEntity,o.default.asEntity,c.default.asEntity,a.default.asEntity,l.default.asEntity,d.default.asEntity],api:{assetsReevaluateService:n.Service.withType().defineEntity(o.processingEnv).allowRemoteAccess(),assetTaggerSlots:n.Slot.withType().defineEntity(o.processingEnv),assets:g,assetsMain:g.defineConsumer(u.mainEnv),openAssets:h,openAssetsMain:h.defineConsumer(u.mainEnv),componentsDiscoveryConfig:p,assetDiscoveryConfig:f}})},51184:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(5163),n=i.__importStar(s(30600)),r=s(2206),o=s(91570),a=s(50144),c=i.__importDefault(s(60270)),l=s(60109),d=s(60814),u=i.__importDefault(s(72321)),p=s(69144),f=s(8260),g=s(279),h=s(6025),y="/wcs_asset_taggers";n.default.setup(r.processingEnv,(({assetTaggerSlots:e,assets:t,openAssets:s,componentsDiscoveryConfig:i,assetDiscoveryConfig:v},{project:{virtualFs:_,fileManager:S,fs:F,projectService:P,pluggableProjectConfig:T},typescript:{languageIntellisense:C},fileAssets:{assets:E,fileTaggerSlots:A}})=>{const b=P.getProjectPath(),D=T.get(r.PROJECT_CONFIG_NAME).get(i),O={};let j={matchedFiles:new Set,res:{}};A.register({isApplicableToFile:o.isJavaScriptFile,tags:[a.JsFileTag]});const k=s.provide({resourceConstructor:d.JSONResource,handler:{provide:()=>({value:[]})}}),L=k.get({},k),M=new Map;let R=!1;const w=D.include?(0,p.createPathPredicate)(F,b,D.include):()=>!1,x=D.exclude?(0,p.createPathPredicate)(F,b,D.exclude):()=>!0,N=e=>!e.includes(y)&&!w(e)&&!!x(e),I=(e,t=new Set,s={},i=new Set)=>{for(const n of e){if(i.has(n))continue;i.add(n);const e=c.default.readJsonConfigFile(n,(e=>F.readFileSync(e,{encoding:"utf-8"}))),r=F.dirname(n),{errors:o,fileNames:a,options:l,projectReferences:d}=c.default.parseJsonSourceFileConfigFileContent(e,C.baseHost,r,void 0,n);o.length&&console.error(c.default.formatDiagnostics(o,C.baseHost));for(const e of a.map(F.normalize))t.has(e)||(t.add(e),N(e)&&(s[n]?s[n].fileNames.push(e):s[n]={fileNames:[e],options:l,projectReferences:d}));d&&I(d.map((e=>c.default.resolveProjectReferencePath(e))),t,s,i)}return{matchedFiles:t,res:s}},B=t.provide({dependencies:[E,S],...v,startValue:{progress:0,results:{}},handler:{getTasks:t=>{u.default.mark(n.ANALYZE_FILES_MARK),(()=>{if(R)return;R=!0;const t=new Map;let s=0,i=!1;for(const n of e){s++;const e="asset-tagger-types"+s+".d.ts",r=_.join(y,e);t.set(n,e),M.set(n,r),i||(_.mkdirSync(y),i=!0),_.writeFileSync(r,n.typeFileContents)}_.writeFileSync(_.join(y,"index.d.ts"),[...e].map((e=>`\n                import * from ./${t.get(e)}\n\n                `)).join(""))})();const s=E.get(t),{scannedFiles:i}=m(s),r=s.getFilesWithTag(g.TsConfigTag).filter(x);j=I(r);const o=j.res,a=j.matchedFiles,c=i.filter((e=>!a.has(e)&&N(e))),d=(e,t,s)=>((e,t,s)=>{let i={nextValue:e,accumulator:[]};for(;i.nextValue;)i=t(i.nextValue,i.accumulator);return i.accumulator})(t,((e,t)=>{const s=e.slice(0,v.splitPerFiles),i=e.slice(v.splitPerFiles);return t.push(s),{accumulator:t,nextValue:i.length?i:null}})).map((t=>({kind:"process",tsConfigPath:e,options:s,paths:t}))),p=[];for(const[e,{fileNames:t,options:s}]of Object.entries(o))p.push(...d(e,t,s));return c.length&&p.push(...d("default",c,l.defaultCompilerOptions)),setTimeout((()=>{L.getLatest().includes(t)||L.applyPatch((e=>{e.push(t)}))}),0),{dependencies:new Set,tasks:p}},updateTasks(e,t,s,i,r){u.default.mark(n.ANALYZE_FILES_MARK);const o=new Set([...i]),a=[...r],d=e.getLatest(),p=t=>{var s;const i=E.get(e.getId()).getLatest();if(i[t]&&i[t].includes(g.TsFileTag)&&N(t)){const e=F.dirname(t),i=c.default.findConfigFile(e,F.fileExistsSync)||"default",n=a.find((e=>"process"===e.kind&&e.tsConfigPath===i));if(n)-1===n.paths.indexOf(t)&&n.paths.push(t);else{const e=(null===(s=j.res[i])||void 0===s?void 0:s.options)||l.defaultCompilerOptions;a.push({kind:"process",tsConfigPath:i,paths:[t],options:e})}}},f=e=>{const t=a.find((t=>"process"===t.kind&&t.paths.includes(e)));if(t){const s=t.paths.indexOf(e);-1!==s&&t.paths.splice(s,1)}d.results[e]&&a.unshift({kind:"remove",path:e})};for(const e of s){if(S.isResourceOfType(e)){const t=e.getId();p(t)}if(E.isResourceOfType(e)){const s=t[E.getTypeName()][e.getSerializedId()],i=e.getProjection(s),{scannedFiles:n}=m(e,i),{scannedFiles:r}=m(e),a=r.filter((e=>!n.includes(e))),c=n.filter((e=>!r.includes(e)));a.forEach((e=>{p(e),o.add(S.get(e))})),c.forEach((e=>{f(e)}))}}return{dependencies:o,tasks:a}},getProgressChanges(e,t){const s=e=>e.filter((e=>"process"===e.kind)),i=s(e).length,n=s(t).length;return[{kind:"replace",path:["progress"],value:0===i?1:1-n/i}]},performTask(t,s,i,n){var r,o,a,l;switch(t.kind){case"clear":return{changes:[{kind:"replace",path:["results"],value:{}}]};case"remove":return{changes:[{kind:"remove",path:["results",t.path]}]};case"process":{const i=new Map,d=Array.from(t.paths);for(const t of[...e]){const e=M.get(t),s=F.join(b,e);d.push(s)}if(O[t.tsConfigPath])O[t.tsConfigPath].serviceFiles.filePaths=d,O[t.tsConfigPath].serviceFiles.flush();else{const e={filePaths:[...d],flush:()=>{"flushVersion"in s&&s.flushVersion()}},s=C.createServiceHost(C.baseHost,(()=>e.filePaths),(()=>t.options),C.defaultLibPath);s.getProjectReferences=()=>t.projectReferences,s.useSourceOfProjectReferenceRedirect=()=>!0;const i=c.default.createLanguageService(s,C.documentRegistry);O[t.tsConfigPath]={serviceHost:s,languageService:i,serviceFiles:e}}const{languageService:u}=O[t.tsConfigPath],p=u.getProgram();for(const t of[...e]){const e=M.get(t),s=F.join(b,e);i.set(t,(0,h.getExportsOfModule)(s,p,"type").res)}const g={},y=(e,t,s)=>{const i=(0,f.getMainSymbolDeclaration)(s);return!i||i.getSourceFile()!==e};for(const s of t.paths){const{res:t,checker:n,file:c}=(0,h.getExportsOfModule)(s,p,"value");if(!c||!n)continue;g[s]={};const d=g[s];for(const[u,{type:p,symbolName:f,symbol:g,targetSymbol:h}]of Object.entries(t))if(!y(c,g,h))for(const c of e)if(!c.isApplicableToFile||c.isApplicableToFile(s)){let e=!0;if(c.applicableTo)for(const t of c.applicableTo){const s=null===(o=null===(r=i.get(c))||void 0===r?void 0:r[t])||void 0===o?void 0:o.type;if(!s||!n.isTypeAssignableTo(p,s)){e=!1;break}}if(e&&c.notApplicableTo)for(const t of c.notApplicableTo){const s=null===(l=null===(a=i.get(c))||void 0===a?void 0:a[t])||void 0===l?void 0:l.type;if(!s||n.isTypeAssignableTo(p,s)){e=!1;break}}if(e&&"default"===u&&f&&"default"!==f&&void 0!==t[f]){e=!1;break}e&&(d[u]=d[u]||{tags:[],symbolName:f},d[u].tags.push(...c.tags))}}n.find((e=>"process"===e.kind&&e.tsConfigPath===t.tsConfigPath))||(u.cleanupSemanticCache(),u.dispose(),delete O[t.tsConfigPath]);const m=s.isReady()?s.getLatest():null,v=[];for(const[e,t]of Object.entries(g))Object.keys(t).length?m&&m.results[e]?v.push({kind:"replace",path:["results",e],value:t}):v.push({kind:"add",path:["results",e],value:t}):m&&m.results[e]&&v.push({kind:"remove",path:["results",e]});return{changes:v}}}},dispose(e){L.getLatest().includes(e.getId())&&L.applyPatch((t=>t.filter((t=>e.getId()!==t))))}}});return{assets:B,openAssets:k,assetsReevaluateService:{reevaluate(e){B.reEvaluateValue(e)}}}}));const m=(e,t=e.getLatest())=>{const s=e.getFilesWithTag(g.TsFileTag,t),i=e.getFilesWithTag(a.JsFileTag,t),n=s.filter((e=>!e.endsWith(".d.ts")));return{scannedFiles:i.concat(n)}}},6025:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getExportsOfModule=t.getSymbolName=t.mainDecl=t.getAliasOrSymb=void 0;const i=s(5163).__importDefault(s(60270)),n=s(8260);t.getAliasOrSymb=(e,t)=>e.flags&i.default.SymbolFlags.Alias?t.getAliasedSymbol(e):e,t.mainDecl=e=>e.valueDeclaration||(e.declarations||[])[0],t.getSymbolName=e=>{const s=(0,t.mainDecl)(e);return s&&(0,n.isNamedDeclaration)(s)&&s.name?s.name.getText():e.name},t.getExportsOfModule=(e,s,n)=>{const r={},o=s.getSourceFile(e);let a;if(o){a=s.getTypeChecker();const e=a.getSymbolAtLocation(o);if(e){const s=a.getExportsOfModule(e);for(const e of s){const s=(0,t.getAliasOrSymb)(e,a),o="type"===n?i.default.SymbolFlags.Type:i.default.SymbolFlags.Value;if(s.flags&o){const i=e.getDeclarations();if(i&&i.length){const o=(0,t.getSymbolName)(s),c="type"===n?a.getTypeAtLocation(i[0]):a.getTypeOfSymbolAtLocation(e,i[0]);r[e.name]={type:c,symbolName:o,symbol:e,targetSymbol:s}}}}}}return{res:r,file:o,checker:a}}},50144:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s(5163).__exportStar(s(20844),t)},20844:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JsFileTag=void 0,t.JsFileTag="language:javascript"},32562:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(5163),n=s(93849),r=i.__importDefault(s(2206)),o=i.__importDefault(s(25447)),a=i.__importDefault(s(93104)),c=i.__importDefault(s(17166));t.default=new n.Feature({id:"typescriptCompiler",dependencies:[r.default.asEntity,o.default.asEntity,a.default.asEntity,c.default.asEntity],api:{}})},55369:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultEditorConfig=void 0,t.defaultEditorConfig={formatSettings:{indentSize:4,tabSize:4,newLineCharacter:"\n",convertTabsToSpaces:!0,indentStyle:2,insertSpaceAfterConstructor:!1,insertSpaceAfterCommaDelimiter:!0,insertSpaceAfterSemicolonInForStatements:!0,insertSpaceBeforeAndAfterBinaryOperators:!0,insertSpaceAfterKeywordsInControlFlowStatements:!0,insertSpaceAfterFunctionKeywordForAnonymousFunctions:!1,insertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis:!1,insertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets:!1,insertSpaceAfterOpeningAndBeforeClosingNonemptyBraces:!0,insertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces:!1,insertSpaceAfterOpeningAndBeforeClosingJsxExpressionBraces:!1,insertSpaceBeforeFunctionParenthesis:!1,placeOpenBraceOnNewLineForFunctions:!1,placeOpenBraceOnNewLineForControlBlocks:!1,semicolons:"ignore",trimTrailingWhitespace:!0,doubleQuotes:!1}}},59804:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(5163);i.__exportStar(s(55174),t),i.__exportStar(s(55369),t)},55174:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TsConfigTag=t.TsFileTag=void 0,t.TsFileTag="language:typescript",t.TsConfigTag="language:typescript-json-config"},279:(e,t,s)=>{e.exports=s(59804)}}]);
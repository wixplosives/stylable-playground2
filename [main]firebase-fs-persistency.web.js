(self.webpackChunk_wixc3_stylable_playground_feature=self.webpackChunk_wixc3_stylable_playground_feature||[]).push([[5770],{24363:(e,t,r)=>{"use strict";r.r(t),r.d(t,{classes:()=>i,cssStates:()=>c,keyframes:()=>o,namespace:()=>n,st:()=>f,stVars:()=>s,style:()=>u,vars:()=>a});const n="o114",i={root:"s362",permissionModal:"s363"},o={},s={},a={},c=r.stc.bind(null,n),u=r.sts.bind(null,n),f=u},72321:(e,t,r)=>{e.exports=globalThis.performance||r(44378)},44378:e=>{const t=new Map,r=Date.now(),n=`__init__${Math.random().toString(16).slice(2)}`,i={duration:0,entryType:"mark",name:n,startTime:r,toJSON:()=>({name:n,initialStartTime:r})},o=new Map;function s({defaultMark:e,markName:t}){const{startTime:r}=t&&o.get(t)?o.get(t).slice(-1)[0]:e;return r}function a(){return{name:this.name,startTime:this.startTime,duration:this.duration,entryType:this.type}}e.exports={mark:e=>{const t=o.get(e),r={duration:0,entryType:"mark",name:e,startTime:Date.now()-i.startTime,toJSON:a};t?t.push(r):o.set(e,[r])},measure:(e,r,n)=>{const o={startTime:Date.now()},c=s({markName:r,defaultMark:i}),u=s({markName:n,defaultMark:o}),f=t.get(e),l={duration:u-c,startTime:c,entryType:"measure",name:e,toJSON:a};f?f.push(l):t.set(e,[l])},getEntriesByType:e=>{switch(e){case"mark":return[].concat(...o.values());case"measure":return[].concat(...t.values());default:return[]}},clearMarks:e=>{e?o.delete(e):o.clear()},clearMeasures:e=>{e?t.delete(e):t.clear()}}},50340:(e,t)=>{function r(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function n(e){return!!e&&!!e[J]}function i(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===Q}(e)||Array.isArray(e)||!!e[G]||!!e.constructor[G]||l(e)||d(e))}function o(e,t,r){void 0===r&&(r=!1),0===s(e)?(r?Object.keys:X)(e).forEach((function(n){r&&"symbol"==typeof n||t(n,e[n],e)})):e.forEach((function(r,n){return t(n,r,e)}))}function s(e){var t=e[J];return t?t.t>3?t.t-4:t.t:Array.isArray(e)?1:l(e)?2:d(e)?3:0}function a(e,t){return 2===s(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function c(e,t){return 2===s(e)?e.get(t):e[t]}function u(e,t,r){var n=s(e);2===n?e.set(t,r):3===n?(e.delete(t),e.add(r)):e[t]=r}function f(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function l(e){return V&&e instanceof Map}function d(e){return $&&e instanceof Set}function h(e){return e.i||e.u}function p(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=q(e);delete t[J];for(var r=X(t),n=0;n<r.length;n++){var i=r[n],o=t[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function v(e,t){return void 0===t&&(t=!1),g(e)||n(e)||!i(e)||(s(e)>1&&(e.set=e.add=e.clear=e.delete=y),Object.freeze(e),t&&o(e,(function(e,t){return v(t,!0)}),!0)),e}function y(){r(2)}function g(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function b(e){var t=Z[e];return t||r(18,e),t}function m(e,t){Z[e]||(Z[e]=t)}function E(){return Y}function D(e,t){t&&(b("Patches"),e.o=[],e.v=[],e.s=t)}function P(e){_(e),e.p.forEach(I),e.p=null}function _(e){e===Y&&(Y=e.l)}function O(e){return Y={p:[],l:Y,h:e,_:!0,m:0}}function I(e){var t=e[J];0===t.t||1===t.t?t.j():t.O=!0}function A(e,t){t.m=t.p.length;var n=t.p[0],o=void 0!==e&&e!==n;return t.h.S||b("ES5").P(t,e,o),o?(n[J].M&&(P(t),r(4)),i(e)&&(e=w(t,e),t.l||S(t,e)),t.o&&b("Patches").g(n[J].u,e,t.o,t.v)):e=w(t,n,[]),P(t),t.o&&t.s(t.o,t.v),e!==z?e:void 0}function w(e,t,r){if(g(t))return t;var n=t[J];if(!n)return o(t,(function(i,o){return R(e,n,t,i,o,r)}),!0),t;if(n.A!==e)return t;if(!n.M)return S(e,n.u,!0),n.u;if(!n.R){n.R=!0,n.A.m--;var i=4===n.t||5===n.t?n.i=p(n.k):n.i;o(3===n.t?new Set(i):i,(function(t,o){return R(e,n,i,t,o,r)})),S(e,i,!1),r&&e.o&&b("Patches").F(n,r,e.o,e.v)}return n.i}function R(e,t,r,o,s,c){if(n(s)){var f=w(e,s,c&&t&&3!==t.t&&!a(t.D,o)?c.concat(o):void 0);if(u(r,o,f),!n(f))return;e._=!1}if(i(s)&&!g(s)){if(!e.h.K&&e.m<1)return;w(e,s),t&&t.A.l||S(e,s)}}function S(e,t,r){void 0===r&&(r=!1),e.h.K&&e._&&v(t,r)}function C(e,t){var r=e[J];return(r?h(r):e)[t]}function F(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function j(e){e.M||(e.M=!0,e.l&&j(e.l))}function N(e){e.i||(e.i=p(e.u))}function M(e,t,r){var n=l(t)?b("MapSet").$(t,r):d(t)?b("MapSet").C(t,r):e.S?function(e,t){var r=Array.isArray(e),n={t:r?1:0,A:t?t.A:E(),M:!1,R:!1,D:{},l:t,u:e,k:null,i:null,j:null,I:!1},i=n,o=ee;r&&(i=[n],o=te);var s=Proxy.revocable(i,o),a=s.revoke,c=s.proxy;return n.k=c,n.j=a,c}(t,r):b("ES5").J(t,r);return(r?r.A:E()).p.push(n),n}function T(e){return n(e)||r(22,e),function e(t){if(!i(t))return t;var r,n=t[J],a=s(t);if(n){if(!n.M&&(n.t<4||!b("ES5").N(n)))return n.u;n.R=!0,r=L(t,a),n.R=!1}else r=L(t,a);return o(r,(function(t,i){n&&c(n.u,t)===i||u(r,t,e(i))})),3===a?new Set(r):r}(e)}function L(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return p(e)}function U(){function e(e,t){var r=s[e];return r?r.enumerable=t:s[e]=r={configurable:!0,enumerable:t,get:function(){return ee.get(this[J],e)},set:function(t){ee.set(this[J],e,t)}},r}function t(e){for(var t=e.length-1;t>=0;t--){var n=e[t][J];if(!n.M)switch(n.t){case 5:i(n)&&j(n);break;case 4:r(n)&&j(n)}}}function r(e){for(var t=e.u,r=e.k,n=X(r),i=n.length-1;i>=0;i--){var o=n[i];if(o!==J){var s=t[o];if(void 0===s&&!a(t,o))return!0;var c=r[o],u=c&&c[J];if(u?u.u!==s:!f(c,s))return!0}}var l=!!t[J];return n.length!==X(t).length+(l?0:1)}function i(e){var t=e.k;if(t.length!==e.u.length)return!0;var r=Object.getOwnPropertyDescriptor(t,t.length-1);if(r&&!r.get)return!0;for(var n=0;n<t.length;n++)if(!t.hasOwnProperty(n))return!0;return!1}var s={};m("ES5",{J:function(t,r){var n=Array.isArray(t),i=function(t,r){if(t){for(var n=Array(r.length),i=0;i<r.length;i++)Object.defineProperty(n,""+i,e(i,!0));return n}var o=q(r);delete o[J];for(var s=X(o),a=0;a<s.length;a++){var c=s[a];o[c]=e(c,t||!!o[c].enumerable)}return Object.create(Object.getPrototypeOf(r),o)}(n,t),o={t:n?5:4,A:r?r.A:E(),M:!1,R:!1,D:{},l:r,u:t,k:i,i:null,O:!1,I:!1};return Object.defineProperty(i,J,{value:o,writable:!0}),i},P:function(e,r,s){s?n(r)&&r[J].A===e&&t(e.p):(e.o&&function e(t){if(t&&"object"==typeof t){var r=t[J];if(r){var n=r.u,s=r.k,c=r.D,u=r.t;if(4===u)o(s,(function(t){t!==J&&(void 0!==n[t]||a(n,t)?c[t]||e(s[t]):(c[t]=!0,j(r)))})),o(n,(function(e){void 0!==s[e]||a(s,e)||(c[e]=!1,j(r))}));else if(5===u){if(i(r)&&(j(r),c.length=!0),s.length<n.length)for(var f=s.length;f<n.length;f++)c[f]=!1;else for(var l=n.length;l<s.length;l++)c[l]=!0;for(var d=Math.min(s.length,n.length),h=0;h<d;h++)s.hasOwnProperty(h)||(c[h]=!0),void 0===c[h]&&e(s[h])}}}}(e.p[0]),t(e.p))},N:function(e){return 4===e.t?r(e):i(e)}})}function k(){function e(t){if(!i(t))return t;if(Array.isArray(t))return t.map(e);if(l(t))return new Map(Array.from(t.entries()).map((function(t){return[t[0],e(t[1])]})));if(d(t))return new Set(Array.from(t).map(e));var r=Object.create(Object.getPrototypeOf(t));for(var n in t)r[n]=e(t[n]);return a(t,G)&&(r[G]=t[G]),r}function t(t){return n(t)?e(t):t}var u="add";m("Patches",{W:function(t,n){return n.forEach((function(n){for(var i=n.path,o=n.op,a=t,f=0;f<i.length-1;f++){var l=s(a),d=""+i[f];0!==l&&1!==l||"__proto__"!==d&&"constructor"!==d||r(24),"function"==typeof a&&"prototype"===d&&r(24),"object"!=typeof(a=c(a,d))&&r(15,i.join("/"))}var h=s(a),p=e(n.value),v=i[i.length-1];switch(o){case"replace":switch(h){case 2:return a.set(v,p);case 3:r(16);default:return a[v]=p}case u:switch(h){case 1:return"-"===v?a.push(p):a.splice(v,0,p);case 2:return a.set(v,p);case 3:return a.add(p);default:return a[v]=p}case"remove":switch(h){case 1:return a.splice(v,1);case 2:return a.delete(v);case 3:return a.delete(n.value);default:return delete a[v]}default:r(17,o)}})),t},F:function(e,r,n,i){switch(e.t){case 0:case 4:case 2:return function(e,r,n,i){var s=e.u,f=e.i;o(e.D,(function(e,o){var l=c(s,e),d=c(f,e),h=o?a(s,e)?"replace":u:"remove";if(l!==d||"replace"!==h){var p=r.concat(e);n.push("remove"===h?{op:h,path:p}:{op:h,path:p,value:d}),i.push(h===u?{op:"remove",path:p}:"remove"===h?{op:u,path:p,value:t(l)}:{op:"replace",path:p,value:t(l)})}}))}(e,r,n,i);case 5:case 1:return function(e,r,n,i){var o=e.u,s=e.D,a=e.i;if(a.length<o.length){var c=[a,o];o=c[0],a=c[1];var f=[i,n];n=f[0],i=f[1]}for(var l=0;l<o.length;l++)if(s[l]&&a[l]!==o[l]){var d=r.concat([l]);n.push({op:"replace",path:d,value:t(a[l])}),i.push({op:"replace",path:d,value:t(o[l])})}for(var h=o.length;h<a.length;h++){var p=r.concat([h]);n.push({op:u,path:p,value:t(a[h])})}o.length<a.length&&i.push({op:"replace",path:r.concat(["length"]),value:o.length})}(e,r,n,i);case 3:return function(e,t,r,n){var i=e.u,o=e.i,s=0;i.forEach((function(e){if(!o.has(e)){var i=t.concat([s]);r.push({op:"remove",path:i,value:e}),n.unshift({op:u,path:i,value:e})}s++})),s=0,o.forEach((function(e){if(!i.has(e)){var o=t.concat([s]);r.push({op:u,path:o,value:e}),n.unshift({op:"remove",path:o,value:e})}s++}))}(e,r,n,i)}},g:function(e,t,r,n){r.push({op:"replace",path:[],value:t===z?void 0:t}),n.push({op:"replace",path:[],value:e})}})}function K(){function e(e,t){function r(){this.constructor=e}a(e,t),e.prototype=(r.prototype=t.prototype,new r)}function t(e){e.i||(e.D=new Map,e.i=new Map(e.u))}function n(e){e.i||(e.i=new Set,e.u.forEach((function(t){if(i(t)){var r=M(e.A.h,t,e);e.p.set(t,r),e.i.add(r)}else e.i.add(t)})))}function s(e){e.O&&r(3,JSON.stringify(h(e)))}var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},c=function(){function r(e,t){return this[J]={t:2,l:t,A:t?t.A:E(),M:!1,R:!1,i:void 0,D:void 0,u:e,k:this,I:!1,O:!1},this}e(r,Map);var n=r.prototype;return Object.defineProperty(n,"size",{get:function(){return h(this[J]).size}}),n.has=function(e){return h(this[J]).has(e)},n.set=function(e,r){var n=this[J];return s(n),h(n).has(e)&&h(n).get(e)===r||(t(n),j(n),n.D.set(e,!0),n.i.set(e,r),n.D.set(e,!0)),this},n.delete=function(e){if(!this.has(e))return!1;var r=this[J];return s(r),t(r),j(r),r.u.has(e)?r.D.set(e,!1):r.D.delete(e),r.i.delete(e),!0},n.clear=function(){var e=this[J];s(e),h(e).size&&(t(e),j(e),e.D=new Map,o(e.u,(function(t){e.D.set(t,!1)})),e.i.clear())},n.forEach=function(e,t){var r=this;h(this[J]).forEach((function(n,i){e.call(t,r.get(i),i,r)}))},n.get=function(e){var r=this[J];s(r);var n=h(r).get(e);if(r.R||!i(n))return n;if(n!==r.u.get(e))return n;var o=M(r.A.h,n,r);return t(r),r.i.set(e,o),o},n.keys=function(){return h(this[J]).keys()},n.values=function(){var e,t=this,r=this.keys();return(e={})[H]=function(){return t.values()},e.next=function(){var e=r.next();return e.done?e:{done:!1,value:t.get(e.value)}},e},n.entries=function(){var e,t=this,r=this.keys();return(e={})[H]=function(){return t.entries()},e.next=function(){var e=r.next();if(e.done)return e;var n=t.get(e.value);return{done:!1,value:[e.value,n]}},e},n[H]=function(){return this.entries()},r}(),u=function(){function t(e,t){return this[J]={t:3,l:t,A:t?t.A:E(),M:!1,R:!1,i:void 0,u:e,k:this,p:new Map,O:!1,I:!1},this}e(t,Set);var r=t.prototype;return Object.defineProperty(r,"size",{get:function(){return h(this[J]).size}}),r.has=function(e){var t=this[J];return s(t),t.i?!!t.i.has(e)||!(!t.p.has(e)||!t.i.has(t.p.get(e))):t.u.has(e)},r.add=function(e){var t=this[J];return s(t),this.has(e)||(n(t),j(t),t.i.add(e)),this},r.delete=function(e){if(!this.has(e))return!1;var t=this[J];return s(t),n(t),j(t),t.i.delete(e)||!!t.p.has(e)&&t.i.delete(t.p.get(e))},r.clear=function(){var e=this[J];s(e),h(e).size&&(n(e),j(e),e.i.clear())},r.values=function(){var e=this[J];return s(e),n(e),e.i.values()},r.entries=function(){var e=this[J];return s(e),n(e),e.i.entries()},r.keys=function(){return this.values()},r[H]=function(){return this.values()},r.forEach=function(e,t){for(var r=this.values(),n=r.next();!n.done;)e.call(t,n.value,n.value,this),n=r.next()},t}();m("MapSet",{$:function(e,t){return new c(e,t)},C:function(e,t){return new u(e,t)}})}var x;Object.defineProperty(t,"__esModule",{value:!0});var Y,B="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),V="undefined"!=typeof Map,$="undefined"!=typeof Set,W="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,z=B?Symbol.for("immer-nothing"):((x={})["immer-nothing"]=!0,x),G=B?Symbol.for("immer-draftable"):"__$immer_draftable",J=B?Symbol.for("immer-state"):"__$immer_state",H="undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator",Q=""+Object.prototype.constructor,X="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,q=Object.getOwnPropertyDescriptors||function(e){var t={};return X(e).forEach((function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)})),t},Z={},ee={get:function(e,t){if(t===J)return e;var r=h(e);if(!a(r,t))return function(e,t,r){var n,i=F(t,r);return i?"value"in i?i.value:null===(n=i.get)||void 0===n?void 0:n.call(e.k):void 0}(e,r,t);var n=r[t];return e.R||!i(n)?n:n===C(e.u,t)?(N(e),e.i[t]=M(e.A.h,n,e)):n},has:function(e,t){return t in h(e)},ownKeys:function(e){return Reflect.ownKeys(h(e))},set:function(e,t,r){var n=F(h(e),t);if(null==n?void 0:n.set)return n.set.call(e.k,r),!0;if(!e.M){var i=C(h(e),t),o=null==i?void 0:i[J];if(o&&o.u===r)return e.i[t]=r,e.D[t]=!1,!0;if(f(r,i)&&(void 0!==r||a(e.u,t)))return!0;N(e),j(e)}return e.i[t]===r&&"number"!=typeof r&&(void 0!==r||t in e.i)||(e.i[t]=r,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==C(e.u,t)||t in e.u?(e.D[t]=!1,N(e),j(e)):delete e.D[t],e.i&&delete e.i[t],!0},getOwnPropertyDescriptor:function(e,t){var r=h(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{writable:!0,configurable:1!==e.t||"length"!==t,enumerable:n.enumerable,value:r[t]}:n},defineProperty:function(){r(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.u)},setPrototypeOf:function(){r(12)}},te={};o(ee,(function(e,t){te[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),te.deleteProperty=function(e,t){return te.set.call(this,e,t,void 0)},te.set=function(e,t,r){return ee.set.call(this,e[0],t,r,e[0])};var re=function(){function e(e){var t=this;this.S=W,this.K=!0,this.produce=function(e,n,o){if("function"==typeof e&&"function"!=typeof n){var s=n;n=e;var a=t;return function(e){var t=this;void 0===e&&(e=s);for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return a.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(i))}))}}var c;if("function"!=typeof n&&r(6),void 0!==o&&"function"!=typeof o&&r(7),i(e)){var u=O(t),f=M(t,e,void 0),l=!0;try{c=n(f),l=!1}finally{l?P(u):_(u)}return"undefined"!=typeof Promise&&c instanceof Promise?c.then((function(e){return D(u,o),A(e,u)}),(function(e){throw P(u),e})):(D(u,o),A(c,u))}if(!e||"object"!=typeof e){if(void 0===(c=n(e))&&(c=e),c===z&&(c=void 0),t.K&&v(c,!0),o){var d=[],h=[];b("Patches").g(e,c,d,h),o(d,h)}return c}r(21,e)},this.produceWithPatches=function(e,r){if("function"==typeof e)return function(r){for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return t.produceWithPatches(r,(function(t){return e.apply(void 0,[t].concat(i))}))};var n,i,o=t.produce(e,r,(function(e,t){n=e,i=t}));return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return[e,n,i]})):[o,n,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){i(e)||r(8),n(e)&&(e=T(e));var t=O(this),o=M(this,e,void 0);return o[J].I=!0,_(t),o},t.finishDraft=function(e,t){var r=(e&&e[J]).A;return D(r,t),A(void 0,r)},t.setAutoFreeze=function(e){this.K=e},t.setUseProxies=function(e){e&&!W&&r(20),this.S=e},t.applyPatches=function(e,t){var r;for(r=t.length-1;r>=0;r--){var i=t[r];if(0===i.path.length&&"replace"===i.op){e=i.value;break}}r>-1&&(t=t.slice(r+1));var o=b("Patches").W;return n(e)?o(e,t):this.produce(e,(function(e){return o(e,t)}))},e}(),ne=new re,ie=ne.produce,oe=ne.produceWithPatches.bind(ne),se=ne.setAutoFreeze.bind(ne),ae=ne.setUseProxies.bind(ne),ce=ne.applyPatches.bind(ne),ue=ne.createDraft.bind(ne),fe=ne.finishDraft.bind(ne);t.Immer=re,t.applyPatches=ce,t.castDraft=function(e){return e},t.castImmutable=function(e){return e},t.createDraft=ue,t.current=T,t.default=ie,t.enableAllPlugins=function(){U(),K(),k()},t.enableES5=U,t.enableMapSet=K,t.enablePatches=k,t.finishDraft=fe,t.freeze=v,t.immerable=G,t.isDraft=n,t.isDraftable=i,t.nothing=z,t.original=function(e){return n(e)||r(23,e),e[J].u},t.produce=ie,t.produceWithPatches=oe,t.setAutoFreeze=se,t.setUseProxies=ae},30412:(e,t,r)=>{"use strict";e.exports=r(50340)},74853:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5163),i=r(93849),o=n.__importStar(r(2206)),s=n.__importDefault(r(20471)),a=n.__importDefault(r(93208));t.default=new i.Feature({id:"firebaseFsPersistency",dependencies:[o.default.asEntity,s.default.asEntity,a.default.asEntity],api:{firebaseFsServiceProcessing:i.Service.withType().defineEntity(o.processingEnv).allowRemoteAccess((0,i.declareComEmitter)("onFileSystemChange","removeFileSystemChangeHandler"))}})},64281:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5163),i=r(5689),o=r(26249),s=n.__importDefault(r(74853)),a=r(30721),c=r(24363),u=r(63372);s.default.setup(i.mainEnv,(({onDispose:e,firebaseFsServiceProcessing:t},{firebasePersistency:{firebasePersistencyService:r,firebaseCloneHandlers:n},project:{},gui:{panelStore:i}})=>{const s=new a.FirebaseFsServiceMain(r,t,i),f=()=>{i.openOverlay({id:"permissionMismatch",panelType:o.ASYNC_CONFIRMATION_MODAL_ID,panelProps:{title:"Permission denied",className:c.classes.permissionModal,content:"You are not the owner of this project. Would you like to clone a new version of it?",onClose:()=>i.closePanel("permissionMismatch"),actionButtonText:"Clone",dismissButton:!0,onAction:l,actionButtonProps:{className:u.classes.primaryButton}}})},l=async()=>{const e=r.getRootDocumentId(),t=e&&await r.read(e);t&&(await r.clone(t),i.closePanel("permissionMismatch"))};n.register(s.cloneHandler),r.firebasePersistencyEvents.on("permissionMismatch",f),e((()=>{s.onDispose(),r.firebasePersistencyEvents.off("permissionMismatch",f)}))}))},66526:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FirebaseFsServiceMain=t.fsFieldId=t.fsDocEntryId=t.fsCollectionId=void 0;const n=r(39448),i=r(83135);function o(e){return encodeURIComponent(e).replaceAll(".","%2E")}t.fsCollectionId="fsPersistency",t.fsDocEntryId="filesystem",t.fsFieldId="files",t.FirebaseFsServiceMain=class{constructor(e,r,s){this.firebasePersistencyService=e,this.firebaseFsProcessingService=r,this.panelStore=s,this.isLoading=!0,this.isReadyHandler=async e=>{if(e===n.ReadinessEvent.INVALID_ID_EVENT)(0,i.openToastNotification)({panelStore:this.panelStore,props:{title:"Project not found",text:"initializing default project",type:"error",dismissButton:!0}});else if(e===n.ReadinessEvent.READY_EVENT){const e=this.firebasePersistencyService.getRootDocumentId();if(e){const r=await this.firebasePersistencyService.read(`${e}/${t.fsCollectionId}/${t.fsDocEntryId}`);if(r){const e=await r.getValue(t.fsFieldId).getLatest();e&&await this.firebaseFsProcessingService.populateFs(e)}}}this.isLoading=!1},this.handleFileSystemChange=async(e,r)=>{if(!this.isLoading){const n=await this.firebasePersistencyService.assureRootDocumentExists(),i=this.firebasePersistencyService.getRootDocumentId(),s=await this.firebaseFsProcessingService.getCurrentFsContents();if(i){let a=await this.firebasePersistencyService.read(`${i}/${t.fsCollectionId}/${t.fsDocEntryId}`);const c={},u=o(e);if(!a&&n){for(const[e,t]of Object.entries(s))c[o(e)]=t;this.firebasePersistencyService.createCollection(t.fsCollectionId,i),a=await this.firebasePersistencyService.create(`${i}/${t.fsCollectionId}`,{[t.fsFieldId]:c},t.fsDocEntryId)}else if(a&&Object.keys(s).length){const n=a.getValue(t.fsFieldId);void 0!==r?(s[e]=r,await n.persistField(r,u)):void 0!==(await n.getLatest())[u]&&await this.firebasePersistencyService.deleteField(a.getId(),`${t.fsFieldId}.${u}`)}}}},this.cloneHandler=async(e,r)=>{const n=await this.firebaseFsProcessingService.getCurrentFsContents(),i={};for(const[e,t]of Object.entries(n))i[o(e)]=t;this.firebasePersistencyService.createCollection(t.fsCollectionId,r.getId()),Object.keys(i).length&&await this.firebasePersistencyService.create(`${r.getId()}/${t.fsCollectionId}`,{[t.fsFieldId]:i},t.fsDocEntryId)},r.onFileSystemChange(this.handleFileSystemChange),e.firebasePersistencyEvents.on("readiness",this.isReadyHandler)}onDispose(){this.firebasePersistencyService.firebasePersistencyEvents.off("readiness",this.isReadyHandler)}}},30721:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fsFieldId=t.fsDocEntryId=t.fsCollectionId=t.FirebaseFsServiceMain=void 0;var n=r(66526);Object.defineProperty(t,"FirebaseFsServiceMain",{enumerable:!0,get:function(){return n.FirebaseFsServiceMain}}),Object.defineProperty(t,"fsCollectionId",{enumerable:!0,get:function(){return n.fsCollectionId}}),Object.defineProperty(t,"fsDocEntryId",{enumerable:!0,get:function(){return n.fsDocEntryId}}),Object.defineProperty(t,"fsFieldId",{enumerable:!0,get:function(){return n.fsFieldId}})},94703:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5163),i=r(93849),o=r(5689),s=n.__importDefault(r(93208)),a=r(9011);t.default=new i.Feature({id:"firebasePersistency",dependencies:[s.default.asEntity],api:{firebasePersistencyServiceOptions:new i.Config({rootCollectionId:"projects",testingMode:!1}),firebaseConfig:new i.Config(a.firebaseConfig),firebasePersistencyService:i.Service.withType().defineEntity(o.mainEnv),firebaseAuthService:i.Service.withType().defineEntity(o.mainEnv),firebaseCloneHandlers:i.Slot.withType().defineEntity(o.mainEnv)}})},70537:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(94703);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(i).default}})},85470:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FirebaseAuthService=void 0;const n=r(93849),i=r(75102);t.FirebaseAuthService=class{constructor(e){this.firebaseAuth=e,this.currentUser=null,this.firebaseAuthEvents=new n.EventEmitter,this.unsubscribeFromFirebaseAuth=(0,i.onAuthStateChanged)(this.firebaseAuth,(e=>{this.currentUser=e,this.firebaseAuthEvents.emit("change",this.currentUser),e||this.signInAnonymously().catch(n.reportError)}))}onDispose(){this.unsubscribeFromFirebaseAuth()}subscribeToAuthChange(e){this.firebaseAuthEvents.subscribe("change",e)}unsubscribeToAuthChange(e){this.firebaseAuthEvents.subscribe("change",e)}getAuth(){return this.firebaseAuth}getCurrentUser(){return this.currentUser}async signInAnonymously(){await(0,i.signInAnonymously)(this.firebaseAuth)}async signOut(){return this.firebaseAuth.signOut()}async deleteUser(e){await e.delete()}}},88967:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FirebasePersistencyService=t.ReadinessEvent=t.URL_PROJECT_ID_KEY=t.UPGRADE_PENDING_FIELD=t.OWNER_ID_FIELD=void 0;const n=r(93849),i=r(83135),o=r(61008);var s;t.OWNER_ID_FIELD="ownerId",t.UPGRADE_PENDING_FIELD="upgradePending",t.URL_PROJECT_ID_KEY="projectId",function(e){e[e.INVALID_ID_EVENT=0]="INVALID_ID_EVENT",e[e.READY_EVENT=1]="READY_EVENT",e[e.NEW_PROJECT_EVENT=2]="NEW_PROJECT_EVENT"}(s=t.ReadinessEvent||(t.ReadinessEvent={})),t.FirebasePersistencyService=class{constructor(e,t,r,i){this.firebaseAuth=e,this.firestore=t,this.cloneHandlers=r,this.rootCollectionId="projects",this.upgradePending=!1,this.firebasePersistencyEvents=new n.EventEmitter,this.rootCollectionId=(null==i?void 0:i.rootCollectionId)||this.rootCollectionId,this.firebaseAuth.subscribeToAuthChange(this.onAuthChange.bind(this))}async onAuthChange(){const e=new URL(document.location.toString()).searchParams.get(t.URL_PROJECT_ID_KEY);if(e&&!this.rootDocumentId){const r=`${this.rootCollectionId}/${e}`;if(await this.read(r))this.setRootDocumentId(r),this.firebasePersistencyEvents.emit("readiness",s.READY_EVENT);else{this.firebasePersistencyEvents.emit("readiness",s.INVALID_ID_EVENT);const e=new URL(document.location.toString());e.searchParams.delete(t.URL_PROJECT_ID_KEY),i.historyController.push(e.toString()),this.firebasePersistencyEvents.emit("readiness",s.READY_EVENT)}}else e||this.firebasePersistencyEvents.emit("readiness",s.NEW_PROJECT_EVENT)}getRootCollectionId(){return this.rootCollectionId}getRootDocumentId(){return this.rootDocumentId}setRootDocumentId(e){const r=new URL(document.location.toString()),n=r.searchParams.get(t.URL_PROJECT_ID_KEY);if(e)this.rootDocumentId!==e&&(this.rootDocumentId=e,n!==e&&(r.searchParams.set(t.URL_PROJECT_ID_KEY,e.slice(this.rootCollectionId.length+1)),i.historyController.push(r.toString())));else if(this.rootDocumentId=void 0,n){const e=new URL(document.location.toString());e.searchParams.delete(t.URL_PROJECT_ID_KEY),i.historyController.push(e.toString()),document.location.reload()}}async assureRootDocumentExists(){if(this.rootActiveDocumentReady)return this.rootActiveDocumentReady;this.rootActiveDocumentReady=this.rootDocumentId?this.read(this.rootDocumentId):this.create(this.rootCollectionId,{});const e=await this.rootActiveDocumentReady;return e&&this.setRootDocumentId(e.getId()),e}async getDocumentOwnerId(e){var r;const n=await this.read(e);return null===(r=null==n?void 0:n.getValue(t.OWNER_ID_FIELD))||void 0===r?void 0:r.getLatest()}setDocumentOwnerId(e,r){return this.update(e,t.OWNER_ID_FIELD,r)}createCollection(e,t){if(t){const r=(0,o.doc)(this.firestore,t);(0,o.collection)(r,e)}else(0,o.collection)(this.firestore,e)}async create(e,t,r){const n=(0,o.collection)(this.firestore,e),i=this.firebaseAuth.getCurrentUser();if(e===this.rootCollectionId&&i&&(t.ownerId=i.uid),r){const e=(0,o.doc)(this.firestore,n.path,r);return await(0,o.setDoc)(e,t),this.read(e.path)}{const e=await(0,o.addDoc)(n,t);return this.read(e.path)}}async read(e){const t=(0,o.doc)(this.firestore,e),r=await(0,o.getDoc)(t);return r.exists()?this.getActiveDocument(e,r):void 0}async update(e,t,r){const n=(0,o.doc)(this.firestore,e);await(0,o.updateDoc)(n,t,r).catch((e=>{this.firebasePersistencyEvents.emit("permissionMismatch",void 0)}))}async prepareUserOwnershipChange(){var e,r;const n=this.getRootDocumentId();if(n&&(null===(e=this.firebaseAuth.getCurrentUser())||void 0===e?void 0:e.isAnonymous)){const e=await this.getDocumentOwnerId(n);(null===(r=this.firebaseAuth.getCurrentUser())||void 0===r?void 0:r.uid)===e&&(this.upgradePending=!0,await this.update(n,t.UPGRADE_PENDING_FIELD,!0))}}async cancelUserOwnershipChange(){var e;const r=this.getRootDocumentId();if(r&&this.upgradePending){const n=await this.getDocumentOwnerId(r);(null===(e=this.firebaseAuth.getCurrentUser())||void 0===e?void 0:e.uid)===n&&(await this.deleteField(r,t.UPGRADE_PENDING_FIELD),this.upgradePending=!1)}}isUserOwnershipChangePending(){return this.upgradePending}deleteDoc(e){const t=(0,o.doc)(this.firestore,e);return(0,o.deleteDoc)(t)}async deleteField(e,t){const r=(0,o.doc)(this.firestore,e);return(0,o.updateDoc)(r,t,(0,o.deleteField)())}async clone(e){const t=(0,o.doc)(this.firestore,e.getId()),r=await(0,o.getDoc)(t),n=await this.create(this.getDocCollectionId(e),r.data());if(n){const t=n.getId(),r=this.firebaseAuth.getCurrentUser();r&&(this.setRootDocumentId(t),await this.setDocumentOwnerId(t,r.uid));for(const t of this.cloneHandlers)await t(e,n)}return n}getDocCollectionId(e){return(0,o.doc)(this.firestore,e.getId()).parent.path}getActiveDocument(e,t){return{getValue:r=>({persist:t=>this.update(e,r,t),persistField:(t,n)=>this.update(e,`${r}.${n}`,t),async getLatest(){const e=await(0,o.getDoc)(t.ref);if(e.exists())return e.get(r)}}),getId:()=>t.ref.path}}}},50041:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UPGRADE_PENDING_FIELD=t.ReadinessEvent=t.OWNER_ID_FIELD=t.FirebasePersistencyService=t.FirebaseAuthService=void 0;var n=r(85470);Object.defineProperty(t,"FirebaseAuthService",{enumerable:!0,get:function(){return n.FirebaseAuthService}});var i=r(88967);Object.defineProperty(t,"FirebasePersistencyService",{enumerable:!0,get:function(){return i.FirebasePersistencyService}}),Object.defineProperty(t,"OWNER_ID_FIELD",{enumerable:!0,get:function(){return i.OWNER_ID_FIELD}}),Object.defineProperty(t,"ReadinessEvent",{enumerable:!0,get:function(){return i.ReadinessEvent}}),Object.defineProperty(t,"UPGRADE_PENDING_FIELD",{enumerable:!0,get:function(){return i.UPGRADE_PENDING_FIELD}})},9011:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.firebaseConfig=void 0,t.firebaseConfig={apiKey:"AIzaSyD-IS7lkB3o9GioLGayvTlOAgl2EFQnKrY",authDomain:"localhost",projectId:"demo-project",storageBucket:"core3-firebase-9b327.appspot.com",messagingSenderId:"491604166384",appId:"1:491604166384:web:fb676c56b4fdb306bd6435"}},20471:(e,t,r)=>{e.exports=r(70537)},39448:(e,t,r)=>{e.exports=r(50041)},77419:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5163);n.__exportStar(r(41583),t),n.__exportStar(r(49249),t),n.__exportStar(r(42068),t)},42068:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shortcuts=void 0;const n=r(62202);t.shortcuts={toggleSideMenu:[n.KEYBOARD.UNIVERSAL_CONTROL,n.KEYBOARD.SHIFT,n.KEYBOARD.M],save:[n.KEYBOARD.UNIVERSAL_CONTROL,n.KEYBOARD.S],toggleNextTab:[n.KEYBOARD.CONTROL,n.KEYBOARD.BACK_QUOTE],togglePreviousTab:[n.KEYBOARD.CONTROL,n.KEYBOARD.SHIFT,n.KEYBOARD.BACK_QUOTE],toggleLastTab:[n.KEYBOARD.CONTROL,n.KEYBOARD.SHIFT,n.KEYBOARD.L],toggleAllMenus:[n.KEYBOARD.UNIVERSAL_CONTROL,n.KEYBOARD.SHIFT,n.KEYBOARD.A],closeTab:[n.KEYBOARD.UNIVERSAL_CONTROL,n.KEYBOARD.W]}},83135:(e,t,r)=>{e.exports=r(77467)},26249:(e,t,r)=>{e.exports=r(77419)},43934:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const n=r(5163);n.__exportStar(r(31434),t);var i=r(31434);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n.__importDefault(i).default}})},2206:(e,t,r)=>{e.exports=r(43934)}}]);
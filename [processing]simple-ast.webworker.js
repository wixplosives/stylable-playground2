"use strict";(self.webpackChunk_wixc3_stylable_playground_feature=self.webpackChunk_wixc3_stylable_playground_feature||[]).push([[929],{51607:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createDependencyResolver=void 0;const{hasOwnProperty:n}=Object.prototype;t.createDependencyResolver=function({extractRequests:e,resolveRequest:t}){return(i,r)=>{const o=Object.create(null),s=Array.isArray(i)?[...i]:[i];for(;s.length>0;){const i=s.shift();if(o[i])continue;const a=Object.create(null);o[i]=a;const l=e(i);for(const e of l){if(n.call(a,e))continue;const o=t(i,e);a[e]=o,r&&void 0!==o&&!1!==o&&s.push(o)}}return o}}},26315:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(51607),t),r(n(48522),t),r(n(20096),t)},48522:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createRequestResolver=void 0;const n="browser",i=["node_modules"],r=[".js",".json"],o=e=>"."===e||".."===e||e.startsWith("./")||e.startsWith("../"),s={throwIfNoEntry:!1};function a(e){const t=new Map;let n=!1;for(const[i,r]of Object.entries(e)){let e=i,o=r;i.endsWith("/*")&&(n=!0,e={prefix:i.slice(0,-1)},"string"==typeof r&&r.endsWith("/*")&&(o={prefix:r.slice(0,-1)})),t.set(e,o)}return[t,n]}t.createRequestResolver=function(e){const{fs:{statSync:t,readFileSync:l,realpathSync:c,dirname:u,join:d,resolve:f,isAbsolute:g},packageRoots:p=i,extensions:v=r,target:y=n,resolvedPacakgesCache:h=new Map,alias:m={},fallback:P={}}=e,S=function(e,t=new Map){return n=>{if(t.has(n))return t.get(n);{const i=e(n);return t.set(n,i),i}}}((function(e){const t=d(e,"package.json"),n=function(e){const{stackTraceLimit:t}=Error;try{return Error.stackTraceLimit=0,JSON.parse(l(e,"utf8"))}catch{return}finally{Error.stackTraceLimit=t}}(t);if("object"!=typeof n||null===n)return;const i=function({main:e,browser:t}){return"browser"===y&&"string"==typeof t?t:"string"==typeof e?e:void 0}(n),{browser:r}=n;let s;if("browser"===y&&"object"==typeof r&&null!==r){s=Object.create(null);for(const[t,n]of Object.entries(r)){const i=o(t)?I(d(e,t)):t;if(i){const t=M(e,n);void 0!==t&&(s[i]=t)}}}return{filePath:t,directoryPath:e,mainPath:i,browserMappings:s}}),h),[E,b]=a(m),[T,w]=a(P);return function(e,t){var n,i;const r=new Set;for(const o of function*(e,t,n){var i;const r=b?k(E,t):E.get(t);let o=!1;if(void 0!==r&&(o=!0,yield r),!o&&"browser"===y){const r=O(e);if(r){n.add(r.filePath);const e=null===(i=r.browserMappings)||void 0===i?void 0:i[t];void 0!==e&&(o=!0,yield e)}}o||(yield t);const s=w?k(T,t):T.get(t);void 0!==s&&(yield s)}(e,t,r)){if(!1===o)return{resolvedFile:o,visitedPaths:r};for(const t of _(e,o)){if(r.add(t),!(null===(n=x(t))||void 0===n?void 0:n.isFile()))continue;if("browser"===y){const e=O(u(t));if(e){r.add(e.filePath);const n=null===(i=e.browserMappings)||void 0===i?void 0:i[t];if(void 0!==n)return!1!==n&&r.add(n),{resolvedFile:n,originalFilePath:t,visitedPaths:r}}}const e=C(t);return r.add(e),{resolvedFile:e,visitedPaths:r}}}return{resolvedFile:void 0,visitedPaths:r}};function*_(e,t){if(o(t)||g(t)){const n=f(e,t);yield*R(n),yield*j(n)}else yield*function*(e,t){var n;for(const i of function*(e){for(const t of p)for(const n of F(e))yield d(n,t)}(e)){if(!(null===(n=x(i))||void 0===n?void 0:n.isDirectory()))continue;const e=d(i,t);yield*R(e),yield*j(e)}}(e,t)}function*R(e){yield e;for(const t of v)yield e+t}function*A(e){yield*R(e),yield*R(d(e,"index"))}function*j(e){var t;if(!(null===(t=x(e))||void 0===t?void 0:t.isDirectory()))return;const n=S(e),i=null==n?void 0:n.mainPath;void 0!==i?yield*A(d(e,i)):yield*R(d(e,"index"))}function k(e,t){for(const[n,i]of e){const e=typeof n;if("string"===e){if(t===n)return i}else if("object"===e){const{prefix:e}=n;if(t.startsWith(e)&&t.length>e.length)return"object"==typeof i?i.prefix+t.slice(e.length):i}}}function O(e){for(const t of F(e)){const e=S(t);if(e)return e}}function M(e,t){return!1===t?t:"string"==typeof t?o(t)?I(d(e,t)):t:void 0}function I(e){var t;for(const n of A(e))if(null===(t=x(n))||void 0===t?void 0:t.isFile())return C(n)}function x(e){const{stackTraceLimit:n}=Error;try{return Error.stackTraceLimit=0,t(e,s)}catch{return}finally{Error.stackTraceLimit=n}}function C(e){const{stackTraceLimit:t}=Error;try{return Error.stackTraceLimit=0,c(e)}catch{return e}finally{Error.stackTraceLimit=t}}function*F(e){let t;for(;t!==e;)yield e,t=e,e=u(e)}}},20096:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},17831:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(5163),r=n(93849),o=i.__importDefault(n(93104)),s=n(32510),a=i.__importStar(n(2206)),l=i.__importDefault(n(89111)),c=n(5689),u=n(46726),d=(0,s.defineTwoWayComputedResource)().defineEntity(a.processingEnv),f=(0,s.defineOneWayResource)().defineEntity(a.processingEnv),g=(0,s.defineComputedResource)().defineEntity(a.processingEnv);t.default=new r.Feature({id:"simpleAST",dependencies:[o.default.asEntity,a.default.asEntity,l.default.asEntity,r.COM.asEntity],api:{idService:r.Service.withType().defineEntity(a.processingEnv),remoteIdService:r.Service.withType().defineEntity(a.processingEnv).allowRemoteAccess(),codeService:r.Service.withType().defineEntity(a.processingEnv).allowRemoteAccess(),sourceIdResource:g,sourceIdResourceMain:g.defineConsumer(c.mainEnv),idGenerator:r.Service.withType().defineEntity(r.Universal),simpleASTPlugin:r.Slot.withType().defineEntity(r.Universal),languagePlugin:r.Slot.withType().defineEntity(a.processingEnv),languageASTPlugin:r.Slot.withType().defineEntity(a.processingEnv),languageASTFallbackPlugin:r.Slot.withType().defineEntity(a.processingEnv),languageASTPassthroughPlugin:r.Slot.withType().defineEntity(a.processingEnv),simpleAST:d,simpleASTMain:d.defineConsumer(c.mainEnv),simpleASTPluginRepo:r.Service.withType().defineEntity(r.Universal),astVisualizer:r.Slot.withType().defineEntity(c.mainEnv),simpleASTDiagnostics:f,simpleASTDiagnosticsMain:f.defineConsumer(c.mainEnv)}}).setup(r.Universal,(({simpleASTPlugin:e,simpleAST:t},{COM:n})=>{const i=new u.NodePluginRepo;e.stream((e=>{i.registerPlugin(e)})),u.commonSimpleAstParsers.forEach((t=>e.register(t)));const r=n.communication.getEnvironmentId(),o={};return{simpleASTPluginRepo:i,simpleAST:t,idGenerator:{generateId:e=>(o[e]||(o[e]=(0,u.createPrefixCounter)(r).nextId),o[e]())}}}))},80351:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(5163),r=n(26315),o=n(2206),s=i.__importDefault(n(17831)),a=n(45856),l=n(46726),c=n(49482),u=n(91570);s.default.setup(o.processingEnv,(({simpleAST:e,languagePlugin:t,languageASTPassthroughPlugin:n,languageASTPlugin:i,languageASTFallbackPlugin:s,simpleASTPluginRepo:d,sourceIdResource:f,simpleASTDiagnostics:g},{typescript:{languageIntellisense:p,editorConfig:v},project:{fileManager:y,fs:h,pluggableProjectConfig:m},codeExecution:{resolveConfig:P}})=>{var S;const E=m.get(o.PROJECT_CONFIG_NAME).get(P),b=(0,r.createRequestResolver)({fs:h,extensions:u.resolveExtensions,packageRoots:E.packageRoots,alias:E.alias,fallback:E.fallback}),T=(0,c.createImportResolver)(h,b,((e,t)=>{const{languageService:n}=p.getLanguageController(e),i=n.getProgram(),r=null==i?void 0:i.getProjectReferenceRedirect(t);return r?r.endsWith(".d.ts")?r.slice(0,-5):r:t}));t.register((0,a.tsPlugin)((e=>y.get(e).getLatest()),p,v.formatSettings,T)),n.register(a.expressionStatementPassThrough),n.register(a.variableStatementPassThrough),n.register(a.parenthesizedExpressionPassThrough);const w=new a.IDService((e=>y.get(e).getLatest()),t),_=f.provide({dependencies:[y],handler:new a.SourceIdsHandler(w,y)}),R=new Map;i.stream((e=>{R.has(e.language)||R.set(e.language,[]),R.get(e.language).unshift(e)})),s.stream((e=>{R.has(e.language)||R.set(e.language,[]),R.get(e.language).push(e)}));const A=new Map;n.stream((e=>{A.has(e.language)||A.set(e.language,[]),A.get(e.language).push(e)})),function(e,t){a.basePlugins.forEach((n=>{e.register("string"===n.kind?{...n,defaultConfig:{useSingleQuotes:t}}:n)}))}(i,!(null===(S=null==v?void 0:v.formatSettings)||void 0===S?void 0:S.doubleQuotes));const j=new l.PluggableNodeManipulator;j.setNodeRepo(d);const k=e.provide({manipulator:j,dependencies:[y],resourceConstructor:l.SimpleAstResource,handler:new a.SimpleAstHandler(w,y,R,A,d,j)}),O=(0,a.setupDiagnostics)(h,k,d,w,(e=>g.provide({handler:{provide:t=>({value:e(t)})}})));return{idService:w,simpleAST:k,sourceIdResource:_,simpleASTDiagnostics:O,remoteIdService:{getLocation(e,t){const n=w.getLanguage(e);if(!n)return{from:-1,length:-1};const i=w.getFileAPI(e).getNodeByID(t);if(!i)return{from:-1,length:-1};const r=n.getPosition(i);return{from:r.start,length:r.end-r.start}}},codeService:new a.CodeService(w,y)}}))},49482:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createImportResolver=void 0;const i=n(91570);t.createImportResolver=(e,t,n)=>({sourceFilePath:r,importPath:o,exportName:s})=>{var a;const l=e.resolve(r),c=t(e.dirname(l),o).resolvedFile||e.resolve(e.dirname(l),o),u=(0,i.getPackageJsonPath)(l,e),d=null!==(a=null==n?void 0:n(l,c))&&void 0!==a?a:c;return{request:(0,i.isRelativeImportPath)(o)?(0,i.createImportPath)({importedFilePath:d,targetFilePath:l,targetPackageJsonPath:u,fs:e}):o,exportName:s}}}}]);
(self.webpackChunk_wixc3_stylable_playground_feature=self.webpackChunk_wixc3_stylable_playground_feature||[]).push([[416],{51607:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createDependencyResolver=void 0;const{hasOwnProperty:n}=Object.prototype;t.createDependencyResolver=function({extractRequests:e,resolveRequest:t}){return(o,r)=>{const i=Object.create(null),s=Array.isArray(o)?[...o]:[o];for(;s.length>0;){const o=s.shift();if(i[o])continue;const c=Object.create(null);i[o]=c;const a=e(o);for(const e of a){if(n.call(c,e))continue;const i=t(o,e);c[e]=i,r&&void 0!==i&&!1!==i&&s.push(i)}}return i}}},26315:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(51607),t),r(n(48522),t),r(n(20096),t)},48522:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRequestResolver=void 0;const n="browser",o=["node_modules"],r=[".js",".json"],i=e=>"."===e||".."===e||e.startsWith("./")||e.startsWith("../"),s={throwIfNoEntry:!1};function c(e){const t=new Map;let n=!1;for(const[o,r]of Object.entries(e)){let e=o,i=r;o.endsWith("/*")&&(n=!0,e={prefix:o.slice(0,-1)},"string"==typeof r&&r.endsWith("/*")&&(i={prefix:r.slice(0,-1)})),t.set(e,i)}return[t,n]}t.createRequestResolver=function(e){const{fs:{statSync:t,readFileSync:a,realpathSync:l,dirname:d,join:u,resolve:f,isAbsolute:p},packageRoots:y=o,extensions:g=r,target:v=n,resolvedPacakgesCache:h=new Map,alias:m={},fallback:E={}}=e,_=function(e,t=new Map){return n=>{if(t.has(n))return t.get(n);{const o=e(n);return t.set(n,o),o}}}((function(e){const t=u(e,"package.json"),n=function(e){const{stackTraceLimit:t}=Error;try{return Error.stackTraceLimit=0,JSON.parse(a(e,"utf8"))}catch{return}finally{Error.stackTraceLimit=t}}(t);if("object"!=typeof n||null===n)return;const o=function({main:e,browser:t}){return"browser"===v&&"string"==typeof t?t:"string"==typeof e?e:void 0}(n),{browser:r}=n;let s;if("browser"===v&&"object"==typeof r&&null!==r){s=Object.create(null);for(const[t,n]of Object.entries(r)){const o=i(t)?D(u(e,t)):t;if(o){const t=M(e,n);void 0!==t&&(s[o]=t)}}}return{filePath:t,directoryPath:e,mainPath:o,browserMappings:s}}),h),[w,R]=c(m),[b,P]=c(E);return function(e,t){var n,o;const r=new Set;for(const i of function*(e,t,n){var o;const r=R?O(w,t):w.get(t);let i=!1;if(void 0!==r&&(i=!0,yield r),!i&&"browser"===v){const r=C(e);if(r){n.add(r.filePath);const e=null===(o=r.browserMappings)||void 0===o?void 0:o[t];void 0!==e&&(i=!0,yield e)}}i||(yield t);const s=P?O(b,t):b.get(t);void 0!==s&&(yield s)}(e,t,r)){if(!1===i)return{resolvedFile:i,visitedPaths:r};for(const t of S(e,i)){if(r.add(t),!(null===(n=T(t))||void 0===n?void 0:n.isFile()))continue;if("browser"===v){const e=C(d(t));if(e){r.add(e.filePath);const n=null===(o=e.browserMappings)||void 0===o?void 0:o[t];if(void 0!==n)return!1!==n&&r.add(n),{resolvedFile:n,originalFilePath:t,visitedPaths:r}}}const e=k(t);return r.add(e),{resolvedFile:e,visitedPaths:r}}}return{resolvedFile:void 0,visitedPaths:r}};function*S(e,t){if(i(t)||p(t)){const n=f(e,t);yield*F(n),yield*x(n)}else yield*function*(e,t){var n;for(const o of function*(e){for(const t of y)for(const n of I(e))yield u(n,t)}(e)){if(!(null===(n=T(o))||void 0===n?void 0:n.isDirectory()))continue;const e=u(o,t);yield*F(e),yield*x(e)}}(e,t)}function*F(e){yield e;for(const t of g)yield e+t}function*j(e){yield*F(e),yield*F(u(e,"index"))}function*x(e){var t;if(!(null===(t=T(e))||void 0===t?void 0:t.isDirectory()))return;const n=_(e),o=null==n?void 0:n.mainPath;void 0!==o?yield*j(u(e,o)):yield*F(u(e,"index"))}function O(e,t){for(const[n,o]of e){const e=typeof n;if("string"===e){if(t===n)return o}else if("object"===e){const{prefix:e}=n;if(t.startsWith(e)&&t.length>e.length)return"object"==typeof o?o.prefix+t.slice(e.length):o}}}function C(e){for(const t of I(e)){const e=_(t);if(e)return e}}function M(e,t){return!1===t?t:"string"==typeof t?i(t)?D(u(e,t)):t:void 0}function D(e){var t;for(const n of j(e))if(null===(t=T(n))||void 0===t?void 0:t.isFile())return k(n)}function T(e){const{stackTraceLimit:n}=Error;try{return Error.stackTraceLimit=0,t(e,s)}catch{return}finally{Error.stackTraceLimit=n}}function k(e){const{stackTraceLimit:t}=Error;try{return Error.stackTraceLimit=0,l(e)}catch{return e}finally{Error.stackTraceLimit=t}}function*I(e){let t;for(;t!==e;)yield e,t=e,e=d(e)}}},20096:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},43450:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.codeExecutionRenderer=void 0;const o=n(5163),r=n(93849),i=o.__importStar(n(32510)),s=o.__importDefault(n(60456)),c=o.__importDefault(n(25447)),a=o.__importStar(n(2206)),l=n(5689),d=o.__importDefault(n(93208)),u=o.__importDefault(n(1529)),f=(0,i.defineComputedResource)().defineEntity(a.processingEnv),p=(0,i.defineComputedResource)().defineEntity(a.processingEnv),y=(0,i.defineComputedResource)().defineEntity(a.processingEnv),g=(0,i.defineQueryResource)().defineEntity(a.processingEnv),v=(0,i.defineComputedResource)().defineEntity(a.processingEnv);t.codeExecutionRenderer=new r.Environment("window-renderer","iframe","multi");const h=new r.Feature({id:"codeExecution",dependencies:[a.default.asEntity,c.default.asEntity,r.COM.asEntity,d.default.asEntity,u.default.asEntity,i.default.asEntity,s.default.asEntity],api:{requestsExtractors:r.Slot.withType().defineEntity(a.processingEnv),requestResolvers:r.Slot.withType().defineEntity(a.processingEnv),bundlePlugins:r.Slot.withType().defineEntity(a.processingEnv),resolveNodeRequest:r.Service.withType().defineEntity(a.processingEnv),resolver:r.Service.withType().defineEntity(a.processingEnv).allowRemoteAccess(),deepDependencies:v,deepDependenciesMain:v.defineConsumer(l.mainEnv),dependencyResourceFactory:f,fileDependencyResourceFactory:p,executionResourceFactory:g,executionResourceFactoryRenderer:g.defineConsumer(t.codeExecutionRenderer),fileDependencyGraphResourceFactory:y,resolveConfig:a.default.api.pluggableProjectConfig.entry({},"resolve"),injectedLibraries:r.MapSlot.withType().defineEntity(t.codeExecutionRenderer),runtimeEnvVars:r.OrderedSlot.withType().defineEntity(t.codeExecutionRenderer),createRenderer:r.Service.withType().defineEntity(t.codeExecutionRenderer),windowController:r.Service.withType().defineEntity(t.codeExecutionRenderer),globalSetupConfig:a.default.api.pluggableProjectConfig.entry(null,"boardGlobalSetup"),previewConfiguration:a.default.api.pluggableProjectConfig.entry({environmentVariables:{}},"previewConfiguration")}});t.default=h},73555:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(5163),r=n(26315),i=n(2206),s=n(91570),c=n(60814),a=n(47951),l=o.__importDefault(n(43450)),d=n(74161),{hasOwnProperty:u}=Object.prototype;l.default.setup(i.processingEnv,(({requestsExtractors:e,requestResolvers:t,dependencyResourceFactory:n,fileDependencyResourceFactory:o,executionResourceFactory:l,deepDependencies:f,fileDependencyGraphResourceFactory:p,resolveConfig:y,bundlePlugins:g},{compilation:{compiledFilesManager:v},project:{fs:h,projectService:m,fileManager:E,pluggableProjectConfig:_,virtualFs:w},analytics:{analyticsService:{track:R}}})=>{const b=_.get(i.PROJECT_CONFIG_NAME).get(y),P=(0,r.createRequestResolver)({fs:h,extensions:s.resolveExtensions,packageRoots:b.packageRoots,alias:b.alias,fallback:b.fallback});function S(e,n){for(const o of t){const{resolvedRequest:t,originalFilePath:r}=o(e,n);if(void 0!==t)return{resolvedRequest:t,originalFilePath:r}}return{resolvedRequest:void 0}}t.register(((e,t)=>{const{resolvedFile:n,originalFilePath:o}=P(h.dirname(e),t);return{resolvedRequest:n,originalFilePath:o}}));const F=async(t,n,o,r)=>{const i=v.get((0,a.compiledFileId)(t));i.isReady()||await i.ready;const s=i.getLatest();r.add(i);for(const{test:i,extractRequests:c}of e)if(i(t)){const e=c(t,s);for(const i of e){const{resolvedRequest:e}=S(t,i);!e||o.has(e)||n.find((t=>e.includes(t)))||(o.add(e),await F(e,n,o,r))}}},j=(t,n,o)=>{const r={};for(const{test:i,extractRequests:s}of e)if(i(o?".js":t)){const e=s(t,n);for(const n of e){if(u.call(r,n))continue;const{resolvedRequest:e}=S(t,n);r[n]=e}return r}return r},x=async e=>{const t=await v.getReady((0,a.compiledFileId)(e)),n=t.getLatest(),o=new Set([t]);return{value:j(e,n,!0),dependencies:o,status:{valid:!0}}},O=n.provide({dependencies:[v],handler:{compute:x,recompute:async(e,t,n,o)=>{const{value:r}=await x(e.getId());return{changes:JSON.stringify(r)!==JSON.stringify(e.getLatest())?[(0,c.fullChange)(r)]:[],dependencies:o,status:(0,c.getDefaultStatusHandling)(e.getSerializedId(),o)}}}}),C=async e=>{const t=await E.getReady(e),n=t.getLatest(),o=new Set([t]);return{value:j(e,n),dependencies:o,status:{valid:!0}}},M=o.provide({dependencies:[E],handler:{compute:C,recompute:async(e,t,n,o)=>{const{value:r}=await C(e.getId());return{changes:JSON.stringify(r)!==JSON.stringify(e.getLatest())?[(0,c.fullChange)(r)]:[],dependencies:o,status:(0,c.getDefaultStatusHandling)(e.getSerializedId(),o)}}}}),{applyBundlePlugins:D,disposeResource:T}=function({virtualFs:e,fs:t,compiledFilesManager:n,dependencyResourceFactoryImpl:o,bundlePlugins:r,projectPath:i}){let s=0;const c=new WeakMap;return{disposeResource(e){const t=c.get(e);if(t){for(const{dispose:e}of t.values())e();c.delete(e)}},applyBundlePlugins:async function({id:l,dependencies:d,resource:u}){const f={beforeEntry:[],afterEntry:[]};for(const p of r){const r=p.process(l,d);for(const[y,g]of Object.entries(r)){if(!g)continue;let r=c.get(u);r||(r=new Map,c.set(u,r));const v=`${p.id}-${y}`;let h,m;const E=r.get(v);E?(h=E.pluginFilePath,m=E.projectFilePath):(h=`/code-execution-plugin-${s++}-${v}.js`,m=t.join(i,h.slice(1)),r.set(v,{pluginFilePath:h,projectFilePath:m,dispose(){e.existsSync(m)&&e.rmSync(m)}})),e.writeFileSync(h,g);const _=await n.getReady((0,a.compiledFileId)(m,l.excludeEditingTransformers),u),w=await o.getReady(m,u);d.add(_),d.add(w),f["before"===y?"beforeEntry":"afterEntry"].push(m)}}return f}}}({bundlePlugins:g,virtualFs:w,fs:h,compiledFilesManager:v,dependencyResourceFactoryImpl:O,projectPath:m.getProjectPath()}),k=l.provide({dependencies:[O,v,E],results:[O,v],handler:{async query(e,t){var n;const o={compiledFileCount:0},r=new Set,i={},s=[],c=[],l={};for(const n of e.entries){const{resolvedFile:e}=P(m.getProjectPath(),n);e?s.push(e):(r.add(E.get(n,t)),c.push(n))}for(;s.length>0;){const c=s.filter((e=>void 0===i[e]));s.length=0;const d=await Promise.all(c.filter((e=>!l[e])).map((n=>v.getReady((0,a.compiledFileId)(n,e.excludeEditingTransformers),t))));for(const e of d)e&&(e.isValid()||(l[e.getId().filePath]=`Compilation error: ${e.getStatus().message}`),o.compiledFileCount++,r.add(e));const u=await Promise.all(c.filter((e=>!l[e])).map((e=>O.getReady(e,t))));for(const e of u)e.isValid()||(l[e.getId()]=`Request extraction error: ${null!==(n=e.getStatus().message)&&void 0!==n?n:"Failed to extract requests"}`),r.add(e);for(let e=0;e<u.length;e++){const t=u[e].getLatest();i[c[e]]=t;for(const e of Object.values(t))e&&s.push(e)}}const d=0===c.length&&0===Object.keys(l).length,u=["Compilation errors:"];d||(c.length>0&&u.push(`Couldn't resolve following paths for execution: ${c.join(",")} `),Object.keys(l).length>0&&u.push(JSON.stringify(l,null,2)));const f=await D({id:e,dependencies:r,resource:t});return R("executionRunMeta",o),{dependencies:r,results:r,status:{valid:d,message:d?void 0:u.join("\n")},metaData:f}},dispose(e){T(e)}}}),I=async e=>{const t=new Set,n=new Set;return await F(e.filePath,e.exclude,t,n),t.add(e.filePath),{dependencies:n,value:[...t]}},q=f.provide({dependencies:[O],handler:{compute:I,async recompute(e){const{dependencies:t,value:n}=await I(e.getId());return{dependencies:t,changes:[(0,c.fullChange)(n)],status:(0,c.getDefaultStatusHandling)(e.getSerializedId(),t)}}}}),L=p.provide({dependencies:[O,M],handler:new d.DependencyGraphComputer(O,M)});return{resolver:{resolveFromFile:S,getLocalPackageVersion:function(e){const t=h.join(m.getProjectPath(),"package.json"),{resolvedRequest:n}=S(t,`${e}/package.json`);if(n)try{const{version:e}=h.readJsonFileSync(n);if("string"==typeof e)return e}catch{}}},resolveNodeRequest:P,dependencyResourceFactory:O,fileDependencyResourceFactory:M,executionResourceFactory:k,deepDependencies:q,fileDependencyGraphResourceFactory:L}}))},74161:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DependencyGraphComputer=void 0;const o=n(60814);t.DependencyGraphComputer=class{constructor(e,t){this.compiledFileDependencyResourceFactory=e,this.sourceFileDependencyResourceFactory=t}async compute(e){const t=[],n={};for(const n of e)t.push(n);const o=new Set;for(;t.length>0;){const e=t.shift();if(!n[e]){n[e]={};const r=await this.compiledFileDependencyResourceFactory.getReady(e),i=await this.sourceFileDependencyResourceFactory.getReady(e);for(const[o,s]of Object.entries({...r.getLatest(),...i.getLatest()}))n[e][o]=s,s&&t.push(s);o.add(r),o.add(i)}}return{value:n,dependencies:o,status:{valid:!0}}}async recompute(e){const{value:t,dependencies:n}=await this.compute(e.getId());return{changes:[(0,o.fullChange)(t)],dependencies:n,status:(0,o.getDefaultStatusHandling)(e.getSerializedId(),n)}}}},23575:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SIMULATION_CANVAS_CLASS_NAME=t.ENVIRONMENT_PROPERTIES_KEYS=void 0,t.ENVIRONMENT_PROPERTIES_KEYS=["windowHeight","windowWidth","windowBackgroundColor","canvasHeight","canvasWidth","canvasBackgroundColor","canvasMargin","canvasPadding"],t.SIMULATION_CANVAS_CLASS_NAME="simulationCanvas"},32228:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompilationError=t.FormatError=void 0;class n extends Error{constructor(){super(...arguments),this.name="FormatError"}}t.FormatError=n;class o extends Error{constructor(){super(...arguments),this.name="CompilationError"}}t.CompilationError=o},37024:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dependencyManipulator=void 0;const o=n(60814);t.dependencyManipulator={reducer:(e,t)=>({value:t.value,invertingChanges:[(0,o.fullChange)(e)]}),squasher:e=>[e[e.length-1]]}},47951:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(5163);o.__exportStar(n(37024),t),o.__exportStar(n(65084),t),o.__exportStar(n(23575),t),o.__exportStar(n(32228),t)},65084:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compiledFileId=void 0,t.compiledFileId=(e,t=!1)=>({filePath:e,outputLang:"javascript",excludeEditingTransformers:t})},80134:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultCompiledFileExtention=void 0;const o=n(5163),r=n(93849),i=o.__importStar(n(32510)),s=o.__importDefault(n(93208)),c=o.__importStar(n(2206)),a=o.__importDefault(n(19608));t.defaultCompiledFileExtention=".compiled";const l=c.default.api.pluggableProjectConfig.entry({compiledFilesExtention:t.defaultCompiledFileExtention},"compilation");t.default=new r.Feature({id:"compilation",dependencies:[s.default.asEntity,c.default.asEntity,i.default.asEntity,a.default.asEntity],api:{compilationSlot:r.Slot.withType().defineEntity(c.processingEnv),compilationStore:r.Service.withType().defineEntity(c.processingEnv).allowRemoteAccess(),compiledFilesManager:(0,i.defineComputedResource)().defineEntity(c.processingEnv),compilationConfig:l}})},97569:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(80134);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o(r).default}})},25447:(e,t,n)=>{e.exports=n(97569)},43934:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const o=n(5163);o.__exportStar(n(31434),t);var r=n(31434);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o.__importDefault(r).default}})},2206:(e,t,n)=>{e.exports=n(43934)},60814:(e,t,n)=>{e.exports=n(73858)},73837:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(89102);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o(r).default}})},89102:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(93849),r=n(2206);t.default=new o.Feature({id:"userApplicationServer",dependencies:[],api:{userApplicationServerInterface:o.Service.withType().defineEntity(r.processingEnv).allowRemoteAccess(),serverRootSlot:o.Slot.withType().defineEntity(r.processingEnv),applicationHandlerSlot:o.Slot.withType().defineEntity(r.processingEnv)},context:{serverInitializer:r.processingEnv.withContext()}})},19608:(e,t,n)=>{e.exports=n(73837)}}]);